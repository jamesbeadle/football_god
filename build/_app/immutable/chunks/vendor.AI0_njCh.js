import{c as Qr,g as Ef,_ as xf,a as Tf}from"./index.jGLts1cx.js";var rc={},On={};On.byteLength=Bf;On.toByteArray=Sf;On.fromByteArray=Of;var Yt=[],At=[],vf=typeof Uint8Array<"u"?Uint8Array:Array,ps="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Dr=0,Af=ps.length;Dr<Af;++Dr)Yt[Dr]=ps[Dr],At[ps.charCodeAt(Dr)]=Dr;At[45]=62;At[95]=63;function nc(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function Bf(e){var t=nc(e),r=t[0],n=t[1];return(r+n)*3/4-n}function If(e,t,r){return(t+r)*3/4-r}function Sf(e){var t,r=nc(e),n=r[0],i=r[1],o=new vf(If(e,n,i)),l=0,c=i>0?n-4:n,m;for(m=0;m<c;m+=4)t=At[e.charCodeAt(m)]<<18|At[e.charCodeAt(m+1)]<<12|At[e.charCodeAt(m+2)]<<6|At[e.charCodeAt(m+3)],o[l++]=t>>16&255,o[l++]=t>>8&255,o[l++]=t&255;return i===2&&(t=At[e.charCodeAt(m)]<<2|At[e.charCodeAt(m+1)]>>4,o[l++]=t&255),i===1&&(t=At[e.charCodeAt(m)]<<10|At[e.charCodeAt(m+1)]<<4|At[e.charCodeAt(m+2)]>>2,o[l++]=t>>8&255,o[l++]=t&255),o}function Nf(e){return Yt[e>>18&63]+Yt[e>>12&63]+Yt[e>>6&63]+Yt[e&63]}function Rf(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),i.push(Nf(n));return i.join("")}function Of(e){for(var t,r=e.length,n=r%3,i=[],o=16383,l=0,c=r-n;l<c;l+=o)i.push(Rf(e,l,l+o>c?c:l+o));return n===1?(t=e[r-1],i.push(Yt[t>>2]+Yt[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],i.push(Yt[t>>10]+Yt[t>>4&63]+Yt[t<<2&63]+"=")),i.join("")}var Un={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Un.read=function(e,t,r,n,i){var o,l,c=i*8-n-1,m=(1<<c)-1,b=m>>1,B=-7,A=r?i-1:0,P=r?-1:1,I=e[t+A];for(A+=P,o=I&(1<<-B)-1,I>>=-B,B+=c;B>0;o=o*256+e[t+A],A+=P,B-=8);for(l=o&(1<<-B)-1,o>>=-B,B+=n;B>0;l=l*256+e[t+A],A+=P,B-=8);if(o===0)o=1-b;else{if(o===m)return l?NaN:(I?-1:1)*(1/0);l=l+Math.pow(2,n),o=o-b}return(I?-1:1)*l*Math.pow(2,o-n)};Un.write=function(e,t,r,n,i,o){var l,c,m,b=o*8-i-1,B=(1<<b)-1,A=B>>1,P=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=n?0:o-1,O=n?1:-1,F=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,l=B):(l=Math.floor(Math.log(t)/Math.LN2),t*(m=Math.pow(2,-l))<1&&(l--,m*=2),l+A>=1?t+=P/m:t+=P*Math.pow(2,1-A),t*m>=2&&(l++,m/=2),l+A>=B?(c=0,l=B):l+A>=1?(c=(t*m-1)*Math.pow(2,i),l=l+A):(c=t*Math.pow(2,A-1)*Math.pow(2,i),l=0));i>=8;e[r+I]=c&255,I+=O,c/=256,i-=8);for(l=l<<i|c,b+=i;b>0;e[r+I]=l&255,I+=O,l/=256,b-=8);e[r+I-O]|=F*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=On,r=Un,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=q,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,c.TYPED_ARRAY_SUPPORT=o(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const y=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(y,f),y.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function l(y){if(y>i)throw new RangeError('The value "'+y+'" is invalid for option "size"');const f=new Uint8Array(y);return Object.setPrototypeOf(f,c.prototype),f}function c(y,f,d){if(typeof y=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(y)}return m(y,f,d)}c.poolSize=8192;function m(y,f,d){if(typeof y=="string")return P(y,f);if(ArrayBuffer.isView(y))return O(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(M(y,ArrayBuffer)||y&&M(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(M(y,SharedArrayBuffer)||y&&M(y.buffer,SharedArrayBuffer)))return F(y,f,d);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const v=y.valueOf&&y.valueOf();if(v!=null&&v!==y)return c.from(v,f,d);const C=D(y);if(C)return C;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return c.from(y[Symbol.toPrimitive]("string"),f,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}c.from=function(y,f,d){return m(y,f,d)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function b(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function B(y,f,d){return b(y),y<=0?l(y):f!==void 0?typeof d=="string"?l(y).fill(f,d):l(y).fill(f):l(y)}c.alloc=function(y,f,d){return B(y,f,d)};function A(y){return b(y),l(y<0?0:H(y)|0)}c.allocUnsafe=function(y){return A(y)},c.allocUnsafeSlow=function(y){return A(y)};function P(y,f){if((typeof f!="string"||f==="")&&(f="utf8"),!c.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const d=Z(y,f)|0;let v=l(d);const C=v.write(y,f);return C!==d&&(v=v.slice(0,C)),v}function I(y){const f=y.length<0?0:H(y.length)|0,d=l(f);for(let v=0;v<f;v+=1)d[v]=y[v]&255;return d}function O(y){if(M(y,Uint8Array)){const f=new Uint8Array(y);return F(f.buffer,f.byteOffset,f.byteLength)}return I(y)}function F(y,f,d){if(f<0||y.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<f+(d||0))throw new RangeError('"length" is outside of buffer bounds');let v;return f===void 0&&d===void 0?v=new Uint8Array(y):d===void 0?v=new Uint8Array(y,f):v=new Uint8Array(y,f,d),Object.setPrototypeOf(v,c.prototype),v}function D(y){if(c.isBuffer(y)){const f=H(y.length)|0,d=l(f);return d.length===0||y.copy(d,0,0,f),d}if(y.length!==void 0)return typeof y.length!="number"||G(y.length)?l(0):I(y);if(y.type==="Buffer"&&Array.isArray(y.data))return I(y.data)}function H(y){if(y>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return y|0}function q(y){return+y!=y&&(y=0),c.alloc(+y)}c.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==c.prototype},c.compare=function(f,d){if(M(f,Uint8Array)&&(f=c.from(f,f.offset,f.byteLength)),M(d,Uint8Array)&&(d=c.from(d,d.offset,d.byteLength)),!c.isBuffer(f)||!c.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===d)return 0;let v=f.length,C=d.length;for(let L=0,V=Math.min(v,C);L<V;++L)if(f[L]!==d[L]){v=f[L],C=d[L];break}return v<C?-1:C<v?1:0},c.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(f,d){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return c.alloc(0);let v;if(d===void 0)for(d=0,v=0;v<f.length;++v)d+=f[v].length;const C=c.allocUnsafe(d);let L=0;for(v=0;v<f.length;++v){let V=f[v];if(M(V,Uint8Array))L+V.length>C.length?(c.isBuffer(V)||(V=c.from(V)),V.copy(C,L)):Uint8Array.prototype.set.call(C,V,L);else if(c.isBuffer(V))V.copy(C,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=V.length}return C};function Z(y,f){if(c.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||M(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);const d=y.length,v=arguments.length>2&&arguments[2]===!0;if(!v&&d===0)return 0;let C=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return a(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return x(y).length;default:if(C)return v?-1:a(y).length;f=(""+f).toLowerCase(),C=!0}}c.byteLength=Z;function X(y,f,d){let v=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,f>>>=0,d<=f))return"";for(y||(y="utf8");;)switch(y){case"hex":return z(this,f,d);case"utf8":case"utf-8":return Ae(this,f,d);case"ascii":return we(this,f,d);case"latin1":case"binary":return ee(this,f,d);case"base64":return ge(this,f,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,f,d);default:if(v)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),v=!0}}c.prototype._isBuffer=!0;function K(y,f,d){const v=y[f];y[f]=y[d],y[d]=v}c.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<f;d+=2)K(this,d,d+1);return this},c.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<f;d+=4)K(this,d,d+3),K(this,d+1,d+2);return this},c.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<f;d+=8)K(this,d,d+7),K(this,d+1,d+6),K(this,d+2,d+5),K(this,d+3,d+4);return this},c.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?Ae(this,0,f):X.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(f){if(!c.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:c.compare(this,f)===0},c.prototype.inspect=function(){let f="";const d=e.INSPECT_MAX_BYTES;return f=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(f+=" ... "),"<Buffer "+f+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(f,d,v,C,L){if(M(f,Uint8Array)&&(f=c.from(f,f.offset,f.byteLength)),!c.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(d===void 0&&(d=0),v===void 0&&(v=f?f.length:0),C===void 0&&(C=0),L===void 0&&(L=this.length),d<0||v>f.length||C<0||L>this.length)throw new RangeError("out of range index");if(C>=L&&d>=v)return 0;if(C>=L)return-1;if(d>=v)return 1;if(d>>>=0,v>>>=0,C>>>=0,L>>>=0,this===f)return 0;let V=L-C,_e=v-d;const Ue=Math.min(V,_e),Re=this.slice(C,L),Ie=f.slice(d,v);for(let ke=0;ke<Ue;++ke)if(Re[ke]!==Ie[ke]){V=Re[ke],_e=Ie[ke];break}return V<_e?-1:_e<V?1:0};function j(y,f,d,v,C){if(y.length===0)return-1;if(typeof d=="string"?(v=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,G(d)&&(d=C?0:y.length-1),d<0&&(d=y.length+d),d>=y.length){if(C)return-1;d=y.length-1}else if(d<0)if(C)d=0;else return-1;if(typeof f=="string"&&(f=c.from(f,v)),c.isBuffer(f))return f.length===0?-1:$(y,f,d,v,C);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?C?Uint8Array.prototype.indexOf.call(y,f,d):Uint8Array.prototype.lastIndexOf.call(y,f,d):$(y,[f],d,v,C);throw new TypeError("val must be string, number or Buffer")}function $(y,f,d,v,C){let L=1,V=y.length,_e=f.length;if(v!==void 0&&(v=String(v).toLowerCase(),v==="ucs2"||v==="ucs-2"||v==="utf16le"||v==="utf-16le")){if(y.length<2||f.length<2)return-1;L=2,V/=2,_e/=2,d/=2}function Ue(Ie,ke){return L===1?Ie[ke]:Ie.readUInt16BE(ke*L)}let Re;if(C){let Ie=-1;for(Re=d;Re<V;Re++)if(Ue(y,Re)===Ue(f,Ie===-1?0:Re-Ie)){if(Ie===-1&&(Ie=Re),Re-Ie+1===_e)return Ie*L}else Ie!==-1&&(Re-=Re-Ie),Ie=-1}else for(d+_e>V&&(d=V-_e),Re=d;Re>=0;Re--){let Ie=!0;for(let ke=0;ke<_e;ke++)if(Ue(y,Re+ke)!==Ue(f,ke)){Ie=!1;break}if(Ie)return Re}return-1}c.prototype.includes=function(f,d,v){return this.indexOf(f,d,v)!==-1},c.prototype.indexOf=function(f,d,v){return j(this,f,d,v,!0)},c.prototype.lastIndexOf=function(f,d,v){return j(this,f,d,v,!1)};function Q(y,f,d,v){d=Number(d)||0;const C=y.length-d;v?(v=Number(v),v>C&&(v=C)):v=C;const L=f.length;v>L/2&&(v=L/2);let V;for(V=0;V<v;++V){const _e=parseInt(f.substr(V*2,2),16);if(G(_e))return V;y[d+V]=_e}return V}function he(y,f,d,v){return S(a(f,y.length-d),y,d,v)}function W(y,f,d,v){return S(u(f),y,d,v)}function ce(y,f,d,v){return S(x(f),y,d,v)}function ye(y,f,d,v){return S(g(f,y.length-d),y,d,v)}c.prototype.write=function(f,d,v,C){if(d===void 0)C="utf8",v=this.length,d=0;else if(v===void 0&&typeof d=="string")C=d,v=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(v)?(v=v>>>0,C===void 0&&(C="utf8")):(C=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const L=this.length-d;if((v===void 0||v>L)&&(v=L),f.length>0&&(v<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");C||(C="utf8");let V=!1;for(;;)switch(C){case"hex":return Q(this,f,d,v);case"utf8":case"utf-8":return he(this,f,d,v);case"ascii":case"latin1":case"binary":return W(this,f,d,v);case"base64":return ce(this,f,d,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,f,d,v);default:if(V)throw new TypeError("Unknown encoding: "+C);C=(""+C).toLowerCase(),V=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ge(y,f,d){return f===0&&d===y.length?t.fromByteArray(y):t.fromByteArray(y.slice(f,d))}function Ae(y,f,d){d=Math.min(y.length,d);const v=[];let C=f;for(;C<d;){const L=y[C];let V=null,_e=L>239?4:L>223?3:L>191?2:1;if(C+_e<=d){let Ue,Re,Ie,ke;switch(_e){case 1:L<128&&(V=L);break;case 2:Ue=y[C+1],(Ue&192)===128&&(ke=(L&31)<<6|Ue&63,ke>127&&(V=ke));break;case 3:Ue=y[C+1],Re=y[C+2],(Ue&192)===128&&(Re&192)===128&&(ke=(L&15)<<12|(Ue&63)<<6|Re&63,ke>2047&&(ke<55296||ke>57343)&&(V=ke));break;case 4:Ue=y[C+1],Re=y[C+2],Ie=y[C+3],(Ue&192)===128&&(Re&192)===128&&(Ie&192)===128&&(ke=(L&15)<<18|(Ue&63)<<12|(Re&63)<<6|Ie&63,ke>65535&&ke<1114112&&(V=ke))}}V===null?(V=65533,_e=1):V>65535&&(V-=65536,v.push(V>>>10&1023|55296),V=56320|V&1023),v.push(V),C+=_e}return J(v)}const xe=4096;function J(y){const f=y.length;if(f<=xe)return String.fromCharCode.apply(String,y);let d="",v=0;for(;v<f;)d+=String.fromCharCode.apply(String,y.slice(v,v+=xe));return d}function we(y,f,d){let v="";d=Math.min(y.length,d);for(let C=f;C<d;++C)v+=String.fromCharCode(y[C]&127);return v}function ee(y,f,d){let v="";d=Math.min(y.length,d);for(let C=f;C<d;++C)v+=String.fromCharCode(y[C]);return v}function z(y,f,d){const v=y.length;(!f||f<0)&&(f=0),(!d||d<0||d>v)&&(d=v);let C="";for(let L=f;L<d;++L)C+=ne[y[L]];return C}function se(y,f,d){const v=y.slice(f,d);let C="";for(let L=0;L<v.length-1;L+=2)C+=String.fromCharCode(v[L]+v[L+1]*256);return C}c.prototype.slice=function(f,d){const v=this.length;f=~~f,d=d===void 0?v:~~d,f<0?(f+=v,f<0&&(f=0)):f>v&&(f=v),d<0?(d+=v,d<0&&(d=0)):d>v&&(d=v),d<f&&(d=f);const C=this.subarray(f,d);return Object.setPrototypeOf(C,c.prototype),C};function Y(y,f,d){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+f>d)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(f,d,v){f=f>>>0,d=d>>>0,v||Y(f,d,this.length);let C=this[f],L=1,V=0;for(;++V<d&&(L*=256);)C+=this[f+V]*L;return C},c.prototype.readUintBE=c.prototype.readUIntBE=function(f,d,v){f=f>>>0,d=d>>>0,v||Y(f,d,this.length);let C=this[f+--d],L=1;for(;d>0&&(L*=256);)C+=this[f+--d]*L;return C},c.prototype.readUint8=c.prototype.readUInt8=function(f,d){return f=f>>>0,d||Y(f,1,this.length),this[f]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(f,d){return f=f>>>0,d||Y(f,2,this.length),this[f]|this[f+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(f,d){return f=f>>>0,d||Y(f,2,this.length),this[f]<<8|this[f+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(f,d){return f=f>>>0,d||Y(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(f,d){return f=f>>>0,d||Y(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},c.prototype.readBigUInt64LE=fe(function(f){f=f>>>0,_(f,"offset");const d=this[f],v=this[f+7];(d===void 0||v===void 0)&&T(f,this.length-8);const C=d+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,L=this[++f]+this[++f]*2**8+this[++f]*2**16+v*2**24;return BigInt(C)+(BigInt(L)<<BigInt(32))}),c.prototype.readBigUInt64BE=fe(function(f){f=f>>>0,_(f,"offset");const d=this[f],v=this[f+7];(d===void 0||v===void 0)&&T(f,this.length-8);const C=d*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],L=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+v;return(BigInt(C)<<BigInt(32))+BigInt(L)}),c.prototype.readIntLE=function(f,d,v){f=f>>>0,d=d>>>0,v||Y(f,d,this.length);let C=this[f],L=1,V=0;for(;++V<d&&(L*=256);)C+=this[f+V]*L;return L*=128,C>=L&&(C-=Math.pow(2,8*d)),C},c.prototype.readIntBE=function(f,d,v){f=f>>>0,d=d>>>0,v||Y(f,d,this.length);let C=d,L=1,V=this[f+--C];for(;C>0&&(L*=256);)V+=this[f+--C]*L;return L*=128,V>=L&&(V-=Math.pow(2,8*d)),V},c.prototype.readInt8=function(f,d){return f=f>>>0,d||Y(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},c.prototype.readInt16LE=function(f,d){f=f>>>0,d||Y(f,2,this.length);const v=this[f]|this[f+1]<<8;return v&32768?v|4294901760:v},c.prototype.readInt16BE=function(f,d){f=f>>>0,d||Y(f,2,this.length);const v=this[f+1]|this[f]<<8;return v&32768?v|4294901760:v},c.prototype.readInt32LE=function(f,d){return f=f>>>0,d||Y(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},c.prototype.readInt32BE=function(f,d){return f=f>>>0,d||Y(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},c.prototype.readBigInt64LE=fe(function(f){f=f>>>0,_(f,"offset");const d=this[f],v=this[f+7];(d===void 0||v===void 0)&&T(f,this.length-8);const C=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(v<<24);return(BigInt(C)<<BigInt(32))+BigInt(d+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),c.prototype.readBigInt64BE=fe(function(f){f=f>>>0,_(f,"offset");const d=this[f],v=this[f+7];(d===void 0||v===void 0)&&T(f,this.length-8);const C=(d<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(C)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+v)}),c.prototype.readFloatLE=function(f,d){return f=f>>>0,d||Y(f,4,this.length),r.read(this,f,!0,23,4)},c.prototype.readFloatBE=function(f,d){return f=f>>>0,d||Y(f,4,this.length),r.read(this,f,!1,23,4)},c.prototype.readDoubleLE=function(f,d){return f=f>>>0,d||Y(f,8,this.length),r.read(this,f,!0,52,8)},c.prototype.readDoubleBE=function(f,d){return f=f>>>0,d||Y(f,8,this.length),r.read(this,f,!1,52,8)};function ie(y,f,d,v,C,L){if(!c.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>C||f<L)throw new RangeError('"value" argument is out of bounds');if(d+v>y.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(f,d,v,C){if(f=+f,d=d>>>0,v=v>>>0,!C){const _e=Math.pow(2,8*v)-1;ie(this,f,d,v,_e,0)}let L=1,V=0;for(this[d]=f&255;++V<v&&(L*=256);)this[d+V]=f/L&255;return d+v},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(f,d,v,C){if(f=+f,d=d>>>0,v=v>>>0,!C){const _e=Math.pow(2,8*v)-1;ie(this,f,d,v,_e,0)}let L=v-1,V=1;for(this[d+L]=f&255;--L>=0&&(V*=256);)this[d+L]=f/V&255;return d+v},c.prototype.writeUint8=c.prototype.writeUInt8=function(f,d,v){return f=+f,d=d>>>0,v||ie(this,f,d,1,255,0),this[d]=f&255,d+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(f,d,v){return f=+f,d=d>>>0,v||ie(this,f,d,2,65535,0),this[d]=f&255,this[d+1]=f>>>8,d+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(f,d,v){return f=+f,d=d>>>0,v||ie(this,f,d,2,65535,0),this[d]=f>>>8,this[d+1]=f&255,d+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(f,d,v){return f=+f,d=d>>>0,v||ie(this,f,d,4,4294967295,0),this[d+3]=f>>>24,this[d+2]=f>>>16,this[d+1]=f>>>8,this[d]=f&255,d+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(f,d,v){return f=+f,d=d>>>0,v||ie(this,f,d,4,4294967295,0),this[d]=f>>>24,this[d+1]=f>>>16,this[d+2]=f>>>8,this[d+3]=f&255,d+4};function oe(y,f,d,v,C){h(f,v,C,y,d,7);let L=Number(f&BigInt(4294967295));y[d++]=L,L=L>>8,y[d++]=L,L=L>>8,y[d++]=L,L=L>>8,y[d++]=L;let V=Number(f>>BigInt(32)&BigInt(4294967295));return y[d++]=V,V=V>>8,y[d++]=V,V=V>>8,y[d++]=V,V=V>>8,y[d++]=V,d}function E(y,f,d,v,C){h(f,v,C,y,d,7);let L=Number(f&BigInt(4294967295));y[d+7]=L,L=L>>8,y[d+6]=L,L=L>>8,y[d+5]=L,L=L>>8,y[d+4]=L;let V=Number(f>>BigInt(32)&BigInt(4294967295));return y[d+3]=V,V=V>>8,y[d+2]=V,V=V>>8,y[d+1]=V,V=V>>8,y[d]=V,d+8}c.prototype.writeBigUInt64LE=fe(function(f,d=0){return oe(this,f,d,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=fe(function(f,d=0){return E(this,f,d,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(f,d,v,C){if(f=+f,d=d>>>0,!C){const Ue=Math.pow(2,8*v-1);ie(this,f,d,v,Ue-1,-Ue)}let L=0,V=1,_e=0;for(this[d]=f&255;++L<v&&(V*=256);)f<0&&_e===0&&this[d+L-1]!==0&&(_e=1),this[d+L]=(f/V>>0)-_e&255;return d+v},c.prototype.writeIntBE=function(f,d,v,C){if(f=+f,d=d>>>0,!C){const Ue=Math.pow(2,8*v-1);ie(this,f,d,v,Ue-1,-Ue)}let L=v-1,V=1,_e=0;for(this[d+L]=f&255;--L>=0&&(V*=256);)f<0&&_e===0&&this[d+L+1]!==0&&(_e=1),this[d+L]=(f/V>>0)-_e&255;return d+v},c.prototype.writeInt8=function(f,d,v){return f=+f,d=d>>>0,v||ie(this,f,d,1,127,-128),f<0&&(f=255+f+1),this[d]=f&255,d+1},c.prototype.writeInt16LE=function(f,d,v){return f=+f,d=d>>>0,v||ie(this,f,d,2,32767,-32768),this[d]=f&255,this[d+1]=f>>>8,d+2},c.prototype.writeInt16BE=function(f,d,v){return f=+f,d=d>>>0,v||ie(this,f,d,2,32767,-32768),this[d]=f>>>8,this[d+1]=f&255,d+2},c.prototype.writeInt32LE=function(f,d,v){return f=+f,d=d>>>0,v||ie(this,f,d,4,2147483647,-2147483648),this[d]=f&255,this[d+1]=f>>>8,this[d+2]=f>>>16,this[d+3]=f>>>24,d+4},c.prototype.writeInt32BE=function(f,d,v){return f=+f,d=d>>>0,v||ie(this,f,d,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[d]=f>>>24,this[d+1]=f>>>16,this[d+2]=f>>>8,this[d+3]=f&255,d+4},c.prototype.writeBigInt64LE=fe(function(f,d=0){return oe(this,f,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=fe(function(f,d=0){return E(this,f,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function le(y,f,d,v,C,L){if(d+v>y.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function pe(y,f,d,v,C){return f=+f,d=d>>>0,C||le(y,f,d,4),r.write(y,f,d,v,23,4),d+4}c.prototype.writeFloatLE=function(f,d,v){return pe(this,f,d,!0,v)},c.prototype.writeFloatBE=function(f,d,v){return pe(this,f,d,!1,v)};function ve(y,f,d,v,C){return f=+f,d=d>>>0,C||le(y,f,d,8),r.write(y,f,d,v,52,8),d+8}c.prototype.writeDoubleLE=function(f,d,v){return ve(this,f,d,!0,v)},c.prototype.writeDoubleBE=function(f,d,v){return ve(this,f,d,!1,v)},c.prototype.copy=function(f,d,v,C){if(!c.isBuffer(f))throw new TypeError("argument should be a Buffer");if(v||(v=0),!C&&C!==0&&(C=this.length),d>=f.length&&(d=f.length),d||(d=0),C>0&&C<v&&(C=v),C===v||f.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("sourceEnd out of bounds");C>this.length&&(C=this.length),f.length-d<C-v&&(C=f.length-d+v);const L=C-v;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,v,C):Uint8Array.prototype.set.call(f,this.subarray(v,C),d),L},c.prototype.fill=function(f,d,v,C){if(typeof f=="string"){if(typeof d=="string"?(C=d,d=0,v=this.length):typeof v=="string"&&(C=v,v=this.length),C!==void 0&&typeof C!="string")throw new TypeError("encoding must be a string");if(typeof C=="string"&&!c.isEncoding(C))throw new TypeError("Unknown encoding: "+C);if(f.length===1){const V=f.charCodeAt(0);(C==="utf8"&&V<128||C==="latin1")&&(f=V)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(d<0||this.length<d||this.length<v)throw new RangeError("Out of range index");if(v<=d)return this;d=d>>>0,v=v===void 0?this.length:v>>>0,f||(f=0);let L;if(typeof f=="number")for(L=d;L<v;++L)this[L]=f;else{const V=c.isBuffer(f)?f:c.from(f,C),_e=V.length;if(_e===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(L=0;L<v-d;++L)this[L+d]=V[L%_e]}return this};const ae={};function ue(y,f,d){ae[y]=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${y}]`,this.stack,delete this.name}get code(){return y}set code(C){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:C,writable:!0})}toString(){return`${this.name} [${y}]: ${this.message}`}}}ue("ERR_BUFFER_OUT_OF_BOUNDS",function(y){return y?`${y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ue("ERR_INVALID_ARG_TYPE",function(y,f){return`The "${y}" argument must be of type number. Received type ${typeof f}`},TypeError),ue("ERR_OUT_OF_RANGE",function(y,f,d){let v=`The value of "${y}" is out of range.`,C=d;return Number.isInteger(d)&&Math.abs(d)>2**32?C=w(String(d)):typeof d=="bigint"&&(C=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(C=w(C)),C+="n"),v+=` It must be ${f}. Received ${C}`,v},RangeError);function w(y){let f="",d=y.length;const v=y[0]==="-"?1:0;for(;d>=v+4;d-=3)f=`_${y.slice(d-3,d)}${f}`;return`${y.slice(0,d)}${f}`}function s(y,f,d){_(f,"offset"),(y[f]===void 0||y[f+d]===void 0)&&T(f,y.length-(d+1))}function h(y,f,d,v,C,L){if(y>d||y<f){const V=typeof f=="bigint"?"n":"";let _e;throw f===0||f===BigInt(0)?_e=`>= 0${V} and < 2${V} ** ${(L+1)*8}${V}`:_e=`>= -(2${V} ** ${(L+1)*8-1}${V}) and < 2 ** ${(L+1)*8-1}${V}`,new ae.ERR_OUT_OF_RANGE("value",_e,y)}s(v,C,L)}function _(y,f){if(typeof y!="number")throw new ae.ERR_INVALID_ARG_TYPE(f,"number",y)}function T(y,f,d){throw Math.floor(y)!==y?(_(y,d),new ae.ERR_OUT_OF_RANGE("offset","an integer",y)):f<0?new ae.ERR_BUFFER_OUT_OF_BOUNDS:new ae.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,y)}const N=/[^+/0-9A-Za-z-_]/g;function p(y){if(y=y.split("=")[0],y=y.trim().replace(N,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function a(y,f){f=f||1/0;let d;const v=y.length;let C=null;const L=[];for(let V=0;V<v;++V){if(d=y.charCodeAt(V),d>55295&&d<57344){if(!C){if(d>56319){(f-=3)>-1&&L.push(239,191,189);continue}else if(V+1===v){(f-=3)>-1&&L.push(239,191,189);continue}C=d;continue}if(d<56320){(f-=3)>-1&&L.push(239,191,189),C=d;continue}d=(C-55296<<10|d-56320)+65536}else C&&(f-=3)>-1&&L.push(239,191,189);if(C=null,d<128){if((f-=1)<0)break;L.push(d)}else if(d<2048){if((f-=2)<0)break;L.push(d>>6|192,d&63|128)}else if(d<65536){if((f-=3)<0)break;L.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((f-=4)<0)break;L.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return L}function u(y){const f=[];for(let d=0;d<y.length;++d)f.push(y.charCodeAt(d)&255);return f}function g(y,f){let d,v,C;const L=[];for(let V=0;V<y.length&&!((f-=2)<0);++V)d=y.charCodeAt(V),v=d>>8,C=d%256,L.push(C),L.push(v);return L}function x(y){return t.toByteArray(p(y))}function S(y,f,d,v){let C;for(C=0;C<v&&!(C+d>=f.length||C>=y.length);++C)f[C+d]=y[C];return C}function M(y,f){return y instanceof f||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===f.name}function G(y){return y!==y}const ne=function(){const y="0123456789abcdef",f=new Array(256);for(let d=0;d<16;++d){const v=d*16;for(let C=0;C<16;++C)f[v+C]=y[d]+y[C]}return f}();function fe(y){return typeof BigInt>"u"?be:y}function be(){throw new Error("BigInt not supported")}})(rc);function Ga(e){const t=Ff(e),r=new ArrayBuffer(t.length),n=new DataView(r);for(let i=0;i<r.byteLength;i++)n.setUint8(i,t.charCodeAt(i));return r}const Uf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Ff(e){e.length%4===0&&(e=e.replace(/==?$/,""));let t="",r=0,n=0;for(let i=0;i<e.length;i++)r<<=6,r|=Uf.indexOf(e[i]),n+=6,n===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,t+=String.fromCharCode(r)):n===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}const Pf=-1,Cf=-2,kf=-3,Mf=-4,$f=-5,Vf=-6;function jp(e,t){if(typeof e=="number")return i(e,!0);if(!Array.isArray(e)||e.length===0)throw new Error("Invalid input");const r=e,n=Array(r.length);function i(o,l=!1){if(o===Pf)return;if(o===kf)return NaN;if(o===Mf)return 1/0;if(o===$f)return-1/0;if(o===Vf)return-0;if(l)throw new Error("Invalid input");if(o in n)return n[o];const c=r[o];if(!c||typeof c!="object")n[o]=c;else if(Array.isArray(c))if(typeof c[0]=="string"){const m=c[0],b=t?.[m];if(b)return n[o]=b(i(c[1]));switch(m){case"Date":n[o]=new Date(c[1]);break;case"Set":const B=new Set;n[o]=B;for(let I=1;I<c.length;I+=1)B.add(i(c[I]));break;case"Map":const A=new Map;n[o]=A;for(let I=1;I<c.length;I+=2)A.set(i(c[I]),i(c[I+1]));break;case"RegExp":n[o]=new RegExp(c[1],c[2]);break;case"Object":n[o]=Object(c[1]);break;case"BigInt":n[o]=BigInt(c[1]);break;case"null":const P=Object.create(null);n[o]=P;for(let I=1;I<c.length;I+=2)P[c[I]]=i(c[I+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const I=globalThis[m],O=c[1],F=Ga(O),D=new I(F);n[o]=D;break}case"ArrayBuffer":{const I=c[1],O=Ga(I);n[o]=O;break}default:throw new Error(`Unknown type ${m}`)}}else{const m=new Array(c.length);n[o]=m;for(let b=0;b<c.length;b+=1){const B=c[b];B!==Cf&&(m[b]=i(B))}}else{const m={};n[o]=m;for(const b in c){const B=c[b];m[b]=i(B)}}return n[o]}return i(0)}var Ds;(function(e){e[e.SysFatal=1]="SysFatal",e[e.SysTransient=2]="SysTransient",e[e.DestinationInvalid=3]="DestinationInvalid",e[e.CanisterReject=4]="CanisterReject",e[e.CanisterError=5]="CanisterError"})(Ds||(Ds={}));const Si="abcdefghijklmnopqrstuvwxyz234567",en=Object.create(null);for(let e=0;e<Si.length;e++)en[Si[e]]=e;en[0]=en.o;en[1]=en.i;function Lf(e){let t=0,r=0,n="";function i(o){return t<0?r|=o>>-t:r=o<<t&248,t>3?(t-=8,1):(t<4&&(n+=Si[r>>3],t+=5),0)}for(let o=0;o<e.length;)o+=i(e[o]);return n+(t<0?Si[r>>3]:"")}function Df(e){let t=0,r=0;const n=new Uint8Array(e.length*4/3|0);let i=0;function o(l){let c=en[l.toLowerCase()];if(c===void 0)throw new Error(`Invalid character: ${JSON.stringify(l)}`);c<<=3,r|=c>>>t,t+=5,t>=8&&(n[i++]=r,t-=8,t>0?r=c<<5-t&255:r=0)}for(const l of e)o(l);return n.slice(0,i)}const qf=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Gf(e){const t=new Uint8Array(e);let r=-1;for(let n=0;n<t.length;n++){const o=(t[n]^r)&255;r=qf[o]^r>>>8}return(r^-1)>>>0}function Hf(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function ha(e,...t){if(!Hf(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Ha(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function jf(e,t){ha(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const ys=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gs=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),qt=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function ic(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function sc(e){return typeof e=="string"&&(e=ic(e)),ha(e),e}function zf(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];ha(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const o=e[n];r.set(o,i),i+=o.length}return r}class Kf{clone(){return this._cloneInto()}}function pa(e){const t=n=>e().update(sc(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function ac(e=32){if(ys&&typeof ys.getRandomValues=="function")return ys.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Wf(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),l=Number(r>>i&o),c=Number(r&o),m=n?4:0,b=n?0:4;e.setUint32(t+m,l,n),e.setUint32(t+b,c,n)}const Yf=(e,t,r)=>e&t^~e&r,Zf=(e,t,r)=>e&t^e&r^t&r;class oc extends Kf{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=gs(this.buffer)}update(t){Ha(this);const{view:r,buffer:n,blockLen:i}=this;t=sc(t);const o=t.length;for(let l=0;l<o;){const c=Math.min(i-this.pos,o-l);if(c===i){const m=gs(t);for(;i<=o-l;l+=i)this.process(m,l);continue}n.set(t.subarray(l,l+c),this.pos),this.pos+=c,l+=c,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ha(this),jf(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:o}=this;let{pos:l}=this;r[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>i-l&&(this.process(n,0),l=0);for(let A=l;A<i;A++)r[A]=0;Wf(n,i-8,BigInt(this.length*8),o),this.process(n,0);const c=gs(t),m=this.outputLen;if(m%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=m/4,B=this.get();if(b>B.length)throw new Error("_sha2: outputLen bigger than state");for(let A=0;A<b;A++)c.setUint32(4*A,B[A],o)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:o,destroyed:l,pos:c}=this;return t.length=i,t.pos=c,t.finished=o,t.destroyed=l,i%r&&t.buffer.set(n),t}}const Xf=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ur=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),fr=new Uint32Array(64);class cc extends oc{constructor(){super(64,32,8,!1),this.A=ur[0]|0,this.B=ur[1]|0,this.C=ur[2]|0,this.D=ur[3]|0,this.E=ur[4]|0,this.F=ur[5]|0,this.G=ur[6]|0,this.H=ur[7]|0}get(){const{A:t,B:r,C:n,D:i,E:o,F:l,G:c,H:m}=this;return[t,r,n,i,o,l,c,m]}set(t,r,n,i,o,l,c,m){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=l|0,this.G=c|0,this.H=m|0}process(t,r){for(let A=0;A<16;A++,r+=4)fr[A]=t.getUint32(r,!1);for(let A=16;A<64;A++){const P=fr[A-15],I=fr[A-2],O=qt(P,7)^qt(P,18)^P>>>3,F=qt(I,17)^qt(I,19)^I>>>10;fr[A]=F+fr[A-7]+O+fr[A-16]|0}let{A:n,B:i,C:o,D:l,E:c,F:m,G:b,H:B}=this;for(let A=0;A<64;A++){const P=qt(c,6)^qt(c,11)^qt(c,25),I=B+P+Yf(c,m,b)+Xf[A]+fr[A]|0,F=(qt(n,2)^qt(n,13)^qt(n,22))+Zf(n,i,o)|0;B=b,b=m,m=c,c=l+I|0,l=o,o=i,i=n,n=I+F|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,l=l+this.D|0,c=c+this.E|0,m=m+this.F|0,b=b+this.G|0,B=B+this.H|0,this.set(n,i,o,l,c,m,b,B)}roundClean(){fr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Jf extends cc{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const ya=pa(()=>new cc),Qf=pa(()=>new Jf);function el(e){return Qf.create().update(new Uint8Array(e)).digest()}const pn="__principal__",tl=2,ja=4,rl="aaaaa-aa",nl=e=>{var t;return new Uint8Array(((t=e.match(/.{1,2}/g))!==null&&t!==void 0?t:[]).map(r=>parseInt(r,16)))},il=e=>e.reduce((t,r)=>t+r.toString(16).padStart(2,"0"),"");let Pe=class si{constructor(t){this._arr=t,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([ja]))}static managementCanister(){return this.fromHex(rl)}static selfAuthenticating(t){const r=el(t);return new this(new Uint8Array([...r,tl]))}static from(t){if(typeof t=="string")return si.fromText(t);if(Object.getPrototypeOf(t)===Uint8Array.prototype)return new si(t);if(typeof t=="object"&&t!==null&&t._isPrincipal===!0)return new si(t._arr);throw new Error(`Impossible to convert ${JSON.stringify(t)} to Principal.`)}static fromHex(t){return new this(nl(t))}static fromText(t){let r=t;if(t.includes(pn)){const l=JSON.parse(t);pn in l&&(r=l[pn])}const n=r.toLowerCase().replace(/-/g,"");let i=Df(n);i=i.slice(4,i.length);const o=new this(i);if(o.toText()!==r)throw new Error(`Principal "${o.toText()}" does not have a valid checksum (original value "${r}" may not be a valid Principal ID).`);return o}static fromUint8Array(t){return new this(t)}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===ja}toUint8Array(){return this._arr}toHex(){return il(this._arr).toUpperCase()}toText(){const t=new ArrayBuffer(4);new DataView(t).setUint32(0,Gf(this._arr));const n=new Uint8Array(t),i=Uint8Array.from(this._arr),o=new Uint8Array([...n,...i]),c=Lf(o).match(/.{1,5}/g);if(!c)throw new Error;return c.join("-")}toString(){return this.toText()}toJSON(){return{[pn]:this.toText()}}compareTo(t){for(let r=0;r<Math.min(this._arr.length,t._arr.length);r++){if(this._arr[r]<t._arr[r])return"lt";if(this._arr[r]>t._arr[r])return"gt"}return this._arr.length<t._arr.length?"lt":this._arr.length>t._arr.length?"gt":"eq"}ltEq(t){const r=this.compareTo(t);return r=="lt"||r=="eq"}gtEq(t){const r=this.compareTo(t);return r=="gt"||r=="eq"}};const sl=Object.freeze(Object.defineProperty({__proto__:null,JSON_KEY_PRINCIPAL:pn,Principal:Pe},Symbol.toStringTag,{value:"Module"}));class dt extends Error{constructor(t){super(t),this.message=t,Object.setPrototypeOf(this,dt.prototype)}}function $e(...e){const t=new Uint8Array(e.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of e)t.set(new Uint8Array(n),r),r+=n.byteLength;return t}let sn=class{constructor(t,r=t?.byteLength||0){this._buffer=Ni(t||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}get buffer(){return Ni(this._view.slice())}get byteLength(){return this._view.byteLength}read(t){const r=this._view.subarray(0,t);return this._view=this._view.subarray(t),r.slice().buffer}readUint8(){const t=this._view[0];return this._view=this._view.subarray(1),t}write(t){const r=new Uint8Array(t),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,n)}get end(){return this._view.byteLength===0}alloc(t){const r=new ArrayBuffer((this._buffer.byteLength+t)*1.2|0),n=new Uint8Array(r,0,this._view.byteLength+t);n.set(this._view),this._buffer=r,this._view=n}};function ms(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).buffer}function Ni(e){return e instanceof Uint8Array?ms(e):e instanceof ArrayBuffer?e:Array.isArray(e)?ms(new Uint8Array(e)):"buffer"in e?Ni(e.buffer):ms(new Uint8Array(e))}function al(e){const r=new TextEncoder().encode(e);let n=0;for(const i of r)n=(n*223+i)%2**32;return n}function Zt(e){if(/^_\d+_$/.test(e)||/^_0x[0-9a-fA-F]+_$/.test(e)){const t=+e.slice(1,-1);if(Number.isSafeInteger(t)&&t>=0&&t<2**32)return t}return al(e)}function uc(){throw new Error("unexpected end of buffer")}function kr(e,t){return e.byteLength<t&&uc(),e.read(t)}function Mr(e){const t=e.readUint8();return t===void 0&&uc(),t}function Ke(e){if(typeof e=="number"&&(e=BigInt(e)),e<BigInt(0))throw new Error("Cannot leb encode negative values.");const t=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,r=new sn(new ArrayBuffer(t),0);for(;;){const n=Number(e&BigInt(127));if(e/=BigInt(128),e===BigInt(0)){r.write(new Uint8Array([n]));break}else r.write(new Uint8Array([n|128]))}return r.buffer}function nt(e){let t=BigInt(1),r=BigInt(0),n;do n=Mr(e),r+=BigInt(n&127).valueOf()*t,t*=BigInt(128);while(n>=128);return r}function tt(e){typeof e=="number"&&(e=BigInt(e));const t=e<BigInt(0);t&&(e=-e-BigInt(1));const r=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,n=new sn(new ArrayBuffer(r),0);for(;;){const o=i(e);if(e/=BigInt(128),t&&e===BigInt(0)&&o&64||!t&&e===BigInt(0)&&!(o&64)){n.write(new Uint8Array([o]));break}else n.write(new Uint8Array([o|128]))}function i(o){const l=o%BigInt(128);return Number(t?BigInt(128)-l-BigInt(1):l)}return n.buffer}function yr(e){const t=new Uint8Array(e.buffer);let r=0;for(;r<t.byteLength;r++)if(t[r]<128){if(!(t[r]&64))return nt(e);break}const n=new Uint8Array(kr(e,r+1));let i=BigInt(0);for(let o=n.byteLength-1;o>=0;o--)i=i*BigInt(128)+BigInt(128-(n[o]&127)-1);return-i-BigInt(1)}function ol(e,t){if(BigInt(e)<BigInt(0))throw new Error("Cannot write negative values.");return fc(e,t)}function fc(e,t){e=BigInt(e);const r=new sn(new ArrayBuffer(Math.min(1,t)),0);let n=0,i=BigInt(256),o=BigInt(0),l=Number(e%i);for(r.write(new Uint8Array([l]));++n<t;)e<0&&o===BigInt(0)&&l!==0&&(o=BigInt(1)),l=Number((e/i-o)%BigInt(256)),r.write(new Uint8Array([l])),i*=BigInt(256);return r.buffer}function lc(e,t){let r=BigInt(Mr(e)),n=BigInt(1),i=0;for(;++i<t;){n*=BigInt(256);const o=BigInt(Mr(e));r=r+n*o}return r}function cl(e,t){let r=lc(e,t);const n=BigInt(2)**(BigInt(8)*BigInt(t-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}function qs(e){const t=BigInt(e);if(e<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<t}const ai="DIDL",za=400;function Bn(e,t,r){return e.map((n,i)=>r(n,t[i]))}class ul{constructor(){this._typs=[],this._idx=new Map}has(t){return this._idx.has(t.name)}add(t,r){const n=this._typs.length;this._idx.set(t.name,n),this._typs.push(r)}merge(t,r){const n=this._idx.get(t.name),i=this._idx.get(r);if(n===void 0)throw new Error("Missing type index for "+t);if(i===void 0)throw new Error("Missing type index for "+r);this._typs[n]=this._typs[i],this._typs.splice(i,1),this._idx.delete(r)}encode(){const t=Ke(this._typs.length),r=$e(...this._typs);return $e(t,r)}indexOf(t){if(!this._idx.has(t))throw new Error("Missing type index for "+t);return tt(this._idx.get(t)||0)}}class fl{visitType(t,r){throw new Error("Not implemented")}visitPrimitive(t,r){return this.visitType(t,r)}visitEmpty(t,r){return this.visitPrimitive(t,r)}visitBool(t,r){return this.visitPrimitive(t,r)}visitNull(t,r){return this.visitPrimitive(t,r)}visitReserved(t,r){return this.visitPrimitive(t,r)}visitText(t,r){return this.visitPrimitive(t,r)}visitNumber(t,r){return this.visitPrimitive(t,r)}visitInt(t,r){return this.visitNumber(t,r)}visitNat(t,r){return this.visitNumber(t,r)}visitFloat(t,r){return this.visitPrimitive(t,r)}visitFixedInt(t,r){return this.visitNumber(t,r)}visitFixedNat(t,r){return this.visitNumber(t,r)}visitPrincipal(t,r){return this.visitPrimitive(t,r)}visitConstruct(t,r){return this.visitType(t,r)}visitVec(t,r,n){return this.visitConstruct(t,n)}visitOpt(t,r,n){return this.visitConstruct(t,n)}visitRecord(t,r,n){return this.visitConstruct(t,n)}visitTuple(t,r,n){const i=r.map((o,l)=>[`_${l}_`,o]);return this.visitRecord(t,i,n)}visitVariant(t,r,n){return this.visitConstruct(t,n)}visitRec(t,r,n){return this.visitConstruct(r,n)}visitFunc(t,r){return this.visitConstruct(t,r)}visitService(t,r){return this.visitConstruct(t,r)}}class Hi{display(){return this.name}valueToString(t){return Ze(t)}buildTypeTable(t){t.has(this)||this._buildTypeTableImpl(t)}}class St extends Hi{checkType(t){if(this.name!==t.name)throw new Error(`type mismatch: type on the wire ${t.name}, expect type ${this.name}`);return t}_buildTypeTableImpl(t){}}class Br extends Hi{checkType(t){if(t instanceof Ir){const r=t.getType();if(typeof r>"u")throw new Error("type mismatch with uninitialized type");return r}throw new Error(`type mismatch: type on the wire ${t.name}, expect type ${this.name}`)}encodeType(t){return t.indexOf(this.name)}}class dc extends St{accept(t,r){return t.visitEmpty(this,r)}covariant(t){throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return tt(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}class hc extends Hi{checkType(t){throw new Error("Method not implemented for unknown.")}accept(t,r){throw t.visitType(this,r)}covariant(t){throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(t,r){let n=r.decodeValue(t,r);Object(n)!==n&&(n=Object(n));let i;return r instanceof Ir?i=()=>r.getType():i=()=>r,Object.defineProperty(n,"type",{value:i,writable:!0,enumerable:!1,configurable:!0}),n}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class pc extends St{accept(t,r){return t.visitBool(this,r)}covariant(t){if(typeof t=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(t){return new Uint8Array([t?1:0])}encodeType(){return tt(-2)}decodeValue(t,r){switch(this.checkType(r),Mr(t)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}class yc extends St{accept(t,r){return t.visitNull(this,r)}covariant(t){if(t===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return tt(-1)}decodeValue(t,r){return this.checkType(r),null}get name(){return"null"}}class Ri extends St{accept(t,r){return t.visitReserved(this,r)}covariant(t){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return tt(-16)}decodeValue(t,r){return r.name!==this.name&&r.decodeValue(t,r),null}get name(){return"reserved"}}class gc extends St{accept(t,r){return t.visitText(this,r)}covariant(t){if(typeof t=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(t){const r=new TextEncoder().encode(t),n=Ke(r.byteLength);return $e(n,r)}encodeType(){return tt(-15)}decodeValue(t,r){this.checkType(r);const n=nt(t),i=kr(t,Number(n));return new TextDecoder("utf8",{fatal:!0}).decode(i)}get name(){return"text"}valueToString(t){return'"'+t+'"'}}class mc extends St{accept(t,r){return t.visitInt(this,r)}covariant(t){if(typeof t=="bigint"||Number.isInteger(t))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(t){return tt(t)}encodeType(){return tt(-4)}decodeValue(t,r){return this.checkType(r),yr(t)}get name(){return"int"}valueToString(t){return t.toString()}}class wc extends St{accept(t,r){return t.visitNat(this,r)}covariant(t){if(typeof t=="bigint"&&t>=BigInt(0)||Number.isInteger(t)&&t>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(t){return Ke(t)}encodeType(){return tt(-3)}decodeValue(t,r){return this.checkType(r),nt(t)}get name(){return"nat"}valueToString(t){return t.toString()}}class ga extends St{constructor(t){if(super(),this._bits=t,t!==32&&t!==64)throw new Error("not a valid float type")}accept(t,r){return t.visitFloat(this,r)}covariant(t){if(typeof t=="number"||t instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(t){const r=new ArrayBuffer(this._bits/8),n=new DataView(r);return this._bits===32?n.setFloat32(0,t,!0):n.setFloat64(0,t,!0),r}encodeType(){const t=this._bits===32?-13:-14;return tt(t)}decodeValue(t,r){this.checkType(r);const n=kr(t,this._bits/8),i=new DataView(n);return this._bits===32?i.getFloat32(0,!0):i.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(t){return t.toString()}}class $r extends St{constructor(t){super(),this._bits=t}accept(t,r){return t.visitFixedInt(this,r)}covariant(t){const r=qs(this._bits-1)*BigInt(-1),n=qs(this._bits-1)-BigInt(1);let i=!1;if(typeof t=="bigint")i=t>=r&&t<=n;else if(Number.isInteger(t)){const o=BigInt(t);i=o>=r&&o<=n}else i=!1;if(i)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(t){return fc(t,this._bits/8)}encodeType(){const t=Math.log2(this._bits)-3;return tt(-9-t)}decodeValue(t,r){this.checkType(r);const n=cl(t,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`int${this._bits}`}valueToString(t){return t.toString()}}class Tr extends St{constructor(t){super(),this._bits=t}accept(t,r){return t.visitFixedNat(this,r)}covariant(t){const r=qs(this._bits);let n=!1;if(typeof t=="bigint"&&t>=BigInt(0)?n=t<r:Number.isInteger(t)&&t>=0?n=BigInt(t)<r:n=!1,n)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(t){return ol(t,this._bits/8)}encodeType(){const t=Math.log2(this._bits)-3;return tt(-5-t)}decodeValue(t,r){this.checkType(r);const n=lc(t,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`nat${this._bits}`}valueToString(t){return t.toString()}}class ji extends Br{constructor(t){super(),this._type=t,this._blobOptimization=!1,t instanceof Tr&&t._bits===8&&(this._blobOptimization=!0)}accept(t,r){return t.visitVec(this,this._type,r)}covariant(t){const r=this._type instanceof Tr?this._type._bits:this._type instanceof $r?this._type._bits:0;if(ArrayBuffer.isView(t)&&r==t.BYTES_PER_ELEMENT*8||Array.isArray(t)&&t.every((n,i)=>{try{return this._type.covariant(n)}catch(o){throw new Error(`Invalid ${this.display()} argument: 

index ${i} -> ${o.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(t){const r=Ke(t.length);if(this._blobOptimization)return $e(r,new Uint8Array(t));if(ArrayBuffer.isView(t))return $e(r,new Uint8Array(t.buffer));const n=new sn(new ArrayBuffer(r.byteLength+t.length),0);n.write(r);for(const i of t){const o=this._type.encodeValue(i);n.write(new Uint8Array(o))}return n.buffer}_buildTypeTableImpl(t){this._type.buildTypeTable(t);const r=tt(-19),n=this._type.encodeType(t);t.add(this,$e(r,n))}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof ji))throw new Error("Not a vector type");const i=Number(nt(t));if(this._type instanceof Tr){if(this._type._bits==8)return new Uint8Array(t.read(i));if(this._type._bits==16)return new Uint16Array(t.read(i*2));if(this._type._bits==32)return new Uint32Array(t.read(i*4));if(this._type._bits==64)return new BigUint64Array(t.read(i*8))}if(this._type instanceof $r){if(this._type._bits==8)return new Int8Array(t.read(i));if(this._type._bits==16)return new Int16Array(t.read(i*2));if(this._type._bits==32)return new Int32Array(t.read(i*4));if(this._type._bits==64)return new BigInt64Array(t.read(i*8))}const o=[];for(let l=0;l<i;l++)o.push(this._type.decodeValue(t,n._type));return o}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(t){return"vec {"+t.map(n=>this._type.valueToString(n)).join("; ")+"}"}}class tn extends Br{constructor(t){super(),this._type=t}accept(t,r){return t.visitOpt(this,this._type,r)}covariant(t){try{if(Array.isArray(t)&&(t.length===0||t.length===1&&this._type.covariant(t[0])))return!0}catch(r){throw new Error(`Invalid ${this.display()} argument: ${Ze(t)} 

-> ${r.message}`)}throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(t){return t.length===0?new Uint8Array([0]):$e(new Uint8Array([1]),this._type.encodeValue(t[0]))}_buildTypeTableImpl(t){this._type.buildTypeTable(t);const r=tt(-18),n=this._type.encodeType(t);t.add(this,$e(r,n))}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof tn))throw new Error("Not an option type");switch(Mr(t)){case 0:return[];case 1:return[this._type.decodeValue(t,n._type)];default:throw new Error("Not an option value")}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(t){return t.length===0?"null":`opt ${this._type.valueToString(t[0])}`}}class Fn extends Br{constructor(t={}){super(),this._fields=Object.entries(t).sort((r,n)=>Zt(r[0])-Zt(n[0]))}accept(t,r){return t.visitRecord(this,this._fields,r)}tryAsTuple(){const t=[];for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(n!==`_${r}_`)return null;t.push(i)}return t}covariant(t){if(typeof t=="object"&&this._fields.every(([r,n])=>{if(!t.hasOwnProperty(r))throw new Error(`Record is missing key "${r}".`);try{return n.covariant(t[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

field ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(t){const r=this._fields.map(([i])=>t[i]),n=Bn(this._fields,r,([,i],o)=>i.encodeValue(o));return $e(...n)}_buildTypeTableImpl(t){this._fields.forEach(([o,l])=>l.buildTypeTable(t));const r=tt(-20),n=Ke(this._fields.length),i=this._fields.map(([o,l])=>$e(Ke(Zt(o)),l.encodeType(t)));t.add(this,$e(r,n,$e(...i)))}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof Fn))throw new Error("Not a record type");const i={};let o=0,l=0;for(;l<n._fields.length;){const[c,m]=n._fields[l];if(o>=this._fields.length){m.decodeValue(t,m),l++;continue}const[b,B]=this._fields[o],A=Zt(this._fields[o][0]),P=Zt(c);if(A===P)i[b]=B.decodeValue(t,m),o++,l++;else if(P>A)if(B instanceof tn||B instanceof Ri)i[b]=[],o++;else throw new Error("Cannot find required field "+b);else m.decodeValue(t,m),l++}for(const[c,m]of this._fields.slice(o))if(m instanceof tn||m instanceof Ri)i[c]=[];else throw new Error("Cannot find required field "+c);return i}get name(){return`record {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`record {${this._fields.map(([r,n])=>r+":"+n.display()).join("; ")}}`}valueToString(t){const r=this._fields.map(([i])=>t[i]);return`record {${Bn(this._fields,r,([i,o],l)=>i+"="+o.valueToString(l)).join("; ")}}`}}class zi extends Fn{constructor(t){const r={};t.forEach((n,i)=>r["_"+i+"_"]=n),super(r),this._components=t}accept(t,r){return t.visitTuple(this,this._components,r)}covariant(t){if(Array.isArray(t)&&t.length>=this._fields.length&&this._components.every((r,n)=>{try{return r.covariant(t[n])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

index ${n} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(t){const r=Bn(this._components,t,(n,i)=>n.encodeValue(i));return $e(...r)}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof zi))throw new Error("not a tuple type");if(n._components.length<this._components.length)throw new Error("tuple mismatch");const i=[];for(const[o,l]of n._components.entries())o>=this._components.length?l.decodeValue(t,l):i.push(this._components[o].decodeValue(t,l));return i}display(){return`record {${this._components.map(r=>r.display()).join("; ")}}`}valueToString(t){return`record {${Bn(this._components,t,(n,i)=>n.valueToString(i)).join("; ")}}`}}class Ki extends Br{constructor(t={}){super(),this._fields=Object.entries(t).sort((r,n)=>Zt(r[0])-Zt(n[0]))}accept(t,r){return t.visitVariant(this,this._fields,r)}covariant(t){if(typeof t=="object"&&Object.entries(t).length===1&&this._fields.every(([r,n])=>{try{return!t.hasOwnProperty(r)||n.covariant(t[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

variant ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(t){for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(t.hasOwnProperty(n)){const o=Ke(r),l=i.encodeValue(t[n]);return $e(o,l)}}throw Error("Variant has no data: "+t)}_buildTypeTableImpl(t){this._fields.forEach(([,o])=>{o.buildTypeTable(t)});const r=tt(-21),n=Ke(this._fields.length),i=this._fields.map(([o,l])=>$e(Ke(Zt(o)),l.encodeType(t)));t.add(this,$e(r,n,...i))}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof Ki))throw new Error("Not a variant type");const i=Number(nt(t));if(i>=n._fields.length)throw Error("Invalid variant index: "+i);const[o,l]=n._fields[i];for(const[c,m]of this._fields)if(Zt(o)===Zt(c)){const b=m.decodeValue(t,l);return{[c]:b}}throw new Error("Cannot find field hash "+o)}get name(){return`variant {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`variant {${this._fields.map(([r,n])=>r+(n.name==="null"?"":`:${n.display()}`)).join("; ")}}`}valueToString(t){for(const[r,n]of this._fields)if(t.hasOwnProperty(r)){const i=n.valueToString(t[r]);return i==="null"?`variant {${r}}`:`variant {${r}=${i}}`}throw new Error("Variant has no data: "+t)}}class Ir extends Br{constructor(){super(...arguments),this._id=Ir._counter++,this._type=void 0}accept(t,r){if(!this._type)throw Error("Recursive type uninitialized.");return t.visitRec(this,this._type,r)}fill(t){this._type=t}getType(){return this._type}covariant(t){if(this._type&&this._type.covariant(t))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(t){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(t)}_buildTypeTableImpl(t){if(!this._type)throw Error("Recursive type uninitialized.");t.add(this,new Uint8Array([])),this._type.buildTypeTable(t),t.merge(this,this._type.name)}decodeValue(t,r){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(t,r)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`μ${this.name}.${this._type.name}`}valueToString(t){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(t)}}Ir._counter=0;function ma(e){if(Mr(e)!==1)throw new Error("Cannot decode principal");const r=Number(nt(e));return Pe.fromUint8Array(new Uint8Array(kr(e,r)))}class bc extends St{accept(t,r){return t.visitPrincipal(this,r)}covariant(t){if(t&&t._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(t){const r=t.toUint8Array(),n=Ke(r.byteLength);return $e(new Uint8Array([1]),n,r)}encodeType(){return tt(-24)}decodeValue(t,r){return this.checkType(r),ma(t)}get name(){return"principal"}valueToString(t){return`${this.name} "${t.toText()}"`}}class wa extends Br{constructor(t,r,n=[]){super(),this.argTypes=t,this.retTypes=r,this.annotations=n}static argsToString(t,r){if(t.length!==r.length)throw new Error("arity mismatch");return"("+t.map((n,i)=>n.valueToString(r[i])).join(", ")+")"}accept(t,r){return t.visitFunc(this,r)}covariant(t){if(Array.isArray(t)&&t.length===2&&t[0]&&t[0]._isPrincipal&&typeof t[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue([t,r]){const n=t.toUint8Array(),i=Ke(n.byteLength),o=$e(new Uint8Array([1]),i,n),l=new TextEncoder().encode(r),c=Ke(l.byteLength);return $e(new Uint8Array([1]),o,c,l)}_buildTypeTableImpl(t){this.argTypes.forEach(b=>b.buildTypeTable(t)),this.retTypes.forEach(b=>b.buildTypeTable(t));const r=tt(-22),n=Ke(this.argTypes.length),i=$e(...this.argTypes.map(b=>b.encodeType(t))),o=Ke(this.retTypes.length),l=$e(...this.retTypes.map(b=>b.encodeType(t))),c=Ke(this.annotations.length),m=$e(...this.annotations.map(b=>this.encodeAnnotation(b)));t.add(this,$e(r,n,i,o,l,c,m))}decodeValue(t){if(Mr(t)!==1)throw new Error("Cannot decode function reference");const n=ma(t),i=Number(nt(t)),o=kr(t,i),c=new TextDecoder("utf8",{fatal:!0}).decode(o);return[n,c]}get name(){const t=this.argTypes.map(i=>i.name).join(", "),r=this.retTypes.map(i=>i.name).join(", "),n=" "+this.annotations.join(" ");return`(${t}) -> (${r})${n}`}valueToString([t,r]){return`func "${t.toText()}".${r}`}display(){const t=this.argTypes.map(i=>i.display()).join(", "),r=this.retTypes.map(i=>i.display()).join(", "),n=" "+this.annotations.join(" ");return`(${t}) → (${r})${n}`}encodeAnnotation(t){if(t==="query")return new Uint8Array([1]);if(t==="oneway")return new Uint8Array([2]);if(t==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}class _c extends Br{constructor(t){super(),this._fields=Object.entries(t).sort((r,n)=>r[0]<n[0]?-1:r[0]>n[0]?1:0)}accept(t,r){return t.visitService(this,r)}covariant(t){if(t&&t._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ze(t)}`)}encodeValue(t){const r=t.toUint8Array(),n=Ke(r.length);return $e(new Uint8Array([1]),n,r)}_buildTypeTableImpl(t){this._fields.forEach(([o,l])=>l.buildTypeTable(t));const r=tt(-23),n=Ke(this._fields.length),i=this._fields.map(([o,l])=>{const c=new TextEncoder().encode(o),m=Ke(c.length);return $e(m,c,l.encodeType(t))});t.add(this,$e(r,n,...i))}decodeValue(t){return ma(t)}get name(){return`service {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}valueToString(t){return`service "${t.toText()}"`}}function Ze(e){const t=JSON.stringify(e,(r,n)=>typeof n=="bigint"?`BigInt(${n})`:n);return t&&t.length>za?t.substring(0,za-3)+"...":t}function Gs(e,t){if(t.length<e.length)throw Error("Wrong number of message arguments");const r=new ul;e.forEach(m=>m.buildTypeTable(r));const n=new TextEncoder().encode(ai),i=r.encode(),o=Ke(t.length),l=$e(...e.map(m=>m.encodeType(r))),c=$e(...Bn(e,t,(m,b)=>{try{m.covariant(b)}catch(B){throw new Error(B.message+`

`)}return m.encodeValue(b)}));return $e(n,i,o,l,c)}function Ec(e,t){const r=new sn(t);if(t.byteLength<ai.length)throw new Error("Message length smaller than magic number");const n=kr(r,ai.length),i=new TextDecoder().decode(n);if(i!==ai)throw new Error("Wrong magic number: "+JSON.stringify(i));function o(I){const O=[],F=Number(nt(I));for(let q=0;q<F;q++){const Z=Number(yr(I));switch(Z){case-18:case-19:{const X=Number(yr(I));O.push([Z,X]);break}case-20:case-21:{const X=[];let K=Number(nt(I)),j;for(;K--;){const $=Number(nt(I));if($>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof j=="number"&&j>=$)throw new Error("field id collision or not sorted");j=$;const Q=Number(yr(I));X.push([$,Q])}O.push([Z,X]);break}case-22:{const X=[];let K=Number(nt(I));for(;K--;)X.push(Number(yr(I)));const j=[];let $=Number(nt(I));for(;$--;)j.push(Number(yr(I)));const Q=[];let he=Number(nt(I));for(;he--;)switch(Number(nt(I))){case 1:{Q.push("query");break}case 2:{Q.push("oneway");break}case 3:{Q.push("composite_query");break}default:throw new Error("unknown annotation")}O.push([Z,[X,j,Q]]);break}case-23:{let X=Number(nt(I));const K=[];for(;X--;){const j=Number(nt(I)),$=new TextDecoder().decode(kr(I,j)),Q=yr(I);K.push([$,Q])}O.push([Z,K]);break}default:throw new Error("Illegal op_code: "+Z)}}const D=[],H=Number(nt(I));for(let q=0;q<H;q++)D.push(Number(yr(I)));return[O,D]}const[l,c]=o(r);if(c.length<e.length)throw new Error("Wrong number of return values");const m=l.map(I=>jc());function b(I){if(I<-24)throw new Error("future value not supported");if(I<0)switch(I){case-1:return Ac;case-2:return vc;case-3:return Sc;case-4:return Ic;case-5:return Cc;case-6:return kc;case-7:return Mc;case-8:return $c;case-9:return Oc;case-10:return Uc;case-11:return Fc;case-12:return Pc;case-13:return Nc;case-14:return Rc;case-15:return Bc;case-16:return Tc;case-17:return xc;case-24:return Vc;default:throw new Error("Illegal op_code: "+I)}if(I>=l.length)throw new Error("type index out of range");return m[I]}function B(I){switch(I[0]){case-19:{const O=b(I[1]);return Dc(O)}case-18:{const O=b(I[1]);return qc(O)}case-20:{const O={};for(const[H,q]of I[1]){const Z=`_${H}_`;O[Z]=b(q)}const F=Gc(O),D=F.tryAsTuple();return Array.isArray(D)?Lc(...D):F}case-21:{const O={};for(const[F,D]of I[1]){const H=`_${F}_`;O[H]=b(D)}return Hc(O)}case-22:{const[O,F,D]=I[1];return zc(O.map(H=>b(H)),F.map(H=>b(H)),D)}case-23:{const O={},F=I[1];for(const[D,H]of F){let q=b(H);if(q instanceof Ir&&(q=q.getType()),!(q instanceof wa))throw new Error("Illegal service definition: services can only contain functions");O[D]=q}return Kc(O)}default:throw new Error("Illegal op_code: "+I[0])}}l.forEach((I,O)=>{if(I[0]===-22){const F=B(I);m[O].fill(F)}}),l.forEach((I,O)=>{if(I[0]!==-22){const F=B(I);m[O].fill(F)}});const A=c.map(I=>b(I)),P=e.map((I,O)=>I.decodeValue(r,A[O]));for(let I=e.length;I<A.length;I++)A[I].decodeValue(r,A[I]);if(r.byteLength>0)throw new Error("decode: Left-over bytes");return P}const xc=new dc,Tc=new Ri,ll=new hc,vc=new pc,Ac=new yc,Bc=new gc,Ic=new mc,Sc=new wc,Nc=new ga(32),Rc=new ga(64),Oc=new $r(8),Uc=new $r(16),Fc=new $r(32),Pc=new $r(64),Cc=new Tr(8),kc=new Tr(16),Mc=new Tr(32),$c=new Tr(64),Vc=new bc;function Lc(...e){return new zi(e)}function Dc(e){return new ji(e)}function qc(e){return new tn(e)}function Gc(e){return new Fn(e)}function Hc(e){return new Ki(e)}function jc(){return new Ir}function zc(e,t,r=[]){return new wa(e,t,r)}function Kc(e){return new _c(e)}const dl=Object.freeze(Object.defineProperty({__proto__:null,Bool:vc,BoolClass:pc,ConstructType:Br,Empty:xc,EmptyClass:dc,FixedIntClass:$r,FixedNatClass:Tr,Float32:Nc,Float64:Rc,FloatClass:ga,Func:zc,FuncClass:wa,Int:Ic,Int16:Uc,Int32:Fc,Int64:Pc,Int8:Oc,IntClass:mc,Nat:Sc,Nat16:kc,Nat32:Mc,Nat64:$c,Nat8:Cc,NatClass:wc,Null:Ac,NullClass:yc,Opt:qc,OptClass:tn,PrimitiveType:St,Principal:Vc,PrincipalClass:bc,Rec:jc,RecClass:Ir,Record:Gc,RecordClass:Fn,Reserved:Tc,ReservedClass:Ri,Service:Kc,ServiceClass:_c,Text:Bc,TextClass:gc,Tuple:Lc,TupleClass:zi,Type:Hi,Unknown:ll,UnknownClass:hc,Variant:Hc,VariantClass:Ki,Vec:Dc,VecClass:ji,Visitor:fl,decode:Ec,encode:Gs},Symbol.toStringTag,{value:"Module"}));var Wc={},Pn={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){var t=On,r=Un,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=q,e.INSPECT_MAX_BYTES=50;var i=2147483647;e.kMaxLength=i,c.TYPED_ARRAY_SUPPORT=o(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{var p=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(p,a),p.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function l(p){if(p>i)throw new RangeError('The value "'+p+'" is invalid for option "size"');var a=new Uint8Array(p);return Object.setPrototypeOf(a,c.prototype),a}function c(p,a,u){if(typeof p=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(p)}return m(p,a,u)}c.poolSize=8192;function m(p,a,u){if(typeof p=="string")return P(p,a);if(ArrayBuffer.isView(p))return O(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(_(p,ArrayBuffer)||p&&_(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_(p,SharedArrayBuffer)||p&&_(p.buffer,SharedArrayBuffer)))return F(p,a,u);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var g=p.valueOf&&p.valueOf();if(g!=null&&g!==p)return c.from(g,a,u);var x=D(p);if(x)return x;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return c.from(p[Symbol.toPrimitive]("string"),a,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}c.from=function(p,a,u){return m(p,a,u)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function b(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function B(p,a,u){return b(p),p<=0?l(p):a!==void 0?typeof u=="string"?l(p).fill(a,u):l(p).fill(a):l(p)}c.alloc=function(p,a,u){return B(p,a,u)};function A(p){return b(p),l(p<0?0:H(p)|0)}c.allocUnsafe=function(p){return A(p)},c.allocUnsafeSlow=function(p){return A(p)};function P(p,a){if((typeof a!="string"||a==="")&&(a="utf8"),!c.isEncoding(a))throw new TypeError("Unknown encoding: "+a);var u=Z(p,a)|0,g=l(u),x=g.write(p,a);return x!==u&&(g=g.slice(0,x)),g}function I(p){for(var a=p.length<0?0:H(p.length)|0,u=l(a),g=0;g<a;g+=1)u[g]=p[g]&255;return u}function O(p){if(_(p,Uint8Array)){var a=new Uint8Array(p);return F(a.buffer,a.byteOffset,a.byteLength)}return I(p)}function F(p,a,u){if(a<0||p.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<a+(u||0))throw new RangeError('"length" is outside of buffer bounds');var g;return a===void 0&&u===void 0?g=new Uint8Array(p):u===void 0?g=new Uint8Array(p,a):g=new Uint8Array(p,a,u),Object.setPrototypeOf(g,c.prototype),g}function D(p){if(c.isBuffer(p)){var a=H(p.length)|0,u=l(a);return u.length===0||p.copy(u,0,0,a),u}if(p.length!==void 0)return typeof p.length!="number"||T(p.length)?l(0):I(p);if(p.type==="Buffer"&&Array.isArray(p.data))return I(p.data)}function H(p){if(p>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return p|0}function q(p){return+p!=p&&(p=0),c.alloc(+p)}c.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==c.prototype},c.compare=function(a,u){if(_(a,Uint8Array)&&(a=c.from(a,a.offset,a.byteLength)),_(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),!c.isBuffer(a)||!c.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===u)return 0;for(var g=a.length,x=u.length,S=0,M=Math.min(g,x);S<M;++S)if(a[S]!==u[S]){g=a[S],x=u[S];break}return g<x?-1:x<g?1:0},c.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(a,u){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return c.alloc(0);var g;if(u===void 0)for(u=0,g=0;g<a.length;++g)u+=a[g].length;var x=c.allocUnsafe(u),S=0;for(g=0;g<a.length;++g){var M=a[g];if(_(M,Uint8Array))S+M.length>x.length?c.from(M).copy(x,S):Uint8Array.prototype.set.call(x,M,S);else if(c.isBuffer(M))M.copy(x,S);else throw new TypeError('"list" argument must be an Array of Buffers');S+=M.length}return x};function Z(p,a){if(c.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||_(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);var u=p.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&u===0)return 0;for(var x=!1;;)switch(a){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return ae(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return s(p).length;default:if(x)return g?-1:ae(p).length;a=(""+a).toLowerCase(),x=!0}}c.byteLength=Z;function X(p,a,u){var g=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,a>>>=0,u<=a))return"";for(p||(p="utf8");;)switch(p){case"hex":return z(this,a,u);case"utf8":case"utf-8":return Ae(this,a,u);case"ascii":return we(this,a,u);case"latin1":case"binary":return ee(this,a,u);case"base64":return ge(this,a,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,a,u);default:if(g)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),g=!0}}c.prototype._isBuffer=!0;function K(p,a,u){var g=p[a];p[a]=p[u],p[u]=g}c.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var u=0;u<a;u+=2)K(this,u,u+1);return this},c.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var u=0;u<a;u+=4)K(this,u,u+3),K(this,u+1,u+2);return this},c.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var u=0;u<a;u+=8)K(this,u,u+7),K(this,u+1,u+6),K(this,u+2,u+5),K(this,u+3,u+4);return this},c.prototype.toString=function(){var a=this.length;return a===0?"":arguments.length===0?Ae(this,0,a):X.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(a){if(!c.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:c.compare(this,a)===0},c.prototype.inspect=function(){var a="",u=e.INSPECT_MAX_BYTES;return a=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(a+=" ... "),"<Buffer "+a+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(a,u,g,x,S){if(_(a,Uint8Array)&&(a=c.from(a,a.offset,a.byteLength)),!c.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(u===void 0&&(u=0),g===void 0&&(g=a?a.length:0),x===void 0&&(x=0),S===void 0&&(S=this.length),u<0||g>a.length||x<0||S>this.length)throw new RangeError("out of range index");if(x>=S&&u>=g)return 0;if(x>=S)return-1;if(u>=g)return 1;if(u>>>=0,g>>>=0,x>>>=0,S>>>=0,this===a)return 0;for(var M=S-x,G=g-u,ne=Math.min(M,G),fe=this.slice(x,S),be=a.slice(u,g),y=0;y<ne;++y)if(fe[y]!==be[y]){M=fe[y],G=be[y];break}return M<G?-1:G<M?1:0};function j(p,a,u,g,x){if(p.length===0)return-1;if(typeof u=="string"?(g=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,T(u)&&(u=x?0:p.length-1),u<0&&(u=p.length+u),u>=p.length){if(x)return-1;u=p.length-1}else if(u<0)if(x)u=0;else return-1;if(typeof a=="string"&&(a=c.from(a,g)),c.isBuffer(a))return a.length===0?-1:$(p,a,u,g,x);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?x?Uint8Array.prototype.indexOf.call(p,a,u):Uint8Array.prototype.lastIndexOf.call(p,a,u):$(p,[a],u,g,x);throw new TypeError("val must be string, number or Buffer")}function $(p,a,u,g,x){var S=1,M=p.length,G=a.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(p.length<2||a.length<2)return-1;S=2,M/=2,G/=2,u/=2}function ne(d,v){return S===1?d[v]:d.readUInt16BE(v*S)}var fe;if(x){var be=-1;for(fe=u;fe<M;fe++)if(ne(p,fe)===ne(a,be===-1?0:fe-be)){if(be===-1&&(be=fe),fe-be+1===G)return be*S}else be!==-1&&(fe-=fe-be),be=-1}else for(u+G>M&&(u=M-G),fe=u;fe>=0;fe--){for(var y=!0,f=0;f<G;f++)if(ne(p,fe+f)!==ne(a,f)){y=!1;break}if(y)return fe}return-1}c.prototype.includes=function(a,u,g){return this.indexOf(a,u,g)!==-1},c.prototype.indexOf=function(a,u,g){return j(this,a,u,g,!0)},c.prototype.lastIndexOf=function(a,u,g){return j(this,a,u,g,!1)};function Q(p,a,u,g){u=Number(u)||0;var x=p.length-u;g?(g=Number(g),g>x&&(g=x)):g=x;var S=a.length;g>S/2&&(g=S/2);for(var M=0;M<g;++M){var G=parseInt(a.substr(M*2,2),16);if(T(G))return M;p[u+M]=G}return M}function he(p,a,u,g){return h(ae(a,p.length-u),p,u,g)}function W(p,a,u,g){return h(ue(a),p,u,g)}function ce(p,a,u,g){return h(s(a),p,u,g)}function ye(p,a,u,g){return h(w(a,p.length-u),p,u,g)}c.prototype.write=function(a,u,g,x){if(u===void 0)x="utf8",g=this.length,u=0;else if(g===void 0&&typeof u=="string")x=u,g=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(g)?(g=g>>>0,x===void 0&&(x="utf8")):(x=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var S=this.length-u;if((g===void 0||g>S)&&(g=S),a.length>0&&(g<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");x||(x="utf8");for(var M=!1;;)switch(x){case"hex":return Q(this,a,u,g);case"utf8":case"utf-8":return he(this,a,u,g);case"ascii":case"latin1":case"binary":return W(this,a,u,g);case"base64":return ce(this,a,u,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,a,u,g);default:if(M)throw new TypeError("Unknown encoding: "+x);x=(""+x).toLowerCase(),M=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ge(p,a,u){return a===0&&u===p.length?t.fromByteArray(p):t.fromByteArray(p.slice(a,u))}function Ae(p,a,u){u=Math.min(p.length,u);for(var g=[],x=a;x<u;){var S=p[x],M=null,G=S>239?4:S>223?3:S>191?2:1;if(x+G<=u){var ne,fe,be,y;switch(G){case 1:S<128&&(M=S);break;case 2:ne=p[x+1],(ne&192)===128&&(y=(S&31)<<6|ne&63,y>127&&(M=y));break;case 3:ne=p[x+1],fe=p[x+2],(ne&192)===128&&(fe&192)===128&&(y=(S&15)<<12|(ne&63)<<6|fe&63,y>2047&&(y<55296||y>57343)&&(M=y));break;case 4:ne=p[x+1],fe=p[x+2],be=p[x+3],(ne&192)===128&&(fe&192)===128&&(be&192)===128&&(y=(S&15)<<18|(ne&63)<<12|(fe&63)<<6|be&63,y>65535&&y<1114112&&(M=y))}}M===null?(M=65533,G=1):M>65535&&(M-=65536,g.push(M>>>10&1023|55296),M=56320|M&1023),g.push(M),x+=G}return J(g)}var xe=4096;function J(p){var a=p.length;if(a<=xe)return String.fromCharCode.apply(String,p);for(var u="",g=0;g<a;)u+=String.fromCharCode.apply(String,p.slice(g,g+=xe));return u}function we(p,a,u){var g="";u=Math.min(p.length,u);for(var x=a;x<u;++x)g+=String.fromCharCode(p[x]&127);return g}function ee(p,a,u){var g="";u=Math.min(p.length,u);for(var x=a;x<u;++x)g+=String.fromCharCode(p[x]);return g}function z(p,a,u){var g=p.length;(!a||a<0)&&(a=0),(!u||u<0||u>g)&&(u=g);for(var x="",S=a;S<u;++S)x+=N[p[S]];return x}function se(p,a,u){for(var g=p.slice(a,u),x="",S=0;S<g.length-1;S+=2)x+=String.fromCharCode(g[S]+g[S+1]*256);return x}c.prototype.slice=function(a,u){var g=this.length;a=~~a,u=u===void 0?g:~~u,a<0?(a+=g,a<0&&(a=0)):a>g&&(a=g),u<0?(u+=g,u<0&&(u=0)):u>g&&(u=g),u<a&&(u=a);var x=this.subarray(a,u);return Object.setPrototypeOf(x,c.prototype),x};function Y(p,a,u){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+a>u)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(a,u,g){a=a>>>0,u=u>>>0,g||Y(a,u,this.length);for(var x=this[a],S=1,M=0;++M<u&&(S*=256);)x+=this[a+M]*S;return x},c.prototype.readUintBE=c.prototype.readUIntBE=function(a,u,g){a=a>>>0,u=u>>>0,g||Y(a,u,this.length);for(var x=this[a+--u],S=1;u>0&&(S*=256);)x+=this[a+--u]*S;return x},c.prototype.readUint8=c.prototype.readUInt8=function(a,u){return a=a>>>0,u||Y(a,1,this.length),this[a]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(a,u){return a=a>>>0,u||Y(a,2,this.length),this[a]|this[a+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(a,u){return a=a>>>0,u||Y(a,2,this.length),this[a]<<8|this[a+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(a,u){return a=a>>>0,u||Y(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(a,u){return a=a>>>0,u||Y(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},c.prototype.readIntLE=function(a,u,g){a=a>>>0,u=u>>>0,g||Y(a,u,this.length);for(var x=this[a],S=1,M=0;++M<u&&(S*=256);)x+=this[a+M]*S;return S*=128,x>=S&&(x-=Math.pow(2,8*u)),x},c.prototype.readIntBE=function(a,u,g){a=a>>>0,u=u>>>0,g||Y(a,u,this.length);for(var x=u,S=1,M=this[a+--x];x>0&&(S*=256);)M+=this[a+--x]*S;return S*=128,M>=S&&(M-=Math.pow(2,8*u)),M},c.prototype.readInt8=function(a,u){return a=a>>>0,u||Y(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},c.prototype.readInt16LE=function(a,u){a=a>>>0,u||Y(a,2,this.length);var g=this[a]|this[a+1]<<8;return g&32768?g|4294901760:g},c.prototype.readInt16BE=function(a,u){a=a>>>0,u||Y(a,2,this.length);var g=this[a+1]|this[a]<<8;return g&32768?g|4294901760:g},c.prototype.readInt32LE=function(a,u){return a=a>>>0,u||Y(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},c.prototype.readInt32BE=function(a,u){return a=a>>>0,u||Y(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},c.prototype.readFloatLE=function(a,u){return a=a>>>0,u||Y(a,4,this.length),r.read(this,a,!0,23,4)},c.prototype.readFloatBE=function(a,u){return a=a>>>0,u||Y(a,4,this.length),r.read(this,a,!1,23,4)},c.prototype.readDoubleLE=function(a,u){return a=a>>>0,u||Y(a,8,this.length),r.read(this,a,!0,52,8)},c.prototype.readDoubleBE=function(a,u){return a=a>>>0,u||Y(a,8,this.length),r.read(this,a,!1,52,8)};function ie(p,a,u,g,x,S){if(!c.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>x||a<S)throw new RangeError('"value" argument is out of bounds');if(u+g>p.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(a,u,g,x){if(a=+a,u=u>>>0,g=g>>>0,!x){var S=Math.pow(2,8*g)-1;ie(this,a,u,g,S,0)}var M=1,G=0;for(this[u]=a&255;++G<g&&(M*=256);)this[u+G]=a/M&255;return u+g},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(a,u,g,x){if(a=+a,u=u>>>0,g=g>>>0,!x){var S=Math.pow(2,8*g)-1;ie(this,a,u,g,S,0)}var M=g-1,G=1;for(this[u+M]=a&255;--M>=0&&(G*=256);)this[u+M]=a/G&255;return u+g},c.prototype.writeUint8=c.prototype.writeUInt8=function(a,u,g){return a=+a,u=u>>>0,g||ie(this,a,u,1,255,0),this[u]=a&255,u+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(a,u,g){return a=+a,u=u>>>0,g||ie(this,a,u,2,65535,0),this[u]=a&255,this[u+1]=a>>>8,u+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(a,u,g){return a=+a,u=u>>>0,g||ie(this,a,u,2,65535,0),this[u]=a>>>8,this[u+1]=a&255,u+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(a,u,g){return a=+a,u=u>>>0,g||ie(this,a,u,4,4294967295,0),this[u+3]=a>>>24,this[u+2]=a>>>16,this[u+1]=a>>>8,this[u]=a&255,u+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(a,u,g){return a=+a,u=u>>>0,g||ie(this,a,u,4,4294967295,0),this[u]=a>>>24,this[u+1]=a>>>16,this[u+2]=a>>>8,this[u+3]=a&255,u+4},c.prototype.writeIntLE=function(a,u,g,x){if(a=+a,u=u>>>0,!x){var S=Math.pow(2,8*g-1);ie(this,a,u,g,S-1,-S)}var M=0,G=1,ne=0;for(this[u]=a&255;++M<g&&(G*=256);)a<0&&ne===0&&this[u+M-1]!==0&&(ne=1),this[u+M]=(a/G>>0)-ne&255;return u+g},c.prototype.writeIntBE=function(a,u,g,x){if(a=+a,u=u>>>0,!x){var S=Math.pow(2,8*g-1);ie(this,a,u,g,S-1,-S)}var M=g-1,G=1,ne=0;for(this[u+M]=a&255;--M>=0&&(G*=256);)a<0&&ne===0&&this[u+M+1]!==0&&(ne=1),this[u+M]=(a/G>>0)-ne&255;return u+g},c.prototype.writeInt8=function(a,u,g){return a=+a,u=u>>>0,g||ie(this,a,u,1,127,-128),a<0&&(a=255+a+1),this[u]=a&255,u+1},c.prototype.writeInt16LE=function(a,u,g){return a=+a,u=u>>>0,g||ie(this,a,u,2,32767,-32768),this[u]=a&255,this[u+1]=a>>>8,u+2},c.prototype.writeInt16BE=function(a,u,g){return a=+a,u=u>>>0,g||ie(this,a,u,2,32767,-32768),this[u]=a>>>8,this[u+1]=a&255,u+2},c.prototype.writeInt32LE=function(a,u,g){return a=+a,u=u>>>0,g||ie(this,a,u,4,2147483647,-2147483648),this[u]=a&255,this[u+1]=a>>>8,this[u+2]=a>>>16,this[u+3]=a>>>24,u+4},c.prototype.writeInt32BE=function(a,u,g){return a=+a,u=u>>>0,g||ie(this,a,u,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[u]=a>>>24,this[u+1]=a>>>16,this[u+2]=a>>>8,this[u+3]=a&255,u+4};function oe(p,a,u,g,x,S){if(u+g>p.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function E(p,a,u,g,x){return a=+a,u=u>>>0,x||oe(p,a,u,4),r.write(p,a,u,g,23,4),u+4}c.prototype.writeFloatLE=function(a,u,g){return E(this,a,u,!0,g)},c.prototype.writeFloatBE=function(a,u,g){return E(this,a,u,!1,g)};function le(p,a,u,g,x){return a=+a,u=u>>>0,x||oe(p,a,u,8),r.write(p,a,u,g,52,8),u+8}c.prototype.writeDoubleLE=function(a,u,g){return le(this,a,u,!0,g)},c.prototype.writeDoubleBE=function(a,u,g){return le(this,a,u,!1,g)},c.prototype.copy=function(a,u,g,x){if(!c.isBuffer(a))throw new TypeError("argument should be a Buffer");if(g||(g=0),!x&&x!==0&&(x=this.length),u>=a.length&&(u=a.length),u||(u=0),x>0&&x<g&&(x=g),x===g||a.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("sourceEnd out of bounds");x>this.length&&(x=this.length),a.length-u<x-g&&(x=a.length-u+g);var S=x-g;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,g,x):Uint8Array.prototype.set.call(a,this.subarray(g,x),u),S},c.prototype.fill=function(a,u,g,x){if(typeof a=="string"){if(typeof u=="string"?(x=u,u=0,g=this.length):typeof g=="string"&&(x=g,g=this.length),x!==void 0&&typeof x!="string")throw new TypeError("encoding must be a string");if(typeof x=="string"&&!c.isEncoding(x))throw new TypeError("Unknown encoding: "+x);if(a.length===1){var S=a.charCodeAt(0);(x==="utf8"&&S<128||x==="latin1")&&(a=S)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(u<0||this.length<u||this.length<g)throw new RangeError("Out of range index");if(g<=u)return this;u=u>>>0,g=g===void 0?this.length:g>>>0,a||(a=0);var M;if(typeof a=="number")for(M=u;M<g;++M)this[M]=a;else{var G=c.isBuffer(a)?a:c.from(a,x),ne=G.length;if(ne===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(M=0;M<g-u;++M)this[M+u]=G[M%ne]}return this};var pe=/[^+/0-9A-Za-z-_]/g;function ve(p){if(p=p.split("=")[0],p=p.trim().replace(pe,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function ae(p,a){a=a||1/0;for(var u,g=p.length,x=null,S=[],M=0;M<g;++M){if(u=p.charCodeAt(M),u>55295&&u<57344){if(!x){if(u>56319){(a-=3)>-1&&S.push(239,191,189);continue}else if(M+1===g){(a-=3)>-1&&S.push(239,191,189);continue}x=u;continue}if(u<56320){(a-=3)>-1&&S.push(239,191,189),x=u;continue}u=(x-55296<<10|u-56320)+65536}else x&&(a-=3)>-1&&S.push(239,191,189);if(x=null,u<128){if((a-=1)<0)break;S.push(u)}else if(u<2048){if((a-=2)<0)break;S.push(u>>6|192,u&63|128)}else if(u<65536){if((a-=3)<0)break;S.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((a-=4)<0)break;S.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return S}function ue(p){for(var a=[],u=0;u<p.length;++u)a.push(p.charCodeAt(u)&255);return a}function w(p,a){for(var u,g,x,S=[],M=0;M<p.length&&!((a-=2)<0);++M)u=p.charCodeAt(M),g=u>>8,x=u%256,S.push(x),S.push(g);return S}function s(p){return t.toByteArray(ve(p))}function h(p,a,u,g){for(var x=0;x<g&&!(x+u>=a.length||x>=p.length);++x)a[x+u]=p[x];return x}function _(p,a){return p instanceof a||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===a.name}function T(p){return p!==p}var N=function(){for(var p="0123456789abcdef",a=new Array(256),u=0;u<16;++u)for(var g=u*16,x=0;x<16;++x)a[g+x]=p[u]+p[x];return a}()})(Pn);var Yc={exports:{}};(function(e){(function(t){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,o=Math.floor,l="[BigNumber Error] ",c=l+"Number primitive has more than 15 significant digits: ",m=1e14,b=14,B=9007199254740991,A=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],P=1e7,I=1e9;function O(j){var $,Q,he,W=E.prototype={constructor:E,toString:null,valueOf:null},ce=new E(1),ye=20,ge=4,Ae=-7,xe=21,J=-1e7,we=1e7,ee=!1,z=1,se=0,Y={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},ie="0123456789abcdefghijklmnopqrstuvwxyz",oe=!0;function E(w,s){var h,_,T,N,p,a,u,g,x=this;if(!(x instanceof E))return new E(w,s);if(s==null){if(w&&w._isBigNumber===!0){x.s=w.s,!w.c||w.e>we?x.c=x.e=null:w.e<J?x.c=[x.e=0]:(x.e=w.e,x.c=w.c.slice());return}if((a=typeof w=="number")&&w*0==0){if(x.s=1/w<0?(w=-w,-1):1,w===~~w){for(N=0,p=w;p>=10;p/=10,N++);N>we?x.c=x.e=null:(x.e=N,x.c=[w]);return}g=String(w)}else{if(!n.test(g=String(w)))return he(x,g,a);x.s=g.charCodeAt(0)==45?(g=g.slice(1),-1):1}(N=g.indexOf("."))>-1&&(g=g.replace(".","")),(p=g.search(/e/i))>0?(N<0&&(N=p),N+=+g.slice(p+1),g=g.substring(0,p)):N<0&&(N=g.length)}else{if(q(s,2,ie.length,"Base"),s==10&&oe)return x=new E(w),ae(x,ye+x.e+1,ge);if(g=String(w),a=typeof w=="number"){if(w*0!=0)return he(x,g,a,s);if(x.s=1/w<0?(g=g.slice(1),-1):1,E.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(c+w)}else x.s=g.charCodeAt(0)===45?(g=g.slice(1),-1):1;for(h=ie.slice(0,s),N=p=0,u=g.length;p<u;p++)if(h.indexOf(_=g.charAt(p))<0){if(_=="."){if(p>N){N=u;continue}}else if(!T&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){T=!0,p=-1,N=0;continue}return he(x,String(w),a,s)}a=!1,g=Q(g,s,10,x.s),(N=g.indexOf("."))>-1?g=g.replace(".",""):N=g.length}for(p=0;g.charCodeAt(p)===48;p++);for(u=g.length;g.charCodeAt(--u)===48;);if(g=g.slice(p,++u)){if(u-=p,a&&E.DEBUG&&u>15&&(w>B||w!==o(w)))throw Error(c+x.s*w);if((N=N-p-1)>we)x.c=x.e=null;else if(N<J)x.c=[x.e=0];else{if(x.e=N,x.c=[],p=(N+1)%b,N<0&&(p+=b),p<u){for(p&&x.c.push(+g.slice(0,p)),u-=b;p<u;)x.c.push(+g.slice(p,p+=b));p=b-(g=g.slice(p)).length}else p-=u;for(;p--;g+="0");x.c.push(+g)}}else x.c=[x.e=0]}E.clone=O,E.ROUND_UP=0,E.ROUND_DOWN=1,E.ROUND_CEIL=2,E.ROUND_FLOOR=3,E.ROUND_HALF_UP=4,E.ROUND_HALF_DOWN=5,E.ROUND_HALF_EVEN=6,E.ROUND_HALF_CEIL=7,E.ROUND_HALF_FLOOR=8,E.EUCLID=9,E.config=E.set=function(w){var s,h;if(w!=null)if(typeof w=="object"){if(w.hasOwnProperty(s="DECIMAL_PLACES")&&(h=w[s],q(h,0,I,s),ye=h),w.hasOwnProperty(s="ROUNDING_MODE")&&(h=w[s],q(h,0,8,s),ge=h),w.hasOwnProperty(s="EXPONENTIAL_AT")&&(h=w[s],h&&h.pop?(q(h[0],-I,0,s),q(h[1],0,I,s),Ae=h[0],xe=h[1]):(q(h,-I,I,s),Ae=-(xe=h<0?-h:h))),w.hasOwnProperty(s="RANGE"))if(h=w[s],h&&h.pop)q(h[0],-I,-1,s),q(h[1],1,I,s),J=h[0],we=h[1];else if(q(h,-I,I,s),h)J=-(we=h<0?-h:h);else throw Error(l+s+" cannot be zero: "+h);if(w.hasOwnProperty(s="CRYPTO"))if(h=w[s],h===!!h)if(h)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ee=h;else throw ee=!h,Error(l+"crypto unavailable");else ee=h;else throw Error(l+s+" not true or false: "+h);if(w.hasOwnProperty(s="MODULO_MODE")&&(h=w[s],q(h,0,9,s),z=h),w.hasOwnProperty(s="POW_PRECISION")&&(h=w[s],q(h,0,I,s),se=h),w.hasOwnProperty(s="FORMAT"))if(h=w[s],typeof h=="object")Y=h;else throw Error(l+s+" not an object: "+h);if(w.hasOwnProperty(s="ALPHABET"))if(h=w[s],typeof h=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(h))oe=h.slice(0,10)=="0123456789",ie=h;else throw Error(l+s+" invalid: "+h)}else throw Error(l+"Object expected: "+w);return{DECIMAL_PLACES:ye,ROUNDING_MODE:ge,EXPONENTIAL_AT:[Ae,xe],RANGE:[J,we],CRYPTO:ee,MODULO_MODE:z,POW_PRECISION:se,FORMAT:Y,ALPHABET:ie}},E.isBigNumber=function(w){if(!w||w._isBigNumber!==!0)return!1;if(!E.DEBUG)return!0;var s,h,_=w.c,T=w.e,N=w.s;e:if({}.toString.call(_)=="[object Array]"){if((N===1||N===-1)&&T>=-I&&T<=I&&T===o(T)){if(_[0]===0){if(T===0&&_.length===1)return!0;break e}if(s=(T+1)%b,s<1&&(s+=b),String(_[0]).length==s){for(s=0;s<_.length;s++)if(h=_[s],h<0||h>=m||h!==o(h))break e;if(h!==0)return!0}}}else if(_===null&&T===null&&(N===null||N===1||N===-1))return!0;throw Error(l+"Invalid BigNumber: "+w)},E.maximum=E.max=function(){return pe(arguments,-1)},E.minimum=E.min=function(){return pe(arguments,1)},E.random=function(){var w=9007199254740992,s=Math.random()*w&2097151?function(){return o(Math.random()*w)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(h){var _,T,N,p,a,u=0,g=[],x=new E(ce);if(h==null?h=ye:q(h,0,I),p=i(h/b),ee)if(crypto.getRandomValues){for(_=crypto.getRandomValues(new Uint32Array(p*=2));u<p;)a=_[u]*131072+(_[u+1]>>>11),a>=9e15?(T=crypto.getRandomValues(new Uint32Array(2)),_[u]=T[0],_[u+1]=T[1]):(g.push(a%1e14),u+=2);u=p/2}else if(crypto.randomBytes){for(_=crypto.randomBytes(p*=7);u<p;)a=(_[u]&31)*281474976710656+_[u+1]*1099511627776+_[u+2]*4294967296+_[u+3]*16777216+(_[u+4]<<16)+(_[u+5]<<8)+_[u+6],a>=9e15?crypto.randomBytes(7).copy(_,u):(g.push(a%1e14),u+=7);u=p/7}else throw ee=!1,Error(l+"crypto unavailable");if(!ee)for(;u<p;)a=s(),a<9e15&&(g[u++]=a%1e14);for(p=g[--u],h%=b,p&&h&&(a=A[b-h],g[u]=o(p/a)*a);g[u]===0;g.pop(),u--);if(u<0)g=[N=0];else{for(N=-1;g[0]===0;g.splice(0,1),N-=b);for(u=1,a=g[0];a>=10;a/=10,u++);u<b&&(N-=b-u)}return x.e=N,x.c=g,x}}(),E.sum=function(){for(var w=1,s=arguments,h=new E(s[0]);w<s.length;)h=h.plus(s[w++]);return h},Q=function(){var w="0123456789";function s(h,_,T,N){for(var p,a=[0],u,g=0,x=h.length;g<x;){for(u=a.length;u--;a[u]*=_);for(a[0]+=N.indexOf(h.charAt(g++)),p=0;p<a.length;p++)a[p]>T-1&&(a[p+1]==null&&(a[p+1]=0),a[p+1]+=a[p]/T|0,a[p]%=T)}return a.reverse()}return function(h,_,T,N,p){var a,u,g,x,S,M,G,ne,fe=h.indexOf("."),be=ye,y=ge;for(fe>=0&&(x=se,se=0,h=h.replace(".",""),ne=new E(_),M=ne.pow(h.length-fe),se=x,ne.c=s(K(D(M.c),M.e,"0"),10,T,w),ne.e=ne.c.length),G=s(h,_,T,p?(a=ie,w):(a=w,ie)),g=x=G.length;G[--x]==0;G.pop());if(!G[0])return a.charAt(0);if(fe<0?--g:(M.c=G,M.e=g,M.s=N,M=$(M,ne,be,y,T),G=M.c,S=M.r,g=M.e),u=g+be+1,fe=G[u],x=T/2,S=S||u<0||G[u+1]!=null,S=y<4?(fe!=null||S)&&(y==0||y==(M.s<0?3:2)):fe>x||fe==x&&(y==4||S||y==6&&G[u-1]&1||y==(M.s<0?8:7)),u<1||!G[0])h=S?K(a.charAt(1),-be,a.charAt(0)):a.charAt(0);else{if(G.length=u,S)for(--T;++G[--u]>T;)G[u]=0,u||(++g,G=[1].concat(G));for(x=G.length;!G[--x];);for(fe=0,h="";fe<=x;h+=a.charAt(G[fe++]));h=K(h,g,a.charAt(0))}return h}}(),$=function(){function w(_,T,N){var p,a,u,g,x=0,S=_.length,M=T%P,G=T/P|0;for(_=_.slice();S--;)u=_[S]%P,g=_[S]/P|0,p=G*u+g*M,a=M*u+p%P*P+x,x=(a/N|0)+(p/P|0)+G*g,_[S]=a%N;return x&&(_=[x].concat(_)),_}function s(_,T,N,p){var a,u;if(N!=p)u=N>p?1:-1;else for(a=u=0;a<N;a++)if(_[a]!=T[a]){u=_[a]>T[a]?1:-1;break}return u}function h(_,T,N,p){for(var a=0;N--;)_[N]-=a,a=_[N]<T[N]?1:0,_[N]=a*p+_[N]-T[N];for(;!_[0]&&_.length>1;_.splice(0,1));}return function(_,T,N,p,a){var u,g,x,S,M,G,ne,fe,be,y,f,d,v,C,L,V,_e,Ue=_.s==T.s?1:-1,Re=_.c,Ie=T.c;if(!Re||!Re[0]||!Ie||!Ie[0])return new E(!_.s||!T.s||(Re?Ie&&Re[0]==Ie[0]:!Ie)?NaN:Re&&Re[0]==0||!Ie?Ue*0:Ue/0);for(fe=new E(Ue),be=fe.c=[],g=_.e-T.e,Ue=N+g+1,a||(a=m,g=F(_.e/b)-F(T.e/b),Ue=Ue/b|0),x=0;Ie[x]==(Re[x]||0);x++);if(Ie[x]>(Re[x]||0)&&g--,Ue<0)be.push(1),S=!0;else{for(C=Re.length,V=Ie.length,x=0,Ue+=2,M=o(a/(Ie[0]+1)),M>1&&(Ie=w(Ie,M,a),Re=w(Re,M,a),V=Ie.length,C=Re.length),v=V,y=Re.slice(0,V),f=y.length;f<V;y[f++]=0);_e=Ie.slice(),_e=[0].concat(_e),L=Ie[0],Ie[1]>=a/2&&L++;do{if(M=0,u=s(Ie,y,V,f),u<0){if(d=y[0],V!=f&&(d=d*a+(y[1]||0)),M=o(d/L),M>1)for(M>=a&&(M=a-1),G=w(Ie,M,a),ne=G.length,f=y.length;s(G,y,ne,f)==1;)M--,h(G,V<ne?_e:Ie,ne,a),ne=G.length,u=1;else M==0&&(u=M=1),G=Ie.slice(),ne=G.length;if(ne<f&&(G=[0].concat(G)),h(y,G,f,a),f=y.length,u==-1)for(;s(Ie,y,V,f)<1;)M++,h(y,V<f?_e:Ie,f,a),f=y.length}else u===0&&(M++,y=[0]);be[x++]=M,y[0]?y[f++]=Re[v]||0:(y=[Re[v]],f=1)}while((v++<C||y[0]!=null)&&Ue--);S=y[0]!=null,be[0]||be.splice(0,1)}if(a==m){for(x=1,Ue=be[0];Ue>=10;Ue/=10,x++);ae(fe,N+(fe.e=x+g*b-1)+1,p,S)}else fe.e=g,fe.r=+S;return fe}}();function le(w,s,h,_){var T,N,p,a,u;if(h==null?h=ge:q(h,0,8),!w.c)return w.toString();if(T=w.c[0],p=w.e,s==null)u=D(w.c),u=_==1||_==2&&(p<=Ae||p>=xe)?X(u,p):K(u,p,"0");else if(w=ae(new E(w),s,h),N=w.e,u=D(w.c),a=u.length,_==1||_==2&&(s<=N||N<=Ae)){for(;a<s;u+="0",a++);u=X(u,N)}else if(s-=p,u=K(u,N,"0"),N+1>a){if(--s>0)for(u+=".";s--;u+="0");}else if(s+=N-a,s>0)for(N+1==a&&(u+=".");s--;u+="0");return w.s<0&&T?"-"+u:u}function pe(w,s){for(var h,_,T=1,N=new E(w[0]);T<w.length;T++)_=new E(w[T]),(!_.s||(h=H(N,_))===s||h===0&&N.s===s)&&(N=_);return N}function ve(w,s,h){for(var _=1,T=s.length;!s[--T];s.pop());for(T=s[0];T>=10;T/=10,_++);return(h=_+h*b-1)>we?w.c=w.e=null:h<J?w.c=[w.e=0]:(w.e=h,w.c=s),w}he=function(){var w=/^(-?)0([xbo])(?=\w[\w.]*$)/i,s=/^([^.]+)\.$/,h=/^\.([^.]+)$/,_=/^-?(Infinity|NaN)$/,T=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(N,p,a,u){var g,x=a?p:p.replace(T,"");if(_.test(x))N.s=isNaN(x)?null:x<0?-1:1;else{if(!a&&(x=x.replace(w,function(S,M,G){return g=(G=G.toLowerCase())=="x"?16:G=="b"?2:8,!u||u==g?M:S}),u&&(g=u,x=x.replace(s,"$1").replace(h,"0.$1")),p!=x))return new E(x,g);if(E.DEBUG)throw Error(l+"Not a"+(u?" base "+u:"")+" number: "+p);N.s=null}N.c=N.e=null}}();function ae(w,s,h,_){var T,N,p,a,u,g,x,S=w.c,M=A;if(S){e:{for(T=1,a=S[0];a>=10;a/=10,T++);if(N=s-T,N<0)N+=b,p=s,u=S[g=0],x=o(u/M[T-p-1]%10);else if(g=i((N+1)/b),g>=S.length)if(_){for(;S.length<=g;S.push(0));u=x=0,T=1,N%=b,p=N-b+1}else break e;else{for(u=a=S[g],T=1;a>=10;a/=10,T++);N%=b,p=N-b+T,x=p<0?0:o(u/M[T-p-1]%10)}if(_=_||s<0||S[g+1]!=null||(p<0?u:u%M[T-p-1]),_=h<4?(x||_)&&(h==0||h==(w.s<0?3:2)):x>5||x==5&&(h==4||_||h==6&&(N>0?p>0?u/M[T-p]:0:S[g-1])%10&1||h==(w.s<0?8:7)),s<1||!S[0])return S.length=0,_?(s-=w.e+1,S[0]=M[(b-s%b)%b],w.e=-s||0):S[0]=w.e=0,w;if(N==0?(S.length=g,a=1,g--):(S.length=g+1,a=M[b-N],S[g]=p>0?o(u/M[T-p]%M[p])*a:0),_)for(;;)if(g==0){for(N=1,p=S[0];p>=10;p/=10,N++);for(p=S[0]+=a,a=1;p>=10;p/=10,a++);N!=a&&(w.e++,S[0]==m&&(S[0]=1));break}else{if(S[g]+=a,S[g]!=m)break;S[g--]=0,a=1}for(N=S.length;S[--N]===0;S.pop());}w.e>we?w.c=w.e=null:w.e<J&&(w.c=[w.e=0])}return w}function ue(w){var s,h=w.e;return h===null?w.toString():(s=D(w.c),s=h<=Ae||h>=xe?X(s,h):K(s,h,"0"),w.s<0?"-"+s:s)}return W.absoluteValue=W.abs=function(){var w=new E(this);return w.s<0&&(w.s=1),w},W.comparedTo=function(w,s){return H(this,new E(w,s))},W.decimalPlaces=W.dp=function(w,s){var h,_,T,N=this;if(w!=null)return q(w,0,I),s==null?s=ge:q(s,0,8),ae(new E(N),w+N.e+1,s);if(!(h=N.c))return null;if(_=((T=h.length-1)-F(this.e/b))*b,T=h[T])for(;T%10==0;T/=10,_--);return _<0&&(_=0),_},W.dividedBy=W.div=function(w,s){return $(this,new E(w,s),ye,ge)},W.dividedToIntegerBy=W.idiv=function(w,s){return $(this,new E(w,s),0,1)},W.exponentiatedBy=W.pow=function(w,s){var h,_,T,N,p,a,u,g,x,S=this;if(w=new E(w),w.c&&!w.isInteger())throw Error(l+"Exponent not an integer: "+ue(w));if(s!=null&&(s=new E(s)),a=w.e>14,!S.c||!S.c[0]||S.c[0]==1&&!S.e&&S.c.length==1||!w.c||!w.c[0])return x=new E(Math.pow(+ue(S),a?w.s*(2-Z(w)):+ue(w))),s?x.mod(s):x;if(u=w.s<0,s){if(s.c?!s.c[0]:!s.s)return new E(NaN);_=!u&&S.isInteger()&&s.isInteger(),_&&(S=S.mod(s))}else{if(w.e>9&&(S.e>0||S.e<-1||(S.e==0?S.c[0]>1||a&&S.c[1]>=24e7:S.c[0]<8e13||a&&S.c[0]<=9999975e7)))return N=S.s<0&&Z(w)?-0:0,S.e>-1&&(N=1/N),new E(u?1/N:N);se&&(N=i(se/b+2))}for(a?(h=new E(.5),u&&(w.s=1),g=Z(w)):(T=Math.abs(+ue(w)),g=T%2),x=new E(ce);;){if(g){if(x=x.times(S),!x.c)break;N?x.c.length>N&&(x.c.length=N):_&&(x=x.mod(s))}if(T){if(T=o(T/2),T===0)break;g=T%2}else if(w=w.times(h),ae(w,w.e+1,1),w.e>14)g=Z(w);else{if(T=+ue(w),T===0)break;g=T%2}S=S.times(S),N?S.c&&S.c.length>N&&(S.c.length=N):_&&(S=S.mod(s))}return _?x:(u&&(x=ce.div(x)),s?x.mod(s):N?ae(x,se,ge,p):x)},W.integerValue=function(w){var s=new E(this);return w==null?w=ge:q(w,0,8),ae(s,s.e+1,w)},W.isEqualTo=W.eq=function(w,s){return H(this,new E(w,s))===0},W.isFinite=function(){return!!this.c},W.isGreaterThan=W.gt=function(w,s){return H(this,new E(w,s))>0},W.isGreaterThanOrEqualTo=W.gte=function(w,s){return(s=H(this,new E(w,s)))===1||s===0},W.isInteger=function(){return!!this.c&&F(this.e/b)>this.c.length-2},W.isLessThan=W.lt=function(w,s){return H(this,new E(w,s))<0},W.isLessThanOrEqualTo=W.lte=function(w,s){return(s=H(this,new E(w,s)))===-1||s===0},W.isNaN=function(){return!this.s},W.isNegative=function(){return this.s<0},W.isPositive=function(){return this.s>0},W.isZero=function(){return!!this.c&&this.c[0]==0},W.minus=function(w,s){var h,_,T,N,p=this,a=p.s;if(w=new E(w,s),s=w.s,!a||!s)return new E(NaN);if(a!=s)return w.s=-s,p.plus(w);var u=p.e/b,g=w.e/b,x=p.c,S=w.c;if(!u||!g){if(!x||!S)return x?(w.s=-s,w):new E(S?p:NaN);if(!x[0]||!S[0])return S[0]?(w.s=-s,w):new E(x[0]?p:ge==3?-0:0)}if(u=F(u),g=F(g),x=x.slice(),a=u-g){for((N=a<0)?(a=-a,T=x):(g=u,T=S),T.reverse(),s=a;s--;T.push(0));T.reverse()}else for(_=(N=(a=x.length)<(s=S.length))?a:s,a=s=0;s<_;s++)if(x[s]!=S[s]){N=x[s]<S[s];break}if(N&&(T=x,x=S,S=T,w.s=-w.s),s=(_=S.length)-(h=x.length),s>0)for(;s--;x[h++]=0);for(s=m-1;_>a;){if(x[--_]<S[_]){for(h=_;h&&!x[--h];x[h]=s);--x[h],x[_]+=m}x[_]-=S[_]}for(;x[0]==0;x.splice(0,1),--g);return x[0]?ve(w,x,g):(w.s=ge==3?-1:1,w.c=[w.e=0],w)},W.modulo=W.mod=function(w,s){var h,_,T=this;return w=new E(w,s),!T.c||!w.s||w.c&&!w.c[0]?new E(NaN):!w.c||T.c&&!T.c[0]?new E(T):(z==9?(_=w.s,w.s=1,h=$(T,w,0,3),w.s=_,h.s*=_):h=$(T,w,0,z),w=T.minus(h.times(w)),!w.c[0]&&z==1&&(w.s=T.s),w)},W.multipliedBy=W.times=function(w,s){var h,_,T,N,p,a,u,g,x,S,M,G,ne,fe,be,y=this,f=y.c,d=(w=new E(w,s)).c;if(!f||!d||!f[0]||!d[0])return!y.s||!w.s||f&&!f[0]&&!d||d&&!d[0]&&!f?w.c=w.e=w.s=null:(w.s*=y.s,!f||!d?w.c=w.e=null:(w.c=[0],w.e=0)),w;for(_=F(y.e/b)+F(w.e/b),w.s*=y.s,u=f.length,S=d.length,u<S&&(ne=f,f=d,d=ne,T=u,u=S,S=T),T=u+S,ne=[];T--;ne.push(0));for(fe=m,be=P,T=S;--T>=0;){for(h=0,M=d[T]%be,G=d[T]/be|0,p=u,N=T+p;N>T;)g=f[--p]%be,x=f[p]/be|0,a=G*g+x*M,g=M*g+a%be*be+ne[N]+h,h=(g/fe|0)+(a/be|0)+G*x,ne[N--]=g%fe;ne[N]=h}return h?++_:ne.splice(0,1),ve(w,ne,_)},W.negated=function(){var w=new E(this);return w.s=-w.s||null,w},W.plus=function(w,s){var h,_=this,T=_.s;if(w=new E(w,s),s=w.s,!T||!s)return new E(NaN);if(T!=s)return w.s=-s,_.minus(w);var N=_.e/b,p=w.e/b,a=_.c,u=w.c;if(!N||!p){if(!a||!u)return new E(T/0);if(!a[0]||!u[0])return u[0]?w:new E(a[0]?_:T*0)}if(N=F(N),p=F(p),a=a.slice(),T=N-p){for(T>0?(p=N,h=u):(T=-T,h=a),h.reverse();T--;h.push(0));h.reverse()}for(T=a.length,s=u.length,T-s<0&&(h=u,u=a,a=h,s=T),T=0;s;)T=(a[--s]=a[s]+u[s]+T)/m|0,a[s]=m===a[s]?0:a[s]%m;return T&&(a=[T].concat(a),++p),ve(w,a,p)},W.precision=W.sd=function(w,s){var h,_,T,N=this;if(w!=null&&w!==!!w)return q(w,1,I),s==null?s=ge:q(s,0,8),ae(new E(N),w,s);if(!(h=N.c))return null;if(T=h.length-1,_=T*b+1,T=h[T]){for(;T%10==0;T/=10,_--);for(T=h[0];T>=10;T/=10,_++);}return w&&N.e+1>_&&(_=N.e+1),_},W.shiftedBy=function(w){return q(w,-B,B),this.times("1e"+w)},W.squareRoot=W.sqrt=function(){var w,s,h,_,T,N=this,p=N.c,a=N.s,u=N.e,g=ye+4,x=new E("0.5");if(a!==1||!p||!p[0])return new E(!a||a<0&&(!p||p[0])?NaN:p?N:1/0);if(a=Math.sqrt(+ue(N)),a==0||a==1/0?(s=D(p),(s.length+u)%2==0&&(s+="0"),a=Math.sqrt(+s),u=F((u+1)/2)-(u<0||u%2),a==1/0?s="5e"+u:(s=a.toExponential(),s=s.slice(0,s.indexOf("e")+1)+u),h=new E(s)):h=new E(a+""),h.c[0]){for(u=h.e,a=u+g,a<3&&(a=0);;)if(T=h,h=x.times(T.plus($(N,T,g,1))),D(T.c).slice(0,a)===(s=D(h.c)).slice(0,a))if(h.e<u&&--a,s=s.slice(a-3,a+1),s=="9999"||!_&&s=="4999"){if(!_&&(ae(T,T.e+ye+2,0),T.times(T).eq(N))){h=T;break}g+=4,a+=4,_=1}else{(!+s||!+s.slice(1)&&s.charAt(0)=="5")&&(ae(h,h.e+ye+2,1),w=!h.times(h).eq(N));break}}return ae(h,h.e+ye+1,ge,w)},W.toExponential=function(w,s){return w!=null&&(q(w,0,I),w++),le(this,w,s,1)},W.toFixed=function(w,s){return w!=null&&(q(w,0,I),w=w+this.e+1),le(this,w,s)},W.toFormat=function(w,s,h){var _,T=this;if(h==null)w!=null&&s&&typeof s=="object"?(h=s,s=null):w&&typeof w=="object"?(h=w,w=s=null):h=Y;else if(typeof h!="object")throw Error(l+"Argument not an object: "+h);if(_=T.toFixed(w,s),T.c){var N,p=_.split("."),a=+h.groupSize,u=+h.secondaryGroupSize,g=h.groupSeparator||"",x=p[0],S=p[1],M=T.s<0,G=M?x.slice(1):x,ne=G.length;if(u&&(N=a,a=u,u=N,ne-=N),a>0&&ne>0){for(N=ne%a||a,x=G.substr(0,N);N<ne;N+=a)x+=g+G.substr(N,a);u>0&&(x+=g+G.slice(N)),M&&(x="-"+x)}_=S?x+(h.decimalSeparator||"")+((u=+h.fractionGroupSize)?S.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(h.fractionGroupSeparator||"")):S):x}return(h.prefix||"")+_+(h.suffix||"")},W.toFraction=function(w){var s,h,_,T,N,p,a,u,g,x,S,M,G=this,ne=G.c;if(w!=null&&(a=new E(w),!a.isInteger()&&(a.c||a.s!==1)||a.lt(ce)))throw Error(l+"Argument "+(a.isInteger()?"out of range: ":"not an integer: ")+ue(a));if(!ne)return new E(G);for(s=new E(ce),g=h=new E(ce),_=u=new E(ce),M=D(ne),N=s.e=M.length-G.e-1,s.c[0]=A[(p=N%b)<0?b+p:p],w=!w||a.comparedTo(s)>0?N>0?s:g:a,p=we,we=1/0,a=new E(M),u.c[0]=0;x=$(a,s,0,1),T=h.plus(x.times(_)),T.comparedTo(w)!=1;)h=_,_=T,g=u.plus(x.times(T=g)),u=T,s=a.minus(x.times(T=s)),a=T;return T=$(w.minus(h),_,0,1),u=u.plus(T.times(g)),h=h.plus(T.times(_)),u.s=g.s=G.s,N=N*2,S=$(g,_,N,ge).minus(G).abs().comparedTo($(u,h,N,ge).minus(G).abs())<1?[g,_]:[u,h],we=p,S},W.toNumber=function(){return+ue(this)},W.toPrecision=function(w,s){return w!=null&&q(w,1,I),le(this,w,s,2)},W.toString=function(w){var s,h=this,_=h.s,T=h.e;return T===null?_?(s="Infinity",_<0&&(s="-"+s)):s="NaN":(w==null?s=T<=Ae||T>=xe?X(D(h.c),T):K(D(h.c),T,"0"):w===10&&oe?(h=ae(new E(h),ye+T+1,ge),s=K(D(h.c),h.e,"0")):(q(w,2,ie.length,"Base"),s=Q(K(D(h.c),T,"0"),10,w,_,!0)),_<0&&h.c[0]&&(s="-"+s)),s},W.valueOf=W.toJSON=function(){return ue(this)},W._isBigNumber=!0,j!=null&&E.set(j),E}function F(j){var $=j|0;return j>0||j===$?$:$-1}function D(j){for(var $,Q,he=1,W=j.length,ce=j[0]+"";he<W;){for($=j[he++]+"",Q=b-$.length;Q--;$="0"+$);ce+=$}for(W=ce.length;ce.charCodeAt(--W)===48;);return ce.slice(0,W+1||1)}function H(j,$){var Q,he,W=j.c,ce=$.c,ye=j.s,ge=$.s,Ae=j.e,xe=$.e;if(!ye||!ge)return null;if(Q=W&&!W[0],he=ce&&!ce[0],Q||he)return Q?he?0:-ge:ye;if(ye!=ge)return ye;if(Q=ye<0,he=Ae==xe,!W||!ce)return he?0:!W^Q?1:-1;if(!he)return Ae>xe^Q?1:-1;for(ge=(Ae=W.length)<(xe=ce.length)?Ae:xe,ye=0;ye<ge;ye++)if(W[ye]!=ce[ye])return W[ye]>ce[ye]^Q?1:-1;return Ae==xe?0:Ae>xe^Q?1:-1}function q(j,$,Q,he){if(j<$||j>Q||j!==o(j))throw Error(l+(he||"Argument")+(typeof j=="number"?j<$||j>Q?" out of range: ":" not an integer: ":" not a primitive number: ")+String(j))}function Z(j){var $=j.c.length-1;return F(j.e/b)==$&&j.c[$]%2!=0}function X(j,$){return(j.length>1?j.charAt(0)+"."+j.slice(1):j)+($<0?"e":"e+")+$}function K(j,$,Q){var he,W;if($<0){for(W=Q+".";++$;W+=Q);j=W+j}else if(he=j.length,++$>he){for(W=Q,$-=he;--$;W+=Q);j+=W}else $<he&&(j=j.slice(0,$)+"."+j.slice($));return j}r=O(),r.default=r.BigNumber=r,e.exports?e.exports=r:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=r)})(Qr)})(Yc);var Wi=Yc.exports,hl=function(t,r,n){var i=new t.Uint8Array(n),o=r.pushInt,l=r.pushInt32,c=r.pushInt32Neg,m=r.pushInt64,b=r.pushInt64Neg,B=r.pushFloat,A=r.pushFloatSingle,P=r.pushFloatDouble,I=r.pushTrue,O=r.pushFalse,F=r.pushUndefined,D=r.pushNull,H=r.pushInfinity,q=r.pushInfinityNeg,Z=r.pushNaN,X=r.pushNaNNeg,K=r.pushArrayStart,j=r.pushArrayStartFixed,$=r.pushArrayStartFixed32,Q=r.pushArrayStartFixed64,he=r.pushObjectStart,W=r.pushObjectStartFixed,ce=r.pushObjectStartFixed32,ye=r.pushObjectStartFixed64,ge=r.pushByteString,Ae=r.pushByteStringStart,xe=r.pushUtf8String,J=r.pushUtf8StringStart,we=r.pushSimpleUnassigned,ee=r.pushTagStart,z=r.pushTagStart4,se=r.pushTagStart8,Y=r.pushTagUnassigned,ie=r.pushBreak,oe=t.Math.pow,E=0,le=0,pe=0;function ve(U){for(U=U|0,E=0,le=U;(E|0)<(le|0)&&(pe=Ve[i[E]&255](i[E]|0)|0,!((pe|0)>0)););return pe|0}function ae(U){return U=U|0,((E|0)+(U|0)|0)<(le|0)?0:1}function ue(U){return U=U|0,i[U|0]<<8|i[U+1|0]|0}function w(U){return U=U|0,i[U|0]<<24|i[U+1|0]<<16|i[U+2|0]<<8|i[U+3|0]|0}function s(U){return U=U|0,o(U|0),E=E+1|0,0}function h(U){return U=U|0,ae(1)|0?1:(o(i[E+1|0]|0),E=E+2|0,0)}function _(U){return U=U|0,ae(2)|0?1:(o(ue(E+1|0)|0),E=E+3|0,0)}function T(U){return U=U|0,ae(4)|0?1:(l(ue(E+1|0)|0,ue(E+3|0)|0),E=E+5|0,0)}function N(U){return U=U|0,ae(8)|0?1:(m(ue(E+1|0)|0,ue(E+3|0)|0,ue(E+5|0)|0,ue(E+7|0)|0),E=E+9|0,0)}function p(U){return U=U|0,o(-1-(U-32|0)|0),E=E+1|0,0}function a(U){return U=U|0,ae(1)|0?1:(o(-1-(i[E+1|0]|0)|0),E=E+2|0,0)}function u(U){U=U|0;var Be=0;return ae(2)|0?1:(Be=ue(E+1|0)|0,o(-1-(Be|0)|0),E=E+3|0,0)}function g(U){return U=U|0,ae(4)|0?1:(c(ue(E+1|0)|0,ue(E+3|0)|0),E=E+5|0,0)}function x(U){return U=U|0,ae(8)|0?1:(b(ue(E+1|0)|0,ue(E+3|0)|0,ue(E+5|0)|0,ue(E+7|0)|0),E=E+9|0,0)}function S(U){U=U|0;var Be=0,Ne=0,Oe=0;return Oe=U-64|0,ae(Oe|0)|0?1:(Be=E+1|0,Ne=(E+1|0)+(Oe|0)|0,ge(Be|0,Ne|0),E=Ne|0,0)}function M(U){U=U|0;var Be=0,Ne=0,Oe=0;return ae(1)|0||(Oe=i[E+1|0]|0,Be=E+2|0,Ne=(E+2|0)+(Oe|0)|0,ae(Oe+1|0)|0)?1:(ge(Be|0,Ne|0),E=Ne|0,0)}function G(U){U=U|0;var Be=0,Ne=0,Oe=0;return ae(2)|0||(Oe=ue(E+1|0)|0,Be=E+3|0,Ne=(E+3|0)+(Oe|0)|0,ae(Oe+2|0)|0)?1:(ge(Be|0,Ne|0),E=Ne|0,0)}function ne(U){U=U|0;var Be=0,Ne=0,Oe=0;return ae(4)|0||(Oe=w(E+1|0)|0,Be=E+5|0,Ne=(E+5|0)+(Oe|0)|0,ae(Oe+4|0)|0)?1:(ge(Be|0,Ne|0),E=Ne|0,0)}function fe(U){return U=U|0,1}function be(U){return U=U|0,Ae(),E=E+1|0,0}function y(U){U=U|0;var Be=0,Ne=0,Oe=0;return Oe=U-96|0,ae(Oe|0)|0?1:(Be=E+1|0,Ne=(E+1|0)+(Oe|0)|0,xe(Be|0,Ne|0),E=Ne|0,0)}function f(U){U=U|0;var Be=0,Ne=0,Oe=0;return ae(1)|0||(Oe=i[E+1|0]|0,Be=E+2|0,Ne=(E+2|0)+(Oe|0)|0,ae(Oe+1|0)|0)?1:(xe(Be|0,Ne|0),E=Ne|0,0)}function d(U){U=U|0;var Be=0,Ne=0,Oe=0;return ae(2)|0||(Oe=ue(E+1|0)|0,Be=E+3|0,Ne=(E+3|0)+(Oe|0)|0,ae(Oe+2|0)|0)?1:(xe(Be|0,Ne|0),E=Ne|0,0)}function v(U){U=U|0;var Be=0,Ne=0,Oe=0;return ae(4)|0||(Oe=w(E+1|0)|0,Be=E+5|0,Ne=(E+5|0)+(Oe|0)|0,ae(Oe+4|0)|0)?1:(xe(Be|0,Ne|0),E=Ne|0,0)}function C(U){return U=U|0,1}function L(U){return U=U|0,J(),E=E+1|0,0}function V(U){return U=U|0,j(U-128|0),E=E+1|0,0}function _e(U){return U=U|0,ae(1)|0?1:(j(i[E+1|0]|0),E=E+2|0,0)}function Ue(U){return U=U|0,ae(2)|0?1:(j(ue(E+1|0)|0),E=E+3|0,0)}function Re(U){return U=U|0,ae(4)|0?1:($(ue(E+1|0)|0,ue(E+3|0)|0),E=E+5|0,0)}function Ie(U){return U=U|0,ae(8)|0?1:(Q(ue(E+1|0)|0,ue(E+3|0)|0,ue(E+5|0)|0,ue(E+7|0)|0),E=E+9|0,0)}function ke(U){return U=U|0,K(),E=E+1|0,0}function Me(U){U=U|0;var Be=0;return Be=U-160|0,ae(Be|0)|0?1:(W(Be|0),E=E+1|0,0)}function as(U){return U=U|0,ae(1)|0?1:(W(i[E+1|0]|0),E=E+2|0,0)}function os(U){return U=U|0,ae(2)|0?1:(W(ue(E+1|0)|0),E=E+3|0,0)}function Xe(U){return U=U|0,ae(4)|0?1:(ce(ue(E+1|0)|0,ue(E+3|0)|0),E=E+5|0,0)}function cr(U){return U=U|0,ae(8)|0?1:(ye(ue(E+1|0)|0,ue(E+3|0)|0,ue(E+5|0)|0,ue(E+7|0)|0),E=E+9|0,0)}function cs(U){return U=U|0,he(),E=E+1|0,0}function Jt(U){return U=U|0,ee(U-192|0|0),E=E+1|0,0}function Mn(U){return U=U|0,ee(U|0),E=E+1|0,0}function us(U){return U=U|0,ee(U|0),E=E+1|0,0}function fs(U){return U=U|0,ee(U|0),E=E+1|0,0}function La(U){return U=U|0,ee(U|0),E=E+1|0,0}function We(U){return U=U|0,ee(U-192|0|0),E=E+1|0,0}function ls(U){return U=U|0,ee(U|0),E=E+1|0,0}function Da(U){return U=U|0,ee(U|0),E=E+1|0,0}function Nt(U){return U=U|0,ee(U|0),E=E+1|0,0}function Lr(U){return U=U|0,ae(1)|0?1:(ee(i[E+1|0]|0),E=E+2|0,0)}function $n(U){return U=U|0,ae(2)|0?1:(ee(ue(E+1|0)|0),E=E+3|0,0)}function Vn(U){return U=U|0,ae(4)|0?1:(z(ue(E+1|0)|0,ue(E+3|0)|0),E=E+5|0,0)}function Ln(U){return U=U|0,ae(8)|0?1:(se(ue(E+1|0)|0,ue(E+3|0)|0,ue(E+5|0)|0,ue(E+7|0)|0),E=E+9|0,0)}function qe(U){return U=U|0,we((U|0)-224|0),E=E+1|0,0}function Rt(U){return U=U|0,O(),E=E+1|0,0}function Dn(U){return U=U|0,I(),E=E+1|0,0}function qn(U){return U=U|0,D(),E=E+1|0,0}function Gn(U){return U=U|0,F(),E=E+1|0,0}function Hn(U){return U=U|0,ae(1)|0?1:(we(i[E+1|0]|0),E=E+2|0,0)}function ds(U){U=U|0;var Be=0,Ne=0,Oe=1,Dt=0,Ye=0,hs=0;return ae(2)|0?1:(Be=i[E+1|0]|0,Ne=i[E+2|0]|0,(Be|0)&128&&(Oe=-1),Dt=+(((Be|0)&124)>>2),Ye=+(((Be|0)&3)<<8|Ne),+Dt==0?B(+(+Oe*5960464477539063e-23*+Ye)):+Dt==31?+Oe==1?+Ye>0?Z():H():+Ye>0?X():q():B(+(+Oe*oe(2,+(+Dt-25))*+(1024+Ye))),E=E+3|0,0)}function Te(U){return U=U|0,ae(4)|0?1:(A(i[E+1|0]|0,i[E+2|0]|0,i[E+3|0]|0,i[E+4|0]|0),E=E+5|0,0)}function k(U){return U=U|0,ae(8)|0?1:(P(i[E+1|0]|0,i[E+2|0]|0,i[E+3|0]|0,i[E+4|0]|0,i[E+5|0]|0,i[E+6|0]|0,i[E+7|0]|0,i[E+8|0]|0),E=E+9|0,0)}function re(U){return U=U|0,1}function Ee(U){return U=U|0,ie(),E=E+1|0,0}var Ve=[s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,h,_,T,N,re,re,re,re,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,a,u,g,x,re,re,re,re,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,M,G,ne,fe,re,re,re,be,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,f,d,v,C,re,re,re,L,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,_e,Ue,Re,Ie,re,re,re,ke,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,as,os,Xe,cr,re,re,re,cs,Jt,Jt,Jt,Jt,Jt,Jt,We,We,We,We,We,We,We,We,We,We,We,We,We,We,We,We,We,We,Lr,$n,Vn,Ln,re,re,re,re,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,Rt,Dn,qn,Gn,Hn,ds,Te,k,re,re,re,Ee];return{parse:ve}},Yi={},ht={};const ba=Wi.BigNumber;ht.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7};ht.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36};ht.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31};ht.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23};ht.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")};ht.SHIFT32=Math.pow(2,32);ht.SHIFT16=Math.pow(2,16);ht.MAX_SAFE_HIGH=2097151;ht.NEG_ONE=new ba(-1);ht.TEN=new ba(10);ht.TWO=new ba(2);ht.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5};(function(e){const{Buffer:t}=Pn,r=Wi.BigNumber,n=ht,i=n.SHIFT32,o=n.SHIFT16,l=2097151;e.parseHalf=function(b){var B,A,P;return P=b[0]&128?-1:1,B=(b[0]&124)>>2,A=(b[0]&3)<<8|b[1],B?B===31?P*(A?NaN:1/0):P*Math.pow(2,B-25)*(1024+A):P*5960464477539063e-23*A};function c(m){return m<16?"0"+m.toString(16):m.toString(16)}e.arrayBufferToBignumber=function(m){const b=m.byteLength;let B="";for(let A=0;A<b;A++)B+=c(m[A]);return new r(B,16)},e.buildMap=m=>{const b=new Map,B=Object.keys(m),A=B.length;for(let P=0;P<A;P++)b.set(B[P],m[B[P]]);return b},e.buildInt32=(m,b)=>m*o+b,e.buildInt64=(m,b,B,A)=>{const P=e.buildInt32(m,b),I=e.buildInt32(B,A);return P>l?new r(P).times(i).plus(I):P*i+I},e.writeHalf=function(b,B){const A=t.allocUnsafe(4);A.writeFloatBE(B,0);const P=A.readUInt32BE(0);if(P&8191)return!1;var I=P>>16&32768;const O=P>>23&255,F=P&8388607;if(O>=113&&O<=142)I+=(O-112<<10)+(F>>13);else if(O>=103&&O<113){if(F&(1<<126-O)-1)return!1;I+=F+8388608>>126-O}else return!1;return b.writeUInt16BE(I,0),!0},e.keySorter=function(m,b){var B=m[0].byteLength,A=b[0].byteLength;return B>A?1:A>B?-1:m[0].compare(b[0])},e.isNegativeZero=m=>m===0&&1/m<0,e.nextPowerOf2=m=>{let b=0;if(m&&!(m&m-1))return m;for(;m!==0;)m>>=1,b+=1;return 1<<b}})(Yi);const _a=ht,pl=_a.MT,jn=_a.SIMPLE,ws=_a.SYMS;let yl=class Hs{constructor(t){if(typeof t!="number")throw new Error("Invalid Simple type: "+typeof t);if(t<0||t>255||(t|0)!==t)throw new Error("value must be a small positive integer: "+t);this.value=t}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(t){return t._pushInt(this.value,pl.SIMPLE_FLOAT)}static isSimple(t){return t instanceof Hs}static decode(t,r){switch(r==null&&(r=!0),t){case jn.FALSE:return!1;case jn.TRUE:return!0;case jn.NULL:return r?null:ws.NULL;case jn.UNDEFINED:return r?void 0:ws.UNDEFINED;case-1:if(!r)throw new Error("Invalid BREAK");return ws.BREAK;default:return new Hs(t)}}};var Zc=yl;let gl=class js{constructor(t,r,n){if(this.tag=t,this.value=r,this.err=n,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(t){return t._pushTag(this.tag),t.pushAny(this.value)}convert(t){var r,n;if(n=t?.[this.tag],typeof n!="function"&&(n=js["_tag"+this.tag],typeof n!="function"))return this;try{return n.call(js,this.value)}catch(i){return r=i,this.err=r,this}}};var Xc=gl;const Jc=self.location?self.location.protocol+"//"+self.location.host:"",zs=self.URL;let ml=class{constructor(t="",r=Jc){this.super=new zs(t,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(t){this.super.hash=t}set host(t){this.super.host=t}set hostname(t){this.super.hostname=t}set href(t){this.super.href=t}set origin(t){this.super.origin=t}set password(t){this.super.password=t}set pathname(t){this.super.pathname=t}set port(t){this.super.port=t}set protocol(t){this.super.protocol=t}set search(t){this.super.search=t}set searchParams(t){this.super.searchParams=t}set username(t){this.super.username=t}createObjectURL(t){return this.super.createObjectURL(t)}revokeObjectURL(t){this.super.revokeObjectURL(t)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function wl(e){if(typeof e=="string")return new zs(e).toString();if(!(e instanceof zs)){const t=e.username&&e.password?`${e.username}:${e.password}@`:"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",i=e.protocol?e.protocol+"//":"",o=e.host||"",l=e.hostname||"",c=e.search||(e.query?"?"+e.query:""),m=e.hash||"",b=e.pathname||"",B=e.path||b+c;return`${i}${t||r}${o||l+n}${B}${m}`}}var Qc={URLWithLegacySupport:ml,URLSearchParams:self.URLSearchParams,defaultBase:Jc,format:wl};const{URLWithLegacySupport:Ka,format:bl}=Qc;var _l=(e,t={},r={},n)=>{let i=t.protocol?t.protocol.replace(":",""):"http";i=(r[i]||n||i)+":";let o;try{o=new Ka(e)}catch{o={}}const l=Object.assign({},t,{protocol:i||o.protocol,host:t.host||o.host});return new Ka(e,bl(l)).toString()};const{URLWithLegacySupport:El,format:xl,URLSearchParams:Tl,defaultBase:vl}=Qc,Al=_l;var eu={URL:El,URLSearchParams:Tl,format:xl,relative:Al,defaultBase:vl};const{Buffer:qr}=Pn,Wa=Un,Bl=Wi.BigNumber,Il=hl,pt=Yi,Le=ht,Sl=Zc,Nl=Xc,{URL:Rl}=eu;let Ks=class Ws{constructor(t){t=t||{},!t.size||t.size<65536?t.size=65536:t.size=pt.nextPowerOf2(t.size),this._heap=new ArrayBuffer(t.size),this._heap8=new Uint8Array(this._heap),this._buffer=qr.from(this._heap),this._reset(),this._knownTags=Object.assign({0:r=>new Date(r),1:r=>new Date(r*1e3),2:r=>pt.arrayBufferToBignumber(r),3:r=>Le.NEG_ONE.minus(pt.arrayBufferToBignumber(r)),4:r=>Le.TEN.pow(r[0]).times(r[1]),5:r=>Le.TWO.pow(r[0]).times(r[1]),32:r=>new Rl(r),35:r=>new RegExp(r)},t.tags),this.parser=Il(Qr,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var t=this._parents.pop();if(t.length>0)throw new Error(`Missing ${t.length} elements`);switch(t.type){case Le.PARENT.TAG:this._push(this.createTag(t.ref[0],t.ref[1]));break;case Le.PARENT.BYTE_STRING:this._push(this.createByteString(t.ref,t.length));break;case Le.PARENT.UTF8_STRING:this._push(this.createUtf8String(t.ref,t.length));break;case Le.PARENT.MAP:if(t.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(t.ref,t.length));break;case Le.PARENT.OBJECT:if(t.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(t.ref,t.length));break;case Le.PARENT.ARRAY:this._push(this.createArray(t.ref,t.length));break}this._currentParent&&this._currentParent.type===Le.PARENT.TAG&&this._dec()}_dec(){const t=this._currentParent;t.length<0||(t.length--,t.length===0&&this._closeParent())}_push(t,r){const n=this._currentParent;switch(n.values++,n.type){case Le.PARENT.ARRAY:case Le.PARENT.BYTE_STRING:case Le.PARENT.UTF8_STRING:n.length>-1?this._ref[this._ref.length-n.length]=t:this._ref.push(t),this._dec();break;case Le.PARENT.OBJECT:n.tmpKey!=null?(this._ref[n.tmpKey]=t,n.tmpKey=null,this._dec()):(n.tmpKey=t,typeof n.tmpKey!="string"&&(n.type=Le.PARENT.MAP,n.ref=pt.buildMap(n.ref)));break;case Le.PARENT.MAP:n.tmpKey!=null?(this._ref.set(n.tmpKey,t),n.tmpKey=null,this._dec()):n.tmpKey=t;break;case Le.PARENT.TAG:this._ref.push(t),r||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(t,r,n){this._parents[this._depth]={type:r,length:n,ref:t,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:Le.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(t,r){const n=this._knownTags[t];return n?n(r):new Nl(t,r)}createMap(t,r){return t}createObject(t,r){return t}createArray(t,r){return t}createByteString(t,r){return qr.concat(t)}createByteStringFromHeap(t,r){return t===r?qr.alloc(0):qr.from(this._heap.slice(t,r))}createInt(t){return t}createInt32(t,r){return pt.buildInt32(t,r)}createInt64(t,r,n,i){return pt.buildInt64(t,r,n,i)}createFloat(t){return t}createFloatSingle(t,r,n,i){return Wa.read([t,r,n,i],0,!1,23,4)}createFloatDouble(t,r,n,i,o,l,c,m){return Wa.read([t,r,n,i,o,l,c,m],0,!1,52,8)}createInt32Neg(t,r){return-1-pt.buildInt32(t,r)}createInt64Neg(t,r,n,i){const o=pt.buildInt32(t,r),l=pt.buildInt32(n,i);return o>Le.MAX_SAFE_HIGH?Le.NEG_ONE.minus(new Bl(o).times(Le.SHIFT32).plus(l)):-1-(o*Le.SHIFT32+l)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(t,r){return t.join("")}createUtf8StringFromHeap(t,r){return t===r?"":this._buffer.toString("utf8",t,r)}createSimpleUnassigned(t){return new Sl(t)}pushInt(t){this._push(this.createInt(t))}pushInt32(t,r){this._push(this.createInt32(t,r))}pushInt64(t,r,n,i){this._push(this.createInt64(t,r,n,i))}pushFloat(t){this._push(this.createFloat(t))}pushFloatSingle(t,r,n,i){this._push(this.createFloatSingle(t,r,n,i))}pushFloatDouble(t,r,n,i,o,l,c,m){this._push(this.createFloatDouble(t,r,n,i,o,l,c,m))}pushInt32Neg(t,r){this._push(this.createInt32Neg(t,r))}pushInt64Neg(t,r,n,i){this._push(this.createInt64Neg(t,r,n,i))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],Le.PARENT.ARRAY,-1)}pushArrayStartFixed(t){this._createArrayStartFixed(t)}pushArrayStartFixed32(t,r){const n=pt.buildInt32(t,r);this._createArrayStartFixed(n)}pushArrayStartFixed64(t,r,n,i){const o=pt.buildInt64(t,r,n,i);this._createArrayStartFixed(o)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(t){this._createObjectStartFixed(t)}pushObjectStartFixed32(t,r){const n=pt.buildInt32(t,r);this._createObjectStartFixed(n)}pushObjectStartFixed64(t,r,n,i){const o=pt.buildInt64(t,r,n,i);this._createObjectStartFixed(o)}pushByteStringStart(){this._parents[this._depth]={type:Le.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(t,r){this._push(this.createByteStringFromHeap(t,r))}pushUtf8StringStart(){this._parents[this._depth]={type:Le.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(t,r){this._push(this.createUtf8StringFromHeap(t,r))}pushSimpleUnassigned(t){this._push(this.createSimpleUnassigned(t))}pushTagStart(t){this._parents[this._depth]={type:Le.PARENT.TAG,length:1,ref:[t]}}pushTagStart4(t,r){this.pushTagStart(pt.buildInt32(t,r))}pushTagStart8(t,r,n,i){this.pushTagStart(pt.buildInt64(t,r,n,i))}pushTagUnassigned(t){this._push(this.createTag(t))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(t){if(t===0){this._push(this.createObject({}));return}this._createParent({},Le.PARENT.OBJECT,t)}_createArrayStartFixed(t){if(t===0){this._push(this.createArray([]));return}this._createParent(new Array(t),Le.PARENT.ARRAY,t)}_decode(t){if(t.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(t);const r=this.parser.parse(t.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(r>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(t){return this._decode(t),this._res[0]}decodeAll(t){return this._decode(t),this._res}static decode(t,r){return typeof t=="string"&&(t=qr.from(t,r||"hex")),new Ws({size:t.length}).decodeFirst(t)}static decodeAll(t,r){return typeof t=="string"&&(t=qr.from(t,r||"hex")),new Ws({size:t.length}).decodeAll(t)}};Ks.decodeFirst=Ks.decode;var tu=Ks;const{Buffer:bs}=Pn,Ol=tu,Ul=Yi;class Ea extends Ol{createTag(t,r){return`${t}(${r})`}createInt(t){return super.createInt(t).toString()}createInt32(t,r){return super.createInt32(t,r).toString()}createInt64(t,r,n,i){return super.createInt64(t,r,n,i).toString()}createInt32Neg(t,r){return super.createInt32Neg(t,r).toString()}createInt64Neg(t,r,n,i){return super.createInt64Neg(t,r,n,i).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(t){const r=super.createFloat(t);return Ul.isNegativeZero(t)?"-0_1":`${r}_1`}createFloatSingle(t,r,n,i){return`${super.createFloatSingle(t,r,n,i)}_2`}createFloatDouble(t,r,n,i,o,l,c,m){return`${super.createFloatDouble(t,r,n,i,o,l,c,m)}_3`}createByteString(t,r){const n=t.join(", ");return r===-1?`(_ ${n})`:`h'${n}`}createByteStringFromHeap(t,r){return`h'${bs.from(super.createByteStringFromHeap(t,r)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(t){return`simple(${t})`}createArray(t,r){const n=super.createArray(t,r);return r===-1?`[_ ${n.join(", ")}]`:`[${n.join(", ")}]`}createMap(t,r){const n=super.createMap(t),i=Array.from(n.keys()).reduce(Ya(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createObject(t,r){const n=super.createObject(t),i=Object.keys(n).reduce(Ya(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createUtf8String(t,r){const n=t.join(", ");return r===-1?`(_ ${n})`:`"${n}"`}createUtf8StringFromHeap(t,r){return`"${bs.from(super.createUtf8StringFromHeap(t,r)).toString("utf8")}"`}static diagnose(t,r){return typeof t=="string"&&(t=bs.from(t,r||"hex")),new Ea().decodeFirst(t)}}var Fl=Ea;function Ya(e){return(t,r)=>t?`${t}, ${r}: ${e[r]}`:`${r}: ${e[r]}`}const{Buffer:Kt}=Pn,{URL:Pl}=eu,Ys=Wi.BigNumber,_s=Yi,rt=ht,Ot=rt.MT,zn=rt.NUMBYTES,Za=rt.SHIFT32,Xa=rt.SYMS,Gr=rt.TAG,Cl=rt.MT.SIMPLE_FLOAT<<5|rt.NUMBYTES.TWO,kl=rt.MT.SIMPLE_FLOAT<<5|rt.NUMBYTES.FOUR,Ml=rt.MT.SIMPLE_FLOAT<<5|rt.NUMBYTES.EIGHT,$l=rt.MT.SIMPLE_FLOAT<<5|rt.SIMPLE.TRUE,Vl=rt.MT.SIMPLE_FLOAT<<5|rt.SIMPLE.FALSE,Ll=rt.MT.SIMPLE_FLOAT<<5|rt.SIMPLE.UNDEFINED,Ja=rt.MT.SIMPLE_FLOAT<<5|rt.SIMPLE.NULL,Dl=new Ys("0x20000000000000"),ql=Kt.from("f97e00","hex"),Gl=Kt.from("f9fc00","hex"),Hl=Kt.from("f97c00","hex");function jl(e){return{}.toString.call(e).slice(8,-1)}class Oi{constructor(t){t=t||{},this.streaming=typeof t.stream=="function",this.onData=t.stream,this.semanticTypes=[[Pl,this._pushUrl],[Ys,this._pushBigNumber]];const r=t.genTypes||[],n=r.length;for(let i=0;i<n;i++)this.addSemanticType(r[i][0],r[i][1]);this._reset()}addSemanticType(t,r){const n=this.semanticTypes.length;for(let i=0;i<n;i++)if(this.semanticTypes[i][0]===t){const l=this.semanticTypes[i][1];return this.semanticTypes[i][1]=r,l}return this.semanticTypes.push([t,r]),null}push(t){return t&&(this.result[this.offset]=t,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=t.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(t,r,n){return this.result[this.offset]=t,this.resultMethod[this.offset]=r,this.resultLength[this.offset]=n,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(t){return this.pushWrite(t,1,1)}_pushUInt16BE(t){return this.pushWrite(t,2,2)}_pushUInt32BE(t){return this.pushWrite(t,3,4)}_pushDoubleBE(t){return this.pushWrite(t,4,8)}_pushNaN(){return this.push(ql)}_pushInfinity(t){const r=t<0?Gl:Hl;return this.push(r)}_pushFloat(t){const r=Kt.allocUnsafe(2);if(_s.writeHalf(r,t)&&_s.parseHalf(r)===t)return this._pushUInt8(Cl)&&this.push(r);const n=Kt.allocUnsafe(4);return n.writeFloatBE(t,0),n.readFloatBE(0)===t?this._pushUInt8(kl)&&this.push(n):this._pushUInt8(Ml)&&this._pushDoubleBE(t)}_pushInt(t,r,n){const i=r<<5;return t<24?this._pushUInt8(i|t):t<=255?this._pushUInt8(i|zn.ONE)&&this._pushUInt8(t):t<=65535?this._pushUInt8(i|zn.TWO)&&this._pushUInt16BE(t):t<=4294967295?this._pushUInt8(i|zn.FOUR)&&this._pushUInt32BE(t):t<=Number.MAX_SAFE_INTEGER?this._pushUInt8(i|zn.EIGHT)&&this._pushUInt32BE(Math.floor(t/Za))&&this._pushUInt32BE(t%Za):r===Ot.NEG_INT?this._pushFloat(n):this._pushFloat(t)}_pushIntNum(t){return t<0?this._pushInt(-t-1,Ot.NEG_INT,t):this._pushInt(t,Ot.POS_INT)}_pushNumber(t){switch(!1){case t===t:return this._pushNaN(t);case isFinite(t):return this._pushInfinity(t);case t%1!==0:return this._pushIntNum(t);default:return this._pushFloat(t)}}_pushString(t){const r=Kt.byteLength(t,"utf8");return this._pushInt(r,Ot.UTF8_STRING)&&this.pushWrite(t,5,r)}_pushBoolean(t){return this._pushUInt8(t?$l:Vl)}_pushUndefined(t){return this._pushUInt8(Ll)}_pushArray(t,r){const n=r.length;if(!t._pushInt(n,Ot.ARRAY))return!1;for(let i=0;i<n;i++)if(!t.pushAny(r[i]))return!1;return!0}_pushTag(t){return this._pushInt(t,Ot.TAG)}_pushDate(t,r){return t._pushTag(Gr.DATE_EPOCH)&&t.pushAny(Math.round(r/1e3))}_pushBuffer(t,r){return t._pushInt(r.length,Ot.BYTE_STRING)&&t.push(r)}_pushNoFilter(t,r){return t._pushBuffer(t,r.slice())}_pushRegexp(t,r){return t._pushTag(Gr.REGEXP)&&t.pushAny(r.source)}_pushSet(t,r){if(!t._pushInt(r.size,Ot.ARRAY))return!1;for(const n of r)if(!t.pushAny(n))return!1;return!0}_pushUrl(t,r){return t._pushTag(Gr.URI)&&t.pushAny(r.format())}_pushBigint(t){let r=Gr.POS_BIGINT;t.isNegative()&&(t=t.negated().minus(1),r=Gr.NEG_BIGINT);let n=t.toString(16);n.length%2&&(n="0"+n);const i=Kt.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,i)}_pushBigNumber(t,r){if(r.isNaN())return t._pushNaN();if(!r.isFinite())return t._pushInfinity(r.isNegative()?-1/0:1/0);if(r.isInteger())return t._pushBigint(r);if(!(t._pushTag(Gr.DECIMAL_FRAC)&&t._pushInt(2,Ot.ARRAY)))return!1;const n=r.decimalPlaces(),i=r.multipliedBy(new Ys(10).pow(n));return t._pushIntNum(-n)?i.abs().isLessThan(Dl)?t._pushIntNum(i.toNumber()):t._pushBigint(i):!1}_pushMap(t,r){return t._pushInt(r.size,Ot.MAP)?this._pushRawMap(r.size,Array.from(r)):!1}_pushObject(t){if(!t)return this._pushUInt8(Ja);for(var r=this.semanticTypes.length,n=0;n<r;n++)if(t instanceof this.semanticTypes[n][0])return this.semanticTypes[n][1].call(t,this,t);var i=t.encodeCBOR;if(typeof i=="function")return i.call(t,this);var o=Object.keys(t),l=o.length;return this._pushInt(l,Ot.MAP)?this._pushRawMap(l,o.map(c=>[c,t[c]])):!1}_pushRawMap(t,r){r=r.map(function(i){return i[0]=Oi.encode(i[0]),i}).sort(_s.keySorter);for(var n=0;n<t;n++)if(!this.push(r[n][0])||!this.pushAny(r[n][1]))return!1;return!0}write(t){return this.pushAny(t)}pushAny(t){var r=jl(t);switch(r){case"Number":return this._pushNumber(t);case"String":return this._pushString(t);case"Boolean":return this._pushBoolean(t);case"Object":return this._pushObject(t);case"Array":return this._pushArray(this,t);case"Uint8Array":return this._pushBuffer(this,Kt.isBuffer(t)?t:Kt.from(t));case"Null":return this._pushUInt8(Ja);case"Undefined":return this._pushUndefined(t);case"Map":return this._pushMap(this,t);case"Set":return this._pushSet(this,t);case"URL":return this._pushUrl(this,t);case"BigNumber":return this._pushBigNumber(this,t);case"Date":return this._pushDate(this,t);case"RegExp":return this._pushRegexp(this,t);case"Symbol":switch(t){case Xa.NULL:return this._pushObject(null);case Xa.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+t.toString())}default:throw new Error("Unknown type: "+typeof t+", "+(t?t.toString():""))}}finalize(){if(this.offset===0)return null;for(var t=this.result,r=this.resultLength,n=this.resultMethod,i=this.offset,o=0,l=0;l<i;l++)o+=r[l];var c=Kt.allocUnsafe(o),m=0,b=0;for(l=0;l<i;l++){switch(b=r[l],n[l]){case 0:t[l].copy(c,m);break;case 1:c.writeUInt8(t[l],m,!0);break;case 2:c.writeUInt16BE(t[l],m,!0);break;case 3:c.writeUInt32BE(t[l],m,!0);break;case 4:c.writeDoubleBE(t[l],m,!0);break;case 5:c.write(t[l],m,b,"utf8");break;default:throw new Error("unkown method")}m+=b}var B=c;return this._reset(),B}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(t){const r=new Oi;if(!r.pushAny(t))throw new Error("Failed to encode input");return r.finalize()}}var zl=Oi;(function(e){e.Diagnose=Fl,e.Decoder=tu,e.Encoder=zl,e.Simple=Zc,e.Tagged=Xc,e.decodeAll=e.Decoder.decodeAll,e.decodeFirst=e.Decoder.decodeFirst,e.diagnose=e.Diagnose.diagnose,e.encode=e.Encoder.encode,e.decode=e.Decoder.decode,e.leveldb={decode:e.Decoder.decodeAll,encode:e.Encoder.encode,buffer:!0,name:"cbor"}})(Wc);const ru=Ef(Wc);function Vt(...e){const t=new Uint8Array(e.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of e)t.set(new Uint8Array(n),r),r+=n.byteLength;return t.buffer}function ut(e){return[...new Uint8Array(e)].map(t=>t.toString(16).padStart(2,"0")).join("")}const Kl=new RegExp(/^[0-9a-fA-F]+$/);function sr(e){if(!Kl.test(e))throw new Error("Invalid hexadecimal string.");const t=[...e].reduce((r,n,i)=>(r[i/2|0]=(r[i/2|0]||"")+n,r),[]).map(r=>Number.parseInt(r,16));return new Uint8Array(t).buffer}function nu(e,t){if(e.byteLength!==t.byteLength)return e.byteLength-t.byteLength;const r=new Uint8Array(e),n=new Uint8Array(t);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return r[i]-n[i];return 0}function Zi(e,t){return nu(e,t)===0}function xn(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).buffer}function xa(e){return e instanceof Uint8Array?xn(e):e instanceof ArrayBuffer?e:Array.isArray(e)?xn(new Uint8Array(e)):"buffer"in e?xa(e.buffer):xn(new Uint8Array(e))}function $t(e){return xn(ya.create().update(new Uint8Array(e)).digest())}function oi(e){if(e instanceof ru.Tagged)return oi(e.value);if(typeof e=="string")return iu(e);if(typeof e=="number")return $t(Ke(e));if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return $t(e);if(Array.isArray(e)){const t=e.map(oi);return $t(Vt(...t))}else{if(e&&typeof e=="object"&&e._isPrincipal)return $t(e.toUint8Array());if(typeof e=="object"&&e!==null&&typeof e.toHash=="function")return oi(e.toHash());if(typeof e=="object")return Ui(e);if(typeof e=="bigint")return $t(Ke(e))}throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${e}`),{value:e})}const iu=e=>{const t=new TextEncoder().encode(e);return $t(t)};function In(e){return Ui(e)}function Ui(e){const n=Object.entries(e).filter(([,l])=>l!==void 0).map(([l,c])=>{const m=iu(l),b=oi(c);return[m,b]}).sort(([l],[c])=>nu(l,c)),i=Vt(...n.map(l=>Vt(...l)));return $t(i)}var Wl=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const Yl=new TextEncoder().encode(`
ic-request`);class Ta{getPrincipal(){return this._principal||(this._principal=Pe.selfAuthenticating(new Uint8Array(this.getPublicKey().toDer()))),this._principal}async transformRequest(t){const{body:r}=t,n=Wl(t,["body"]),i=await In(r);return Object.assign(Object.assign({},n),{body:{content:r,sender_pubkey:this.getPublicKey().toDer(),sender_sig:await this.sign(Vt(Yl,i))}})}}class Fi{getPrincipal(){return Pe.anonymous()}async transformRequest(t){return Object.assign(Object.assign({},t),{body:{content:t.body}})}}var Et={},an={},De={};Object.defineProperty(De,"__esModule",{value:!0});const Zl=9007199254740992;function or(e,...t){const r=new Uint8Array(e.byteLength+t.reduce((i,o)=>i+o.byteLength,0));r.set(new Uint8Array(e),0);let n=e.byteLength;for(const i of t)r.set(new Uint8Array(i),n),n+=i.byteLength;return r.buffer}function Lt(e,t,r){r=r.replace(/[^0-9a-fA-F]/g,"");const n=2**(t-24);r=r.slice(-n*2).padStart(n*2,"0");const i=[(e<<5)+t].concat(r.match(/../g).map(o=>parseInt(o,16)));return new Uint8Array(i).buffer}function Xi(e,t){if(t<24)return new Uint8Array([(e<<5)+t]).buffer;{const r=t<=255?24:t<=65535?25:t<=4294967295?26:27;return Lt(e,r,t.toString(16))}}function su(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);n<128?t.push(n):n<2048?t.push(192|n>>6,128|n&63):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|n&63):(r++,n=(n&1023)<<10|e.charCodeAt(r)&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63))}return or(new Uint8Array(Xi(3,e.length)),new Uint8Array(t))}function Xl(e,t){if(e==14277111)return or(new Uint8Array([217,217,247]),t);if(e<24)return or(new Uint8Array([192+e]),t);{const r=e<=255?24:e<=65535?25:e<=4294967295?26:27,n=2**(r-24),i=e.toString(16).slice(-n*2).padStart(n*2,"0"),o=[192+r].concat(i.match(/../g).map(l=>parseInt(l,16)));return new Uint8Array(o).buffer}}De.tagged=Xl;function Cn(e){return new Uint8Array(e).buffer}De.raw=Cn;function va(e){if(isNaN(e))throw new RangeError("Invalid number.");e=Math.min(Math.max(0,e),23);const t=[0+e];return new Uint8Array(t).buffer}De.uSmall=va;function au(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,e),255),e=e.toString(16),Lt(0,24,e)}De.u8=au;function ou(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,e),65535),e=e.toString(16),Lt(0,25,e)}De.u16=ou;function cu(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,e),4294967295),e=e.toString(16),Lt(0,26,e)}De.u32=cu;function Aa(e,t){if(typeof e=="string"&&t==16){if(e.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return Lt(0,27,e)}if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,e),Zl),e=e.toString(16),Lt(0,27,e)}De.u64=Aa;function uu(e){if(isNaN(e))throw new RangeError("Invalid number.");if(e===0)return va(0);e=Math.min(Math.max(0,-e),24)-1;const t=[32+e];return new Uint8Array(t).buffer}De.iSmall=uu;function fu(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,-e-1),255),e=e.toString(16),Lt(1,24,e)}De.i8=fu;function lu(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,-e-1),65535),e=e.toString(16),Lt(1,25,e)}De.i16=lu;function du(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,-e-1),4294967295),e=e.toString(16),Lt(1,26,e)}De.i32=du;function hu(e,t){if(typeof e=="string"&&t==16){if(e.startsWith("-")?e=e.slice(1):e="0",e.match(/[^0-9a-fA-F]/)||e.length>16)throw new RangeError("Invalid number.");let r=!1,n=e.split("").reduceRight((i,o)=>{if(r)return o+i;let l=parseInt(o,16)-1;return l>=0?(r=!0,l.toString(16)+i):"f"+i},"");return r?Lt(1,27,n):Aa(0)}if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,-e-1),9007199254740992),e=e.toString(16),Lt(1,27,e)}De.i64=hu;function Jl(e){return e>=0?e<24?va(e):e<=255?au(e):e<=65535?ou(e):e<=4294967295?cu(e):Aa(e):e>=-24?uu(e):e>=-255?fu(e):e>=-65535?lu(e):e>=-4294967295?du(e):hu(e)}De.number=Jl;function Ql(e){return or(Xi(2,e.byteLength),e)}De.bytes=Ql;function e0(e){return su(e)}De.string=e0;function t0(e){return or(Xi(4,e.length),...e)}De.array=t0;function r0(e,t=!1){e instanceof Map||(e=new Map(Object.entries(e)));let r=Array.from(e.entries());return t&&(r=r.sort(([n],[i])=>n.localeCompare(i))),or(Xi(5,e.size),...r.map(([n,i])=>or(su(n),i)))}De.map=r0;function n0(e){const t=new Float32Array([e]);return or(new Uint8Array([250]),new Uint8Array(t.buffer))}De.singleFloat=n0;function i0(e){const t=new Float64Array([e]);return or(new Uint8Array([251]),new Uint8Array(t.buffer))}De.doubleFloat=i0;function s0(e){return e?pu():yu()}De.bool=s0;function pu(){return Cn(new Uint8Array([245]))}De.true_=pu;function yu(){return Cn(new Uint8Array([244]))}De.false_=yu;function a0(){return Cn(new Uint8Array([246]))}De.null_=a0;function o0(){return Cn(new Uint8Array([247]))}De.undefined_=o0;var c0=Qr&&Qr.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(an,"__esModule",{value:!0});const Ft=c0(De),u0=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class gu{constructor(t,r=!1){this._serializer=t,this._stable=r,this.name="jsonDefault",this.priority=-100}match(t){return["undefined","boolean","number","string","object"].indexOf(typeof t)!=-1}encode(t){switch(typeof t){case"undefined":return Ft.undefined_();case"boolean":return Ft.bool(t);case"number":return Math.floor(t)===t?Ft.number(t):Ft.doubleFloat(t);case"string":return Ft.string(t);case"object":if(t===null)return Ft.null_();if(Array.isArray(t))return Ft.array(t.map(r=>this._serializer.serializeValue(r)));if(u0.find(r=>t instanceof r))return Ft.bytes(t.buffer);if(Object.getOwnPropertyNames(t).indexOf("toJSON")!==-1)return this.encode(t.toJSON());if(t instanceof Map){const r=new Map;for(const[n,i]of t.entries())r.set(n,this._serializer.serializeValue(i));return Ft.map(r,this._stable)}else{const r=new Map;for(const[n,i]of Object.entries(t))r.set(n,this._serializer.serializeValue(i));return Ft.map(r,this._stable)}default:throw new Error("Invalid value.")}}}an.JsonDefaultCborEncoder=gu;class mu{constructor(){this.name="cborEncoder",this.priority=-90}match(t){return typeof t=="object"&&typeof t.toCBOR=="function"}encode(t){return t.toCBOR()}}an.ToCborEncoder=mu;class wu{constructor(){this._encoders=new Set}static withDefaultEncoders(t=!1){const r=new this;return r.addEncoder(new gu(r,t)),r.addEncoder(new mu),r}removeEncoder(t){for(const r of this._encoders.values())r.name==t&&this._encoders.delete(r)}addEncoder(t){this._encoders.add(t)}getEncoderFor(t){let r=null;for(const n of this._encoders)(!r||n.priority>r.priority)&&n.match(t)&&(r=n);if(r===null)throw new Error("Could not find an encoder for value.");return r}serializeValue(t){return this.getEncoderFor(t).encode(t)}serialize(t){return this.serializeValue(t)}}an.CborSerializer=wu;class f0 extends wu{serialize(t){return Ft.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(t))]))}}an.SelfDescribeCborSerializer=f0;(function(e){function t(i){for(var o in i)e.hasOwnProperty(o)||(e[o]=i[o])}var r=Qr&&Qr.__importStar||function(i){if(i&&i.__esModule)return i;var o={};if(i!=null)for(var l in i)Object.hasOwnProperty.call(i,l)&&(o[l]=i[l]);return o.default=i,o};Object.defineProperty(e,"__esModule",{value:!0}),t(an);const n=r(De);e.value=n})(Et);class l0{get name(){return"Principal"}get priority(){return 0}match(t){return t&&t._isPrincipal===!0}encode(t){return Et.value.bytes(t.toUint8Array())}}class d0{get name(){return"Buffer"}get priority(){return 1}match(t){return t instanceof ArrayBuffer||ArrayBuffer.isView(t)}encode(t){return Et.value.bytes(new Uint8Array(t))}}class h0{get name(){return"BigInt"}get priority(){return 1}match(t){return typeof t=="bigint"}encode(t){return t>BigInt(0)?Et.value.tagged(2,Et.value.bytes(sr(t.toString(16)))):Et.value.tagged(3,Et.value.bytes(sr((BigInt("-1")*t).toString(16))))}}const Ji=Et.SelfDescribeCborSerializer.withDefaultEncoders(!0);Ji.addEncoder(new l0);Ji.addEncoder(new d0);Ji.addEncoder(new h0);var Zs;(function(e){e[e.Uint64LittleEndian=71]="Uint64LittleEndian",e[e.Semantic=55799]="Semantic"})(Zs||(Zs={}));function Es(e){return Ji.serialize(e)}function Qa(e){const t=e.byteLength;let r=BigInt(0);for(let n=0;n<t;n++)r=r*BigInt(256)+BigInt(e[n]);return r}class p0 extends ru.Decoder{createByteString(t){return Vt(...t)}createByteStringFromHeap(t,r){return t===r?new ArrayBuffer(0):new Uint8Array(this._heap.slice(t,r))}}function rr(e){const t=new Uint8Array(e),r=new p0({size:t.byteLength,tags:{2:n=>Qa(n),3:n=>-Qa(n),[Zs.Semantic]:n=>n}});try{return r.decodeFirst(t)}catch(n){throw new Error(`Failed to decode CBOR: ${n}, input: ${ut(t)}`)}}const Kn=()=>{if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){const e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]}if(typeof crypto<"u"&&crypto.getRandomValues){const e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}return typeof crypto<"u"&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(Math.random()*4294967295)};var Xs;(function(e){e.Call="call"})(Xs||(Xs={}));function Js(){const e=new ArrayBuffer(16),t=new DataView(e),r=Kn(),n=Kn(),i=Kn(),o=Kn();return t.setUint32(0,r),t.setUint32(4,n),t.setUint32(8,i),t.setUint32(12,o),e}const y0=BigInt(1e6),g0=60*1e3;class Wn{constructor(t){const o=BigInt(Math.floor(Date.now()+t-g0))*y0/BigInt(1e9)/BigInt(60)*BigInt(60)*BigInt(1e9);this._value=o}toCBOR(){return Et.value.u64(this._value.toString(16),16)}toHash(){return Ke(this._value)}}function eo(e=Js){return async t=>{const r=t.request.headers;t.request.headers=r,t.endpoint==="call"&&(t.body.nonce=e())}}function yn(e){const t=[];return e.forEach((r,n)=>{t.push([n,r])}),t}class xs extends dt{constructor(t,r){super(t),this.response=r,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const m0=BigInt(0),Ba=BigInt(1),w0=BigInt(2);function Qi(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Ar(e){if(!Qi(e))throw new Error("Uint8Array expected")}const b0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Vr(e){Ar(e);let t="";for(let r=0;r<e.length;r++)t+=b0[e[r]];return t}function bu(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}const Qt={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function to(e){if(e>=Qt._0&&e<=Qt._9)return e-Qt._0;if(e>=Qt._A&&e<=Qt._F)return e-(Qt._A-10);if(e>=Qt._a&&e<=Qt._f)return e-(Qt._a-10)}function _u(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){const l=to(e.charCodeAt(o)),c=to(e.charCodeAt(o+1));if(l===void 0||c===void 0){const m=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+m+'" at index '+o)}n[i]=l*16+c}return n}function Mt(e){return bu(Vr(e))}function Tn(e){return Ar(e),bu(Vr(Uint8Array.from(e).reverse()))}function ct(e,t){return _u(e.toString(16).padStart(t*2,"0"))}function Pi(e,t){return ct(e,t).reverse()}function _t(e,t,r){let n;if(typeof t=="string")try{n=_u(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(Qi(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function Qe(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];Ar(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const o=e[n];r.set(o,i),i+=o.length}return r}function Ia(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function vn(e){let t;for(t=0;e>m0;e>>=Ba,t+=1);return t}function Qs(e,t){return e>>BigInt(t)&Ba}const es=e=>(w0<<BigInt(e-1))-Ba,_0={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Qi(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function kn(e,t,r={}){const n=(i,o,l)=>{const c=_0[o];if(typeof c!="function")throw new Error(`Invalid validator "${o}", expected function`);const m=e[i];if(!(l&&m===void 0)&&!c(m,e))throw new Error(`Invalid param ${String(i)}=${m} (${typeof m}), expected ${o}`)};for(const[i,o]of Object.entries(t))n(i,o,!1);for(const[i,o]of Object.entries(r))n(i,o,!0);return e}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const at=BigInt(0),Ge=BigInt(1),Or=BigInt(2),E0=BigInt(3),ea=BigInt(4),ro=BigInt(5),no=BigInt(8);BigInt(9);BigInt(16);function ze(e,t){const r=e%t;return r>=at?r:t+r}function x0(e,t,r){if(r<=at||t<at)throw new Error("Expected power/modulo > 0");if(r===Ge)return at;let n=Ge;for(;t>at;)t&Ge&&(n=n*e%r),e=e*e%r,t>>=Ge;return n}function Gt(e,t,r){let n=e;for(;t-- >at;)n*=n,n%=r;return n}function io(e,t){if(e===at||t<=at)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=ze(e,t),n=t,i=at,o=Ge;for(;r!==at;){const c=n/r,m=n%r,b=i-o*c;n=r,r=m,i=o,o=b}if(n!==Ge)throw new Error("invert: does not exist");return ze(i,t)}function T0(e){const t=(e-Ge)/Or;let r,n,i;for(r=e-Ge,n=0;r%Or===at;r/=Or,n++);for(i=Or;i<e&&x0(i,t,e)!==e-Ge;i++);if(n===1){const l=(e+Ge)/ea;return function(m,b){const B=m.pow(b,l);if(!m.eql(m.sqr(B),b))throw new Error("Cannot find square root");return B}}const o=(r+Ge)/Or;return function(c,m){if(c.pow(m,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let b=n,B=c.pow(c.mul(c.ONE,i),r),A=c.pow(m,o),P=c.pow(m,r);for(;!c.eql(P,c.ONE);){if(c.eql(P,c.ZERO))return c.ZERO;let I=1;for(let F=c.sqr(P);I<b&&!c.eql(F,c.ONE);I++)F=c.sqr(F);const O=c.pow(B,Ge<<BigInt(b-I-1));B=c.sqr(O),A=c.mul(A,O),P=c.mul(P,B),b=I}return A}}function v0(e){if(e%ea===E0){const t=(e+Ge)/ea;return function(n,i){const o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%no===ro){const t=(e-ro)/no;return function(n,i){const o=n.mul(i,Or),l=n.pow(o,t),c=n.mul(i,l),m=n.mul(n.mul(c,Or),l),b=n.mul(c,n.sub(m,n.ONE));if(!n.eql(n.sqr(b),i))throw new Error("Cannot find square root");return b}}return T0(e)}const A0=(e,t)=>(ze(e,t)&Ge)===Ge,B0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Eu(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=B0.reduce((n,i)=>(n[i]="function",n),t);return kn(e,r)}function ts(e,t,r){if(r<at)throw new Error("Expected power > 0");if(r===at)return e.ONE;if(r===Ge)return t;let n=e.ONE,i=t;for(;r>at;)r&Ge&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Ge;return n}function rs(e,t){const r=new Array(t.length),n=t.reduce((o,l,c)=>e.is0(l)?o:(r[c]=o,e.mul(o,l)),e.ONE),i=e.inv(n);return t.reduceRight((o,l,c)=>e.is0(l)?o:(r[c]=e.mul(o,r[c]),e.mul(o,l)),i),r}function xu(e,t){const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Sa(e,t,r=!1,n={}){if(e<=at)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=xu(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const l=v0(e),c=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:es(i),ZERO:at,ONE:Ge,create:m=>ze(m,e),isValid:m=>{if(typeof m!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof m}`);return at<=m&&m<e},is0:m=>m===at,isOdd:m=>(m&Ge)===Ge,neg:m=>ze(-m,e),eql:(m,b)=>m===b,sqr:m=>ze(m*m,e),add:(m,b)=>ze(m+b,e),sub:(m,b)=>ze(m-b,e),mul:(m,b)=>ze(m*b,e),pow:(m,b)=>ts(c,m,b),div:(m,b)=>ze(m*io(b,e),e),sqrN:m=>m*m,addN:(m,b)=>m+b,subN:(m,b)=>m-b,mulN:(m,b)=>m*b,inv:m=>io(m,e),sqrt:n.sqrt||(m=>l(c,m)),invertBatch:m=>rs(c,m),cmov:(m,b,B)=>B?b:m,toBytes:m=>r?Pi(m,o):ct(m,o),fromBytes:m=>{if(m.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${m.length}`);return r?Tn(m):Mt(m)}});return Object.freeze(c)}function I0(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r}function Tu(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function vu(e){const t=Tu(e);return t+Math.ceil(t/2)}function S0(e,t,r=!1){const n=e.length,i=Tu(t),o=vu(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);const l=r?Mt(e):Tn(e),c=ze(l,t-Ge)+Ge;return r?Pi(c,i):ct(c,i)}const N0=Mt;function mr(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=e&255,e>>>=8;return new Uint8Array(r)}function R0(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function Na(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function O0(e,t,r,n){Ar(e),Ar(t),Na(r),t.length>255&&(t=n(Qe(Ia("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:o}=n,l=Math.ceil(r/i);if(l>255)throw new Error("Invalid xmd length");const c=Qe(t,mr(t.length,1)),m=mr(0,o),b=mr(r,2),B=new Array(l),A=n(Qe(m,e,b,mr(0,1),c));B[0]=n(Qe(A,mr(1,1),c));for(let I=1;I<=l;I++){const O=[R0(A,B[I-1]),mr(I+1,1),c];B[I]=n(Qe(...O))}return Qe(...B).slice(0,r)}function U0(e,t,r,n,i){if(Ar(e),Ar(t),Na(r),t.length>255){const o=Math.ceil(2*n/8);t=i.create({dkLen:o}).update(Ia("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(mr(r,2)).update(t).update(mr(t.length,1)).digest()}function so(e,t,r){kn(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:o,hash:l,expand:c,DST:m}=r;Ar(e),Na(t);const b=typeof m=="string"?Ia(m):m,B=n.toString(2).length,A=Math.ceil((B+i)/8),P=t*o*A;let I;if(c==="xmd")I=O0(e,b,P,l);else if(c==="xof")I=U0(e,b,P,i,l);else if(c==="_internal_pass")I=e;else throw new Error('expand must be "xmd" or "xof"');const O=new Array(t);for(let F=0;F<t;F++){const D=new Array(o);for(let H=0;H<o;H++){const q=A*(H+F*o),Z=I.subarray(q,q+A);D[H]=ze(N0(Z),n)}O[F]=D}return O}function Au(e,t){const r=t.map(n=>Array.from(n).reverse());return(n,i)=>{const[o,l,c,m]=r.map(b=>b.reduce((B,A)=>e.add(e.mul(B,n),A)));return n=e.div(o,l),i=e.mul(i,e.div(c,m)),{x:n,y:i}}}function ao(e,t,r){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const o=so(n,2,{...r,DST:r.DST,...i}),l=e.fromAffine(t(o[0])),c=e.fromAffine(t(o[1])),m=l.add(c).clearCofactor();return m.assertValidity(),m},encodeToCurve(n,i){const o=so(n,1,{...r,DST:r.encodeDST,...i}),l=e.fromAffine(t(o[0])).clearCofactor();return l.assertValidity(),l}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const F0=BigInt(0),Ts=BigInt(1);function Bu(e,t){const r=(i,o)=>{const l=o.negate();return i?l:o},n=i=>{const o=Math.ceil(t/i)+1,l=2**(i-1);return{windows:o,windowSize:l}};return{constTimeNegate:r,unsafeLadder(i,o){let l=e.ZERO,c=i;for(;o>F0;)o&Ts&&(l=l.add(c)),c=c.double(),o>>=Ts;return l},precomputeWindow(i,o){const{windows:l,windowSize:c}=n(o),m=[];let b=i,B=b;for(let A=0;A<l;A++){B=b,m.push(B);for(let P=1;P<c;P++)B=B.add(b),m.push(B);b=B.double()}return m},wNAF(i,o,l){const{windows:c,windowSize:m}=n(i);let b=e.ZERO,B=e.BASE;const A=BigInt(2**i-1),P=2**i,I=BigInt(i);for(let O=0;O<c;O++){const F=O*m;let D=Number(l&A);l>>=I,D>m&&(D-=P,l+=Ts);const H=F,q=F+Math.abs(D)-1,Z=O%2!==0,X=D<0;D===0?B=B.add(r(Z,o[H])):b=b.add(r(X,o[q]))}return{p:b,f:B}},wNAFCached(i,o,l,c){const m=i._WINDOW_SIZE||1;let b=o.get(i);return b||(b=this.precomputeWindow(i,m),m!==1&&o.set(i,c(b))),this.wNAF(m,b,l)}}}function Iu(e){return Eu(e.Fp),kn(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...xu(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function P0(e){const t=Iu(e);kn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const Ur=BigInt(0),it=BigInt(1),lr=BigInt(2),Ci=BigInt(3),oo=BigInt(4);function co(e){const t=P0(e),{Fp:r}=t,n=t.toBytes||((O,F,D)=>{const H=F.toAffine();return Qe(Uint8Array.from([4]),r.toBytes(H.x),r.toBytes(H.y))}),i=t.fromBytes||(O=>{const F=O.subarray(1),D=r.fromBytes(F.subarray(0,r.BYTES)),H=r.fromBytes(F.subarray(r.BYTES,2*r.BYTES));return{x:D,y:H}});function o(O){const{a:F,b:D}=t,H=r.sqr(O),q=r.mul(H,O);return r.add(r.add(q,r.mul(O,F)),D)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function l(O){return typeof O=="bigint"&&Ur<O&&O<t.n}function c(O){if(!l(O))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function m(O){const{allowedPrivateKeyLengths:F,nByteLength:D,wrapPrivateKey:H,n:q}=t;if(F&&typeof O!="bigint"){if(Qi(O)&&(O=Vr(O)),typeof O!="string"||!F.includes(O.length))throw new Error("Invalid key");O=O.padStart(D*2,"0")}let Z;try{Z=typeof O=="bigint"?O:Mt(_t("private key",O,D))}catch{throw new Error(`private key must be ${D} bytes, hex or bigint, not ${typeof O}`)}return H&&(Z=ze(Z,q)),c(Z),Z}const b=new Map;function B(O){if(!(O instanceof A))throw new Error("ProjectivePoint expected")}class A{constructor(F,D,H){if(this.px=F,this.py=D,this.pz=H,F==null||!r.isValid(F))throw new Error("x required");if(D==null||!r.isValid(D))throw new Error("y required");if(H==null||!r.isValid(H))throw new Error("z required")}static fromAffine(F){const{x:D,y:H}=F||{};if(!F||!r.isValid(D)||!r.isValid(H))throw new Error("invalid affine point");if(F instanceof A)throw new Error("projective point not allowed");const q=Z=>r.eql(Z,r.ZERO);return q(D)&&q(H)?A.ZERO:new A(D,H,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(F){const D=r.invertBatch(F.map(H=>H.pz));return F.map((H,q)=>H.toAffine(D[q])).map(A.fromAffine)}static fromHex(F){const D=A.fromAffine(i(_t("pointHex",F)));return D.assertValidity(),D}static fromPrivateKey(F){return A.BASE.multiply(m(F))}_setWindowSize(F){this._WINDOW_SIZE=F,b.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:F,y:D}=this.toAffine();if(!r.isValid(F)||!r.isValid(D))throw new Error("bad point: x or y not FE");const H=r.sqr(D),q=o(F);if(!r.eql(H,q))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:F}=this.toAffine();if(r.isOdd)return!r.isOdd(F);throw new Error("Field doesn't support isOdd")}equals(F){B(F);const{px:D,py:H,pz:q}=this,{px:Z,py:X,pz:K}=F,j=r.eql(r.mul(D,K),r.mul(Z,q)),$=r.eql(r.mul(H,K),r.mul(X,q));return j&&$}negate(){return new A(this.px,r.neg(this.py),this.pz)}double(){const{a:F,b:D}=t,H=r.mul(D,Ci),{px:q,py:Z,pz:X}=this;let K=r.ZERO,j=r.ZERO,$=r.ZERO,Q=r.mul(q,q),he=r.mul(Z,Z),W=r.mul(X,X),ce=r.mul(q,Z);return ce=r.add(ce,ce),$=r.mul(q,X),$=r.add($,$),K=r.mul(F,$),j=r.mul(H,W),j=r.add(K,j),K=r.sub(he,j),j=r.add(he,j),j=r.mul(K,j),K=r.mul(ce,K),$=r.mul(H,$),W=r.mul(F,W),ce=r.sub(Q,W),ce=r.mul(F,ce),ce=r.add(ce,$),$=r.add(Q,Q),Q=r.add($,Q),Q=r.add(Q,W),Q=r.mul(Q,ce),j=r.add(j,Q),W=r.mul(Z,X),W=r.add(W,W),Q=r.mul(W,ce),K=r.sub(K,Q),$=r.mul(W,he),$=r.add($,$),$=r.add($,$),new A(K,j,$)}add(F){B(F);const{px:D,py:H,pz:q}=this,{px:Z,py:X,pz:K}=F;let j=r.ZERO,$=r.ZERO,Q=r.ZERO;const he=t.a,W=r.mul(t.b,Ci);let ce=r.mul(D,Z),ye=r.mul(H,X),ge=r.mul(q,K),Ae=r.add(D,H),xe=r.add(Z,X);Ae=r.mul(Ae,xe),xe=r.add(ce,ye),Ae=r.sub(Ae,xe),xe=r.add(D,q);let J=r.add(Z,K);return xe=r.mul(xe,J),J=r.add(ce,ge),xe=r.sub(xe,J),J=r.add(H,q),j=r.add(X,K),J=r.mul(J,j),j=r.add(ye,ge),J=r.sub(J,j),Q=r.mul(he,xe),j=r.mul(W,ge),Q=r.add(j,Q),j=r.sub(ye,Q),Q=r.add(ye,Q),$=r.mul(j,Q),ye=r.add(ce,ce),ye=r.add(ye,ce),ge=r.mul(he,ge),xe=r.mul(W,xe),ye=r.add(ye,ge),ge=r.sub(ce,ge),ge=r.mul(he,ge),xe=r.add(xe,ge),ce=r.mul(ye,xe),$=r.add($,ce),ce=r.mul(J,xe),j=r.mul(Ae,j),j=r.sub(j,ce),ce=r.mul(Ae,ye),Q=r.mul(J,Q),Q=r.add(Q,ce),new A(j,$,Q)}subtract(F){return this.add(F.negate())}is0(){return this.equals(A.ZERO)}wNAF(F){return I.wNAFCached(this,b,F,D=>{const H=r.invertBatch(D.map(q=>q.pz));return D.map((q,Z)=>q.toAffine(H[Z])).map(A.fromAffine)})}multiplyUnsafe(F){const D=A.ZERO;if(F===Ur)return D;if(c(F),F===it)return this;const{endo:H}=t;if(!H)return I.unsafeLadder(this,F);let{k1neg:q,k1:Z,k2neg:X,k2:K}=H.splitScalar(F),j=D,$=D,Q=this;for(;Z>Ur||K>Ur;)Z&it&&(j=j.add(Q)),K&it&&($=$.add(Q)),Q=Q.double(),Z>>=it,K>>=it;return q&&(j=j.negate()),X&&($=$.negate()),$=new A(r.mul($.px,H.beta),$.py,$.pz),j.add($)}multiply(F){c(F);let D=F,H,q;const{endo:Z}=t;if(Z){const{k1neg:X,k1:K,k2neg:j,k2:$}=Z.splitScalar(D);let{p:Q,f:he}=this.wNAF(K),{p:W,f:ce}=this.wNAF($);Q=I.constTimeNegate(X,Q),W=I.constTimeNegate(j,W),W=new A(r.mul(W.px,Z.beta),W.py,W.pz),H=Q.add(W),q=he.add(ce)}else{const{p:X,f:K}=this.wNAF(D);H=X,q=K}return A.normalizeZ([H,q])[0]}multiplyAndAddUnsafe(F,D,H){const q=A.BASE,Z=(K,j)=>j===Ur||j===it||!K.equals(q)?K.multiplyUnsafe(j):K.multiply(j),X=Z(this,D).add(Z(F,H));return X.is0()?void 0:X}toAffine(F){const{px:D,py:H,pz:q}=this,Z=this.is0();F==null&&(F=Z?r.ONE:r.inv(q));const X=r.mul(D,F),K=r.mul(H,F),j=r.mul(q,F);if(Z)return{x:r.ZERO,y:r.ZERO};if(!r.eql(j,r.ONE))throw new Error("invZ was invalid");return{x:X,y:K}}isTorsionFree(){const{h:F,isTorsionFree:D}=t;if(F===it)return!0;if(D)return D(A,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:F,clearCofactor:D}=t;return F===it?this:D?D(A,this):this.multiplyUnsafe(t.h)}toRawBytes(F=!0){return this.assertValidity(),n(A,this,F)}toHex(F=!0){return Vr(this.toRawBytes(F))}}A.BASE=new A(t.Gx,t.Gy,r.ONE),A.ZERO=new A(r.ZERO,r.ONE,r.ZERO);const P=t.nBitLength,I=Bu(A,t.endo?Math.ceil(P/2):P);return{CURVE:t,ProjectivePoint:A,normPrivateKeyToScalar:m,weierstrassEquation:o,isWithinCurveOrder:l}}function C0(e,t){const r=e.ORDER;let n=Ur;for(let O=r-it;O%lr===Ur;O/=lr)n+=it;const i=n,o=lr<<i-it-it,l=o*lr,c=(r-it)/l,m=(c-it)/lr,b=l-it,B=o,A=e.pow(t,c),P=e.pow(t,(c+it)/lr);let I=(O,F)=>{let D=A,H=e.pow(F,b),q=e.sqr(H);q=e.mul(q,F);let Z=e.mul(O,q);Z=e.pow(Z,m),Z=e.mul(Z,H),H=e.mul(Z,F),q=e.mul(Z,O);let X=e.mul(q,H);Z=e.pow(X,B);let K=e.eql(Z,e.ONE);H=e.mul(q,P),Z=e.mul(X,D),q=e.cmov(H,q,K),X=e.cmov(Z,X,K);for(let j=i;j>it;j--){let $=j-lr;$=lr<<$-it;let Q=e.pow(X,$);const he=e.eql(Q,e.ONE);H=e.mul(q,D),D=e.mul(D,D),Q=e.mul(X,D),q=e.cmov(H,q,he),X=e.cmov(Q,X,he)}return{isValid:K,value:q}};if(e.ORDER%oo===Ci){const O=(e.ORDER-Ci)/oo,F=e.sqrt(e.neg(t));I=(D,H)=>{let q=e.sqr(H);const Z=e.mul(D,H);q=e.mul(q,Z);let X=e.pow(q,O);X=e.mul(X,Z);const K=e.mul(X,F),j=e.mul(e.sqr(X),H),$=e.eql(j,D);let Q=e.cmov(K,X,$);return{isValid:$,value:Q}}}return I}function Su(e,t){if(Eu(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=C0(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,o,l,c,m,b,B,A;i=e.sqr(n),i=e.mul(i,t.Z),o=e.sqr(i),o=e.add(o,i),l=e.add(o,e.ONE),l=e.mul(l,t.B),c=e.cmov(t.Z,e.neg(o),!e.eql(o,e.ZERO)),c=e.mul(c,t.A),o=e.sqr(l),b=e.sqr(c),m=e.mul(b,t.A),o=e.add(o,m),o=e.mul(o,l),b=e.mul(b,c),m=e.mul(b,t.B),o=e.add(o,m),B=e.mul(i,l);const{isValid:P,value:I}=r(o,b);A=e.mul(i,n),A=e.mul(A,I),B=e.cmov(B,l,P),A=e.cmov(A,I,P);const O=e.isOdd(n)===e.isOdd(A);return A=e.cmov(e.neg(A),A,O),B=e.div(B,c),{x:B,y:A}}}const vs=BigInt(2),Yn=BigInt(3);function k0(e){const{Fp:t,Fr:r,Fp2:n,Fp6:i,Fp12:o}=e.fields,l=vn(e.params.x);function c(J){const{x:we,y:ee}=J,z=we,se=ee,Y=n.ONE;let ie=z,oe=se,E=Y,le=[];for(let pe=l-2;pe>=0;pe--){let ve=n.sqr(oe),ae=n.sqr(E),ue=n.multiplyByB(n.mul(ae,Yn)),w=n.mul(ue,Yn),s=n.sub(n.sub(n.sqr(n.add(oe,E)),ae),ve);if(le.push([n.sub(ue,ve),n.mul(n.sqr(ie),Yn),n.neg(s)]),ie=n.div(n.mul(n.mul(n.sub(ve,w),ie),oe),vs),oe=n.sub(n.sqr(n.div(n.add(ve,w),vs)),n.mul(n.sqr(ue),Yn)),E=n.mul(ve,s),Qs(e.params.x,pe)){let h=n.sub(oe,n.mul(se,E)),_=n.sub(ie,n.mul(z,E));le.push([n.sub(n.mul(h,z),n.mul(_,se)),n.neg(h),_]);let T=n.sqr(_),N=n.mul(T,_),p=n.mul(T,ie),a=n.add(n.sub(N,n.mul(p,vs)),n.mul(n.sqr(h),E));ie=n.mul(_,a),oe=n.sub(n.mul(n.sub(p,a),h),n.mul(N,oe)),E=n.mul(E,N)}}return le}function m(J,we){const{x:ee}=e.params,z=we[0],se=we[1];let Y=o.ONE;for(let ie=0,oe=l-2;oe>=0;oe--,ie++){const E=J[ie];if(Y=o.multiplyBy014(Y,E[0],n.mul(E[1],z),n.mul(E[2],se)),Qs(ee,oe)){ie+=1;const le=J[ie];Y=o.multiplyBy014(Y,le[0],n.mul(le[1],z),n.mul(le[2],se))}oe!==0&&(Y=o.sqr(Y))}return o.conjugate(Y)}const b={randomPrivateKey:()=>{const J=vu(r.ORDER);return S0(e.randomBytes(J),r.ORDER)},calcPairingPrecomputes:c},B=co({n:r.ORDER,...e.G1}),A=Object.assign(B,ao(B.ProjectivePoint,e.G1.mapToCurve,{...e.htfDefaults,...e.G1.htfDefaults}));function P(J){const we=J;return we._PPRECOMPUTES||(we._PPRECOMPUTES=c(J.toAffine())),we._PPRECOMPUTES}const I=co({n:r.ORDER,...e.G2}),O=Object.assign(I,ao(I.ProjectivePoint,e.G2.mapToCurve,{...e.htfDefaults,...e.G2.htfDefaults})),{ShortSignature:F}=e.G1,{Signature:D}=e.G2;function H(J,we,ee=!0){if(J.equals(A.ProjectivePoint.ZERO)||we.equals(O.ProjectivePoint.ZERO))throw new Error("pairing is not available for ZERO point");J.assertValidity(),we.assertValidity();const z=J.toAffine(),se=m(P(we),[z.x,z.y]);return ee?o.finalExponentiate(se):se}function q(J){return J instanceof A.ProjectivePoint?J:A.ProjectivePoint.fromHex(J)}function Z(J,we){return J instanceof A.ProjectivePoint?J:A.hashToCurve(_t("point",J),we)}function X(J){return J instanceof O.ProjectivePoint?J:D.fromHex(J)}function K(J,we){return J instanceof O.ProjectivePoint?J:O.hashToCurve(_t("point",J),we)}function j(J){return A.ProjectivePoint.fromPrivateKey(J).toRawBytes(!0)}function $(J){return O.ProjectivePoint.fromPrivateKey(J).toRawBytes(!0)}function Q(J,we,ee){const z=K(J,ee);z.assertValidity();const se=z.multiply(A.normPrivateKeyToScalar(we));return J instanceof O.ProjectivePoint?se:D.toRawBytes(se)}function he(J,we,ee){const z=Z(J,ee);z.assertValidity();const se=z.multiply(A.normPrivateKeyToScalar(we));return J instanceof A.ProjectivePoint?se:F.toRawBytes(se)}function W(J,we,ee,z){const se=q(ee),Y=K(we,z),ie=A.ProjectivePoint.BASE,oe=X(J),E=H(se.negate(),Y,!1),le=H(ie,oe,!1),pe=o.finalExponentiate(o.mul(le,E));return o.eql(pe,o.ONE)}function ce(J,we,ee,z){const se=X(ee),Y=Z(we,z),ie=O.ProjectivePoint.BASE,oe=q(J),E=H(Y,se,!1),le=H(oe,ie.negate(),!1),pe=o.finalExponentiate(o.mul(le,E));return o.eql(pe,o.ONE)}function ye(J){if(!J.length)throw new Error("Expected non-empty array");const ee=J.map(q).reduce((z,se)=>z.add(se),A.ProjectivePoint.ZERO);return J[0]instanceof A.ProjectivePoint?(ee.assertValidity(),ee):ee.toRawBytes(!0)}function ge(J){if(!J.length)throw new Error("Expected non-empty array");const ee=J.map(X).reduce((z,se)=>z.add(se),O.ProjectivePoint.ZERO);return J[0]instanceof O.ProjectivePoint?(ee.assertValidity(),ee):D.toRawBytes(ee)}function Ae(J){if(!J.length)throw new Error("Expected non-empty array");const ee=J.map(q).reduce((z,se)=>z.add(se),A.ProjectivePoint.ZERO);return J[0]instanceof A.ProjectivePoint?(ee.assertValidity(),ee):F.toRawBytes(ee)}function xe(J,we,ee,z){if(!we.length)throw new Error("Expected non-empty messages array");if(ee.length!==we.length)throw new Error("Pubkey count should equal msg count");const se=X(J),Y=we.map(oe=>K(oe,z)),ie=ee.map(q);try{const oe=[];for(const pe of new Set(Y)){const ve=Y.reduce((ae,ue,w)=>ue===pe?ae.add(ie[w]):ae,A.ProjectivePoint.ZERO);oe.push(H(ve,pe,!1))}oe.push(H(A.ProjectivePoint.BASE.negate(),se,!1));const E=oe.reduce((pe,ve)=>o.mul(pe,ve),o.ONE),le=o.finalExponentiate(E);return o.eql(le,o.ONE)}catch{return!1}}return A.ProjectivePoint.BASE._setWindowSize(4),{getPublicKey:j,getPublicKeyForShortSignatures:$,sign:Q,signShortSignature:he,verify:W,verifyBatch:xe,verifyShortSignature:ce,aggregatePublicKeys:ye,aggregateSignatures:ge,aggregateShortSignatures:Ae,millerLoop:m,pairing:H,G1:A,G2:O,Signature:D,ShortSignature:F,fields:{Fr:r,Fp:t,Fp2:n,Fp6:i,Fp12:o},params:{x:e.params.x,r:e.params.r,G1b:e.G1.b,G2b:e.G2.b},utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Je=BigInt(0),Pr=BigInt(1),je=BigInt(2),Zn=BigInt(3),An=BigInt(4),M0=BigInt(8),$0=BigInt(16),ta=BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),te=Sa(ta),uo=Sa(BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001")),fo=({c0:e,c1:t},{c0:r,c1:n})=>({c0:te.add(e,r),c1:te.add(t,n)}),lo=({c0:e,c1:t},{c0:r,c1:n})=>({c0:te.sub(e,r),c1:te.sub(t,n)}),ho=({c0:e,c1:t},r)=>{if(typeof r=="bigint")return{c0:te.mul(e,r),c1:te.mul(t,r)};const{c0:n,c1:i}=r;let o=te.mul(e,n),l=te.mul(t,i);const c=te.sub(o,l),m=te.sub(te.mul(te.add(e,t),te.add(n,i)),te.add(o,l));return{c0:c,c1:m}},po=({c0:e,c1:t})=>{const r=te.add(e,t),n=te.sub(e,t),i=te.add(e,e);return{c0:te.mul(r,n),c1:te.mul(i,t)}},Xn=ta*ta,R={ORDER:Xn,BITS:vn(Xn),BYTES:Math.ceil(vn(Xn)/8),MASK:es(vn(Xn)),ZERO:{c0:te.ZERO,c1:te.ZERO},ONE:{c0:te.ONE,c1:te.ZERO},create:e=>e,isValid:({c0:e,c1:t})=>typeof e=="bigint"&&typeof t=="bigint",is0:({c0:e,c1:t})=>te.is0(e)&&te.is0(t),eql:({c0:e,c1:t},{c0:r,c1:n})=>te.eql(e,r)&&te.eql(t,n),neg:({c0:e,c1:t})=>({c0:te.neg(e),c1:te.neg(t)}),pow:(e,t)=>ts(R,e,t),invertBatch:e=>rs(R,e),add:fo,sub:lo,mul:ho,sqr:po,addN:fo,subN:lo,mulN:ho,sqrN:po,div:(e,t)=>R.mul(e,typeof t=="bigint"?te.inv(te.create(t)):R.inv(t)),inv:({c0:e,c1:t})=>{const r=te.inv(te.create(e*e+t*t));return{c0:te.mul(r,te.create(e)),c1:te.mul(r,te.create(-t))}},sqrt:e=>{if(R.eql(e,R.ZERO))return R.ZERO;const t=R.pow(e,(R.ORDER+M0)/$0),r=R.div(R.sqr(t),e),n=L0,i=[n[0],n[2],n[4],n[6]].find(I=>R.eql(I,r));if(!i)throw new Error("No root");const o=n.indexOf(i),l=n[o/2];if(!l)throw new Error("Invalid root");const c=R.div(t,l),m=R.neg(c),{re:b,im:B}=R.reim(c),{re:A,im:P}=R.reim(m);return B>P||B===P&&b>A?c:m},isOdd:e=>{const{re:t,im:r}=R.reim(e),n=t%je,i=t===Je,o=r%je;return BigInt(n||i&&o)==Pr},fromBytes(e){if(e.length!==R.BYTES)throw new Error(`fromBytes wrong length=${e.length}`);return{c0:te.fromBytes(e.subarray(0,te.BYTES)),c1:te.fromBytes(e.subarray(te.BYTES))}},toBytes:({c0:e,c1:t})=>Qe(te.toBytes(e),te.toBytes(t)),cmov:({c0:e,c1:t},{c0:r,c1:n},i)=>({c0:te.cmov(e,r,i),c1:te.cmov(t,n,i)}),reim:({c0:e,c1:t})=>({re:e,im:t}),mulByNonresidue:({c0:e,c1:t})=>({c0:te.sub(e,t),c1:te.add(e,t)}),multiplyByB:({c0:e,c1:t})=>{let r=te.mul(e,An),n=te.mul(t,An);return{c0:te.sub(r,n),c1:te.add(r,n)}},fromBigTuple:e=>{if(e.length!==2)throw new Error("Invalid tuple");const t=e.map(r=>te.create(r));return{c0:t[0],c1:t[1]}},frobeniusMap:({c0:e,c1:t},r)=>({c0:e,c1:te.mul(t,V0[r%2])})},V0=[BigInt("0x1"),BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaaa")].map(e=>te.create(e)),dr=BigInt("0x6af0e0437ff400b6831e36d6bd17ffe48395dabc2d3435e77f76e17009241c5ee67992f72ec05f4c81084fbede3cc09"),L0=[[Pr,Je],[dr,-dr],[Je,Pr],[dr,dr],[-Pr,Je],[-dr,dr],[Je,-Pr],[-dr,-dr]].map(e=>R.fromBigTuple(e)),yo=({c0:e,c1:t,c2:r},{c0:n,c1:i,c2:o})=>({c0:R.add(e,n),c1:R.add(t,i),c2:R.add(r,o)}),go=({c0:e,c1:t,c2:r},{c0:n,c1:i,c2:o})=>({c0:R.sub(e,n),c1:R.sub(t,i),c2:R.sub(r,o)}),mo=({c0:e,c1:t,c2:r},n)=>{if(typeof n=="bigint")return{c0:R.mul(e,n),c1:R.mul(t,n),c2:R.mul(r,n)};const{c0:i,c1:o,c2:l}=n,c=R.mul(e,i),m=R.mul(t,o),b=R.mul(r,l);return{c0:R.add(c,R.mulByNonresidue(R.sub(R.mul(R.add(t,r),R.add(o,l)),R.add(m,b)))),c1:R.add(R.sub(R.mul(R.add(e,t),R.add(i,o)),R.add(c,m)),R.mulByNonresidue(b)),c2:R.sub(R.add(m,R.mul(R.add(e,r),R.add(i,l))),R.add(c,b))}},wo=({c0:e,c1:t,c2:r})=>{let n=R.sqr(e),i=R.mul(R.mul(e,t),je),o=R.mul(R.mul(t,r),je),l=R.sqr(r);return{c0:R.add(R.mulByNonresidue(o),n),c1:R.add(R.mulByNonresidue(l),i),c2:R.sub(R.sub(R.add(R.add(i,R.sqr(R.add(R.sub(e,t),r))),o),n),l)}},de={ORDER:R.ORDER,BITS:3*R.BITS,BYTES:3*R.BYTES,MASK:es(3*R.BITS),ZERO:{c0:R.ZERO,c1:R.ZERO,c2:R.ZERO},ONE:{c0:R.ONE,c1:R.ZERO,c2:R.ZERO},create:e=>e,isValid:({c0:e,c1:t,c2:r})=>R.isValid(e)&&R.isValid(t)&&R.isValid(r),is0:({c0:e,c1:t,c2:r})=>R.is0(e)&&R.is0(t)&&R.is0(r),neg:({c0:e,c1:t,c2:r})=>({c0:R.neg(e),c1:R.neg(t),c2:R.neg(r)}),eql:({c0:e,c1:t,c2:r},{c0:n,c1:i,c2:o})=>R.eql(e,n)&&R.eql(t,i)&&R.eql(r,o),sqrt:()=>{throw new Error("Not implemented")},div:(e,t)=>de.mul(e,typeof t=="bigint"?te.inv(te.create(t)):de.inv(t)),pow:(e,t)=>ts(de,e,t),invertBatch:e=>rs(de,e),add:yo,sub:go,mul:mo,sqr:wo,addN:yo,subN:go,mulN:mo,sqrN:wo,inv:({c0:e,c1:t,c2:r})=>{let n=R.sub(R.sqr(e),R.mulByNonresidue(R.mul(r,t))),i=R.sub(R.mulByNonresidue(R.sqr(r)),R.mul(e,t)),o=R.sub(R.sqr(t),R.mul(e,r)),l=R.inv(R.add(R.mulByNonresidue(R.add(R.mul(r,i),R.mul(t,o))),R.mul(e,n)));return{c0:R.mul(l,n),c1:R.mul(l,i),c2:R.mul(l,o)}},fromBytes:e=>{if(e.length!==de.BYTES)throw new Error(`fromBytes wrong length=${e.length}`);return{c0:R.fromBytes(e.subarray(0,R.BYTES)),c1:R.fromBytes(e.subarray(R.BYTES,2*R.BYTES)),c2:R.fromBytes(e.subarray(2*R.BYTES))}},toBytes:({c0:e,c1:t,c2:r})=>Qe(R.toBytes(e),R.toBytes(t),R.toBytes(r)),cmov:({c0:e,c1:t,c2:r},{c0:n,c1:i,c2:o},l)=>({c0:R.cmov(e,n,l),c1:R.cmov(t,i,l),c2:R.cmov(r,o,l)}),fromBigSix:e=>{if(!Array.isArray(e)||e.length!==6)throw new Error("Invalid Fp6 usage");return{c0:R.fromBigTuple(e.slice(0,2)),c1:R.fromBigTuple(e.slice(2,4)),c2:R.fromBigTuple(e.slice(4,6))}},frobeniusMap:({c0:e,c1:t,c2:r},n)=>({c0:R.frobeniusMap(e,n),c1:R.mul(R.frobeniusMap(t,n),D0[n%6]),c2:R.mul(R.frobeniusMap(r,n),q0[n%6])}),mulByNonresidue:({c0:e,c1:t,c2:r})=>({c0:R.mulByNonresidue(r),c1:e,c2:t}),multiplyBy1:({c0:e,c1:t,c2:r},n)=>({c0:R.mulByNonresidue(R.mul(r,n)),c1:R.mul(e,n),c2:R.mul(t,n)}),multiplyBy01({c0:e,c1:t,c2:r},n,i){let o=R.mul(e,n),l=R.mul(t,i);return{c0:R.add(R.mulByNonresidue(R.sub(R.mul(R.add(t,r),i),l)),o),c1:R.sub(R.sub(R.mul(R.add(n,i),R.add(e,t)),o),l),c2:R.add(R.sub(R.mul(R.add(e,r),n),o),l)}},multiplyByFp2:({c0:e,c1:t,c2:r},n)=>({c0:R.mul(e,n),c1:R.mul(t,n),c2:R.mul(r,n)})},D0=[[BigInt("0x1"),BigInt("0x0")],[BigInt("0x0"),BigInt("0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaac")],[BigInt("0x00000000000000005f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),BigInt("0x0")],[BigInt("0x0"),BigInt("0x1")],[BigInt("0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaac"),BigInt("0x0")],[BigInt("0x0"),BigInt("0x00000000000000005f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe")]].map(e=>R.fromBigTuple(e)),q0=[[BigInt("0x1"),BigInt("0x0")],[BigInt("0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaad"),BigInt("0x0")],[BigInt("0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaac"),BigInt("0x0")],[BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaaa"),BigInt("0x0")],[BigInt("0x00000000000000005f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),BigInt("0x0")],[BigInt("0x00000000000000005f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffeffff"),BigInt("0x0")]].map(e=>R.fromBigTuple(e)),Ra=BigInt("0xd201000000010000"),G0=vn(Ra),bo=({c0:e,c1:t},{c0:r,c1:n})=>({c0:de.add(e,r),c1:de.add(t,n)}),_o=({c0:e,c1:t},{c0:r,c1:n})=>({c0:de.sub(e,r),c1:de.sub(t,n)}),Eo=({c0:e,c1:t},r)=>{if(typeof r=="bigint")return{c0:de.mul(e,r),c1:de.mul(t,r)};let{c0:n,c1:i}=r,o=de.mul(e,n),l=de.mul(t,i);return{c0:de.add(o,de.mulByNonresidue(l)),c1:de.sub(de.mul(de.add(e,t),de.add(n,i)),de.add(o,l))}},xo=({c0:e,c1:t})=>{let r=de.mul(e,t);return{c0:de.sub(de.sub(de.mul(de.add(de.mulByNonresidue(t),e),de.add(e,t)),r),de.mulByNonresidue(r)),c1:de.add(r,r)}};function As(e,t){const r=R.sqr(e),n=R.sqr(t);return{first:R.add(R.mulByNonresidue(n),r),second:R.sub(R.sub(R.sqr(R.add(e,t)),r),n)}}const Se={ORDER:R.ORDER,BITS:2*R.BITS,BYTES:2*R.BYTES,MASK:es(2*R.BITS),ZERO:{c0:de.ZERO,c1:de.ZERO},ONE:{c0:de.ONE,c1:de.ZERO},create:e=>e,isValid:({c0:e,c1:t})=>de.isValid(e)&&de.isValid(t),is0:({c0:e,c1:t})=>de.is0(e)&&de.is0(t),neg:({c0:e,c1:t})=>({c0:de.neg(e),c1:de.neg(t)}),eql:({c0:e,c1:t},{c0:r,c1:n})=>de.eql(e,r)&&de.eql(t,n),sqrt:()=>{throw new Error("Not implemented")},inv:({c0:e,c1:t})=>{let r=de.inv(de.sub(de.sqr(e),de.mulByNonresidue(de.sqr(t))));return{c0:de.mul(e,r),c1:de.neg(de.mul(t,r))}},div:(e,t)=>Se.mul(e,typeof t=="bigint"?te.inv(te.create(t)):Se.inv(t)),pow:(e,t)=>ts(Se,e,t),invertBatch:e=>rs(Se,e),add:bo,sub:_o,mul:Eo,sqr:xo,addN:bo,subN:_o,mulN:Eo,sqrN:xo,fromBytes:e=>{if(e.length!==Se.BYTES)throw new Error(`fromBytes wrong length=${e.length}`);return{c0:de.fromBytes(e.subarray(0,de.BYTES)),c1:de.fromBytes(e.subarray(de.BYTES))}},toBytes:({c0:e,c1:t})=>Qe(de.toBytes(e),de.toBytes(t)),cmov:({c0:e,c1:t},{c0:r,c1:n},i)=>({c0:de.cmov(e,r,i),c1:de.cmov(t,n,i)}),fromBigTwelve:e=>({c0:de.fromBigSix(e.slice(0,6)),c1:de.fromBigSix(e.slice(6,12))}),frobeniusMap(e,t){const r=de.frobeniusMap(e.c0,t),{c0:n,c1:i,c2:o}=de.frobeniusMap(e.c1,t),l=H0[t%12];return{c0:r,c1:de.create({c0:R.mul(n,l),c1:R.mul(i,l),c2:R.mul(o,l)})}},multiplyBy014:({c0:e,c1:t},r,n,i)=>{let o=de.multiplyBy01(e,r,n),l=de.multiplyBy1(t,i);return{c0:de.add(de.mulByNonresidue(l),o),c1:de.sub(de.sub(de.multiplyBy01(de.add(t,e),r,R.add(n,i)),o),l)}},multiplyByFp2:({c0:e,c1:t},r)=>({c0:de.multiplyByFp2(e,r),c1:de.multiplyByFp2(t,r)}),conjugate:({c0:e,c1:t})=>({c0:e,c1:de.neg(t)}),_cyclotomicSquare:({c0:e,c1:t})=>{const{c0:r,c1:n,c2:i}=e,{c0:o,c1:l,c2:c}=t,{first:m,second:b}=As(r,l),{first:B,second:A}=As(o,i),{first:P,second:I}=As(n,c);let O=R.mulByNonresidue(I);return{c0:de.create({c0:R.add(R.mul(R.sub(m,r),je),m),c1:R.add(R.mul(R.sub(B,n),je),B),c2:R.add(R.mul(R.sub(P,i),je),P)}),c1:de.create({c0:R.add(R.mul(R.add(O,o),je),O),c1:R.add(R.mul(R.add(b,l),je),b),c2:R.add(R.mul(R.add(A,c),je),A)})}},_cyclotomicExp(e,t){let r=Se.ONE;for(let n=G0-1;n>=0;n--)r=Se._cyclotomicSquare(r),Qs(t,n)&&(r=Se.mul(r,e));return r},finalExponentiate:e=>{const t=Ra,r=Se.div(Se.frobeniusMap(e,6),e),n=Se.mul(Se.frobeniusMap(r,2),r),i=Se.conjugate(Se._cyclotomicExp(n,t)),o=Se.mul(Se.conjugate(Se._cyclotomicSquare(n)),i),l=Se.conjugate(Se._cyclotomicExp(o,t)),c=Se.conjugate(Se._cyclotomicExp(l,t)),m=Se.mul(Se.conjugate(Se._cyclotomicExp(c,t)),Se._cyclotomicSquare(i)),b=Se.conjugate(Se._cyclotomicExp(m,t)),B=Se.frobeniusMap(Se.mul(i,c),2),A=Se.frobeniusMap(Se.mul(l,n),3),P=Se.frobeniusMap(Se.mul(m,Se.conjugate(n)),1),I=Se.mul(Se.mul(b,Se.conjugate(o)),n);return Se.mul(Se.mul(Se.mul(B,A),P),I)}},H0=[[BigInt("0x1"),BigInt("0x0")],[BigInt("0x1904d3bf02bb0667c231beb4202c0d1f0fd603fd3cbd5f4f7b2443d784bab9c4f67ea53d63e7813d8d0775ed92235fb8"),BigInt("0x00fc3e2b36c4e03288e9e902231f9fb854a14787b6c7b36fec0c8ec971f63c5f282d5ac14d6c7ec22cf78a126ddc4af3")],[BigInt("0x00000000000000005f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffeffff"),BigInt("0x0")],[BigInt("0x135203e60180a68ee2e9c448d77a2cd91c3dedd930b1cf60ef396489f61eb45e304466cf3e67fa0af1ee7b04121bdea2"),BigInt("0x06af0e0437ff400b6831e36d6bd17ffe48395dabc2d3435e77f76e17009241c5ee67992f72ec05f4c81084fbede3cc09")],[BigInt("0x00000000000000005f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),BigInt("0x0")],[BigInt("0x144e4211384586c16bd3ad4afa99cc9170df3560e77982d0db45f3536814f0bd5871c1908bd478cd1ee605167ff82995"),BigInt("0x05b2cfd9013a5fd8df47fa6b48b1e045f39816240c0b8fee8beadf4d8e9c0566c63a3e6e257f87329b18fae980078116")],[BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaaa"),BigInt("0x0")],[BigInt("0x00fc3e2b36c4e03288e9e902231f9fb854a14787b6c7b36fec0c8ec971f63c5f282d5ac14d6c7ec22cf78a126ddc4af3"),BigInt("0x1904d3bf02bb0667c231beb4202c0d1f0fd603fd3cbd5f4f7b2443d784bab9c4f67ea53d63e7813d8d0775ed92235fb8")],[BigInt("0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaac"),BigInt("0x0")],[BigInt("0x06af0e0437ff400b6831e36d6bd17ffe48395dabc2d3435e77f76e17009241c5ee67992f72ec05f4c81084fbede3cc09"),BigInt("0x135203e60180a68ee2e9c448d77a2cd91c3dedd930b1cf60ef396489f61eb45e304466cf3e67fa0af1ee7b04121bdea2")],[BigInt("0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaad"),BigInt("0x0")],[BigInt("0x05b2cfd9013a5fd8df47fa6b48b1e045f39816240c0b8fee8beadf4d8e9c0566c63a3e6e257f87329b18fae980078116"),BigInt("0x144e4211384586c16bd3ad4afa99cc9170df3560e77982d0db45f3536814f0bd5871c1908bd478cd1ee605167ff82995")]].map(e=>R.fromBigTuple(e)),j0=Au(R,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(e=>e.map(t=>R.fromBigTuple(t.map(BigInt))))),z0=Au(te,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),K0=Su(R,{A:R.create({c0:te.create(Je),c1:te.create(BigInt(240))}),B:R.create({c0:te.create(BigInt(1012)),c1:te.create(BigInt(1012))}),Z:R.create({c0:te.create(BigInt(-2)),c1:te.create(BigInt(-1))})}),W0=Su(te,{A:te.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:te.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:te.create(BigInt(11))}),Nu=de.create({c0:R.ZERO,c1:R.ONE,c2:R.ZERO}),Ru=Se.create({c0:Nu,c1:de.ZERO}),Ou=Se.create({c0:de.ZERO,c1:Nu}),[Y0,Z0]=Se.invertBatch([Ru,Ou]);function X0(e,t){const r=Se.mul(Se.frobeniusMap(Se.multiplyByFp2(Y0,e),1),Ru).c0.c0,n=Se.mul(Se.frobeniusMap(Se.multiplyByFp2(Z0,t),1),Ou).c0.c0;return[r,n]}function To(e,t){const r=t.toAffine(),n=X0(r.x,r.y);return new e(n[0],n[1],R.ONE)}const J0=BigInt("0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaac");function Q0(e,t){return[R.mul(e,J0),R.neg(t)]}function ed(e,t){const r=t.toAffine(),n=Q0(r.x,r.y);return new e(n[0],n[1],R.ONE)}const Bs=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:te.ORDER,m:2,k:128,expand:"xmd",hash:ya}),ki=Sn(te.toBytes(Je),{infinity:!0,compressed:!0});function Jn(e){e=e.slice();const t=e[0]&224,r=!!(t>>7&1),n=!!(t>>6&1),i=!!(t>>5&1);return e[0]&=31,{compressed:r,infinity:n,sort:i,value:e}}function Sn(e,t){if(e[0]&224)throw new Error("setMask: non-empty mask");return t.compressed&&(e[0]|=128),t.infinity&&(e[0]|=64),t.sort&&(e[0]|=32),e}function vo(e){e.assertValidity();const t=e.equals(ot.G1.ProjectivePoint.ZERO),{x:r,y:n}=e.toAffine();if(t)return ki.slice();const i=te.ORDER,o=!!(n*je/i);return Sn(ct(r,te.BYTES),{compressed:!0,sort:o})}function Ao(e){e.assertValidity();const t=te.BYTES;if(e.equals(ot.G2.ProjectivePoint.ZERO))return Qe(ki,ct(Je,t));const{x:r,y:n}=e.toAffine(),{re:i,im:o}=R.reim(r),{re:l,im:c}=R.reim(n),b=!!((c>Je?c*je:l*je)/te.ORDER&Pr),B=i;return Qe(Sn(ct(o,t),{sort:b,compressed:!0}),ct(B,t))}const ot=k0({fields:{Fp:te,Fp2:R,Fp6:de,Fp12:Se,Fr:uo},G1:{Fp:te,h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1"),a:te.ZERO,b:An,htfDefaults:{...Bs,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(e,t)=>{const r=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new e(te.mul(t.px,r),t.py,t.pz);return t.multiplyUnsafe(ot.params.x).negate().multiplyUnsafe(ot.params.x).equals(n)},clearCofactor:(e,t)=>t.multiplyUnsafe(ot.params.x).add(t),mapToCurve:e=>{const{x:t,y:r}=W0(te.create(e[0]));return z0(t,r)},fromBytes:e=>{const{compressed:t,infinity:r,sort:n,value:i}=Jn(e);if(i.length===48&&t){const o=te.ORDER,l=Mt(i),c=te.create(l&te.MASK);if(r){if(c!==Je)throw new Error("G1: non-empty compressed point at infinity");return{x:Je,y:Je}}const m=te.add(te.pow(c,Zn),te.create(ot.params.G1b));let b=te.sqrt(m);if(!b)throw new Error("Invalid compressed G1 point");return b*je/o!==BigInt(n)&&(b=te.neg(b)),{x:te.create(c),y:te.create(b)}}else if(i.length===96&&!t){const o=Mt(i.subarray(0,te.BYTES)),l=Mt(i.subarray(te.BYTES));if(r){if(o!==Je||l!==Je)throw new Error("G1: non-empty point at infinity");return ot.G1.ProjectivePoint.ZERO.toAffine()}return{x:te.create(o),y:te.create(l)}}else throw new Error("Invalid point G1, expected 48/96 bytes")},toBytes:(e,t,r)=>{const n=t.equals(e.ZERO),{x:i,y:o}=t.toAffine();if(r){if(n)return ki.slice();const l=te.ORDER,c=!!(o*je/l);return Sn(ct(i,te.BYTES),{compressed:!0,sort:c})}else return n?Qe(new Uint8Array([64]),new Uint8Array(2*te.BYTES-1)):Qe(ct(i,te.BYTES),ct(o,te.BYTES))},ShortSignature:{fromHex(e){const{infinity:t,sort:r,value:n}=Jn(_t("signatureHex",e,48)),i=te.ORDER,o=Mt(n);if(t)return ot.G1.ProjectivePoint.ZERO;const l=te.create(o&te.MASK),c=te.add(te.pow(l,Zn),te.create(ot.params.G1b));let m=te.sqrt(c);if(!m)throw new Error("Invalid compressed G1 point");const b=BigInt(r);m*je/i!==b&&(m=te.neg(m));const B=ot.G1.ProjectivePoint.fromAffine({x:l,y:m});return B.assertValidity(),B},toRawBytes(e){return vo(e)},toHex(e){return Vr(vo(e))}}},G2:{Fp:R,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),Gx:R.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:R.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")]),a:R.ZERO,b:R.fromBigTuple([An,An]),hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...Bs},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:e=>{const{x:t,y:r}=K0(R.fromBigTuple(e));return j0(t,r)},isTorsionFree:(e,t)=>t.multiplyUnsafe(ot.params.x).negate().equals(To(e,t)),clearCofactor:(e,t)=>{const r=ot.params.x;let n=t.multiplyUnsafe(r).negate(),i=To(e,t),o=t.double();return o=ed(e,o),o=o.subtract(i),i=n.add(i),i=i.multiplyUnsafe(r).negate(),o=o.add(i),o=o.subtract(n),o.subtract(t)},fromBytes:e=>{const{compressed:t,infinity:r,sort:n,value:i}=Jn(e);if(!t&&!r&&n||!t&&r&&n||n&&r&&t)throw new Error("Invalid encoding flag: "+(e[0]&224));const o=te.BYTES,l=(c,m,b)=>Mt(c.slice(m,b));if(i.length===96&&t){const c=ot.params.G2b,m=te.ORDER;if(r){if(i.reduce((F,D)=>F!==0?D+1:D,0)>0)throw new Error("Invalid compressed G2 point");return{x:R.ZERO,y:R.ZERO}}const b=l(i,0,o),B=l(i,o,2*o),A=R.create({c0:te.create(B),c1:te.create(b)}),P=R.add(R.pow(A,Zn),c);let I=R.sqrt(P);const O=I.c1===Je?I.c0*je/m:I.c1*je/m?Pr:Je;return I=n&&O>0?I:R.neg(I),{x:A,y:I}}else if(i.length===192&&!t){if(r){if(i.reduce((A,P)=>A!==0?P+1:P,0)>0)throw new Error("Invalid uncompressed G2 point");return{x:R.ZERO,y:R.ZERO}}const c=l(i,0,o),m=l(i,o,2*o),b=l(i,2*o,3*o),B=l(i,3*o,4*o);return{x:R.fromBigTuple([m,c]),y:R.fromBigTuple([B,b])}}else throw new Error("Invalid point G2, expected 96/192 bytes")},toBytes:(e,t,r)=>{const{BYTES:n,ORDER:i}=te,o=t.equals(e.ZERO),{x:l,y:c}=t.toAffine();if(r){if(o)return Qe(ki,ct(Je,n));const m=!!(c.c1===Je?c.c0*je/i:c.c1*je/i);return Qe(Sn(ct(l.c1,n),{compressed:!0,sort:m}),ct(l.c0,n))}else{if(o)return Qe(new Uint8Array([64]),new Uint8Array(4*n-1));const{re:m,im:b}=R.reim(l),{re:B,im:A}=R.reim(c);return Qe(ct(b,n),ct(m,n),ct(A,n),ct(B,n))}},Signature:{fromHex(e){const{infinity:t,sort:r,value:n}=Jn(_t("signatureHex",e)),i=te.ORDER,o=n.length/2;if(o!==48&&o!==96)throw new Error("Invalid compressed signature length, must be 96 or 192");const l=Mt(n.slice(0,o)),c=Mt(n.slice(o));if(t)return ot.G2.ProjectivePoint.ZERO;const m=te.create(l&te.MASK),b=te.create(c),B=R.create({c0:b,c1:m}),A=R.add(R.pow(B,Zn),ot.params.G2b);let P=R.sqrt(A);if(!P)throw new Error("Failed to find a square root");const{re:I,im:O}=R.reim(P),F=BigInt(r),D=O>Je&&O*je/i!==F,H=O===Je&&I*je/i!==F;(D||H)&&(P=R.neg(P));const q=ot.G2.ProjectivePoint.fromAffine({x:B,y:P});return q.assertValidity(),q},toRawBytes(e){return Ao(e)},toHex(e){return Vr(Ao(e))}}},params:{x:Ra,r:uo.ORDER},htfDefaults:Bs,hash:ya,randomBytes:ac});function td(e,t,r){const n=typeof e=="string"?e:ut(e),i=typeof t=="string"?t:ut(t),o=typeof r=="string"?r:ut(r);return ot.verifyShortSignature(i,o,n)}const Uu=e=>nt(new sn(e)),Oa=e=>{const t=Uu(e);return new Date(Number(t)/1e6)};class Wt extends dt{constructor(t){super(`Invalid certificate: ${t}`)}}var Tt;(function(e){e[e.Empty=0]="Empty",e[e.Fork=1]="Fork",e[e.Labeled=2]="Labeled",e[e.Leaf=3]="Leaf",e[e.Pruned=4]="Pruned"})(Tt||(Tt={}));function rd(e,t){const r=new Uint8Array(e),n=new Uint8Array(t);for(let i=0;i<r.length;i++)if(r[i]>n[i])return!0;return!1}class Cr{constructor(t,r,n,i,o=5){this._rootKey=r,this._canisterId=n,this._blsVerify=i,this._maxAgeInMinutes=o,this.cert=rr(new Uint8Array(t))}static async create(t){const r=Cr.createUnverified(t);return await r.verify(),r}static createUnverified(t){let r=t.blsVerify;return r||(r=td),new Cr(t.certificate,t.rootKey,t.canisterId,r,t.maxAgeInMinutes)}lookup(t){return rn(t,this.cert.tree)}lookup_label(t){return this.lookup([t])}async verify(){const t=await ci(this.cert.tree),r=await this._checkDelegationAndGetKey(this.cert.delegation),n=this.cert.signature,i=id(r),o=Vt(gn("ic-state-root"),t);let l=!1;const c=nr(this.lookup(["time"]));if(!c)throw new Wt("Certificate does not contain a time");const m=5*60*1e3,b=this._maxAgeInMinutes*60*1e3,B=Date.now(),A=B-b,P=B+m,I=Oa(c);if(I.getTime()<A)throw new Wt(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+I.toISOString()+" Current time: "+new Date(B).toISOString());if(I.getTime()>P)throw new Wt("Certificate is signed more than 5 minutes in the future. Certificate time: "+I.toISOString()+" Current time: "+new Date(B).toISOString());try{l=await this._blsVerify(new Uint8Array(i),new Uint8Array(n),new Uint8Array(o))}catch{l=!1}if(!l)throw new Wt("Signature verification failed")}async _checkDelegationAndGetKey(t){if(!t)return this._rootKey;const r=await Cr.createUnverified({certificate:t.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(r.cert.delegation)throw new Wt("Delegation certificates cannot be nested");if(await r.verify(),!Fu({canisterId:this._canisterId,subnetId:Pe.fromUint8Array(new Uint8Array(t.subnet_id)),tree:r.cert.tree}))throw new Wt(`Canister ${this._canisterId} not in range of delegations for subnet 0x${ut(t.subnet_id)}`);const i=nr(r.lookup(["subnet",t.subnet_id,"public_key"]));if(!i)throw new Error(`Could not find subnet key for subnet 0x${ut(t.subnet_id)}`);return i}}const on=sr("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100"),nd=96;function id(e){const t=on.byteLength+nd;if(e.byteLength!==t)throw new TypeError(`BLS DER-encoded public key must be ${t} bytes long`);const r=e.slice(0,on.byteLength);if(!Zi(r,on))throw new TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${on}, but get ${r}`);return e.slice(on.byteLength)}function nr(e){if(e.status===et.Found){if(e.value instanceof ArrayBuffer)return e.value;if(e.value instanceof Uint8Array)return e.value.buffer}}async function ci(e){switch(e[0]){case Tt.Empty:return $t(gn("ic-hashtree-empty"));case Tt.Pruned:return e[1];case Tt.Leaf:return $t(Vt(gn("ic-hashtree-leaf"),e[1]));case Tt.Labeled:return $t(Vt(gn("ic-hashtree-labeled"),e[1],await ci(e[2])));case Tt.Fork:return $t(Vt(gn("ic-hashtree-fork"),await ci(e[1]),await ci(e[2])));default:throw new Error("unreachable")}}function gn(e){const t=new Uint8Array([e.length]),r=new TextEncoder().encode(e);return Vt(t,r)}var et;(function(e){e.Unknown="unknown",e.Absent="absent",e.Found="found"})(et||(et={}));var tr;(function(e){e.Less="less",e.Greater="greater"})(tr||(tr={}));function rn(e,t){if(e.length===0)switch(t[0]){case Tt.Leaf:{if(!t[1])throw new Error("Invalid tree structure for leaf");return t[1]instanceof ArrayBuffer?{status:et.Found,value:t[1]}:t[1]instanceof Uint8Array?{status:et.Found,value:t[1].buffer}:{status:et.Found,value:t[1]}}default:return{status:et.Found,value:t}}const r=typeof e[0]=="string"?new TextEncoder().encode(e[0]):e[0],n=ui(r,t);switch(n.status){case et.Found:return rn(e.slice(1),n.value);case tr.Greater:case tr.Less:return{status:et.Absent};default:return n}}function ra(e){switch(e[0]){case Tt.Empty:return[];case Tt.Fork:return ra(e[1]).concat(ra(e[2]));default:return[e]}}function ui(e,t){switch(t[0]){case Tt.Labeled:return rd(e,t[1])?{status:tr.Greater}:Zi(e,t[1])?{status:et.Found,value:t[2]}:{status:tr.Less};case Tt.Fork:const r=ui(e,t[1]);switch(r.status){case tr.Greater:{const n=ui(e,t[2]);return n.status===tr.Less?{status:et.Absent}:n}case et.Unknown:{let n=ui(e,t[2]);return n.status===tr.Less?{status:et.Unknown}:n}default:return r}case Tt.Pruned:return{status:et.Unknown};default:return{status:et.Absent}}}function Fu(e){const{canisterId:t,subnetId:r,tree:n}=e,i=rn(["subnet",r.toUint8Array(),"canister_ranges"],n);if(i.status!==et.Found||!(i.value instanceof ArrayBuffer))throw new Error(`Could not find canister ranges for subnet ${r}`);return rr(i.value).map(m=>[Pe.fromUint8Array(m[0]),Pe.fromUint8Array(m[1])]).some(m=>m[0].ltEq(t)&&m[1].gtEq(t))}class sd{constructor(t,r,n){this.key=t,this.path=r,this.decodeStrategy=n}}const Pu=async e=>{const{agent:t,paths:r}=e,n=Pe.from(e.canisterId),i=[...new Set(r)],o=i.map(m=>na(m,n)),l=new Map,c=i.map((m,b)=>(async()=>{var B;try{const A=await t.readState(n,{paths:[o[b]]}),P=await Cr.create({certificate:A.certificate,rootKey:t.rootKey,canisterId:n}),I=(D,H)=>{if(H==="subnet"){const q=Cu(A.certificate,n,t.rootKey);return{path:H,data:q}}else return{path:H,data:nr(D.lookup(na(H,n)))}},{path:O,data:F}=I(P,i[b]);if(!F)console.warn(`Expected to find result for path ${O}, but instead found nothing.`),typeof O=="string"?l.set(O,null):l.set(O.key,null);else switch(O){case"time":{l.set(O,Oa(F));break}case"controllers":{l.set(O,od(F));break}case"module_hash":{l.set(O,Bo(F));break}case"subnet":{l.set(O,F);break}case"candid":{l.set(O,new TextDecoder().decode(F));break}default:if(typeof O!="string"&&"key"in O&&"path"in O)switch(O.decodeStrategy){case"raw":l.set(O.key,F);break;case"leb128":{l.set(O.key,Uu(F));break}case"cbor":{l.set(O.key,ku(F));break}case"hex":{l.set(O.key,Bo(F));break}case"utf-8":l.set(O.key,ad(F))}}}catch(A){if(!((B=A?.message)===null||B===void 0)&&B.includes("Invalid certificate"))throw new dt(A.message);typeof m!="string"&&"key"in m&&"path"in m?l.set(m.key,null):l.set(m,null),console.group(),console.warn(`Expected to find result for path ${m}, but instead found nothing.`),console.warn(A),console.groupEnd()}})());return await Promise.all(c),l},Cu=(e,t,r)=>{if(!t._isPrincipal)throw new Error("Invalid canisterId");const n=rr(new Uint8Array(e)),i=n.tree;let o=n.delegation,l;if(o&&o.subnet_id?l=Pe.fromUint8Array(new Uint8Array(o.subnet_id)):!o&&typeof r<"u"?(l=Pe.selfAuthenticating(new Uint8Array(r)),o={subnet_id:l.toUint8Array(),certificate:new ArrayBuffer(0)}):(l=Pe.selfAuthenticating(Pe.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array()),o={subnet_id:l.toUint8Array(),certificate:new ArrayBuffer(0)}),!Fu({canisterId:t,subnetId:l,tree:i}))throw new Error("Canister not in range");const m=rn(["subnet",o.subnet_id,"node"],i);if(m.status!==et.Found)throw new Error("Node not found");if(m.value instanceof ArrayBuffer)throw new Error("Invalid node tree");const b=ra(m.value),B=new Map;return b.forEach(A=>{const P=Pe.from(new Uint8Array(A[1])).toText(),I=rn(["public_key"],A[2]);if(I.status!==et.Found)throw new Error("Public key not found");const O=I.value;if(O.byteLength!==44)throw new Error("Invalid public key length");B.set(P,O)}),{subnetId:Pe.fromUint8Array(new Uint8Array(o.subnet_id)).toText(),nodeKeys:B}},na=(e,t)=>{const r=new TextEncoder,n=o=>new DataView(r.encode(o).buffer).buffer,i=new DataView(t.toUint8Array().buffer).buffer;switch(e){case"time":return[n("time")];case"controllers":return[n("canister"),i,n("controllers")];case"module_hash":return[n("canister"),i,n("module_hash")];case"subnet":return[n("subnet")];case"candid":return[n("canister"),i,n("metadata"),n("candid:service")];default:if("key"in e&&"path"in e)if(typeof e.path=="string"||e.path instanceof ArrayBuffer){const o=e.path,l=typeof o=="string"?n(o):o;return[n("canister"),i,n("metadata"),l]}else return e.path}throw new Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${e} was formatted correctly.`)},Bo=e=>ut(e),ku=e=>rr(e),ad=e=>new TextDecoder().decode(e),od=e=>ku(e).map(r=>Pe.fromUint8Array(new Uint8Array(r))),cd=Object.freeze(Object.defineProperty({__proto__:null,CustomPath:sd,encodePath:na,fetchNodeKeys:Cu,request:Pu},Symbol.toStringTag,{value:"Module"})),Qn=BigInt(2**32-1),ia=BigInt(32);function Mu(e,t=!1){return t?{h:Number(e&Qn),l:Number(e>>ia&Qn)}:{h:Number(e>>ia&Qn)|0,l:Number(e&Qn)|0}}function ud(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l}=Mu(e[i],t);[r[i],n[i]]=[o,l]}return[r,n]}const fd=(e,t)=>BigInt(e>>>0)<<ia|BigInt(t>>>0),ld=(e,t,r)=>e>>>r,dd=(e,t,r)=>e<<32-r|t>>>r,hd=(e,t,r)=>e>>>r|t<<32-r,pd=(e,t,r)=>e<<32-r|t>>>r,yd=(e,t,r)=>e<<64-r|t>>>r-32,gd=(e,t,r)=>e>>>r-32|t<<64-r,md=(e,t)=>t,wd=(e,t)=>e,bd=(e,t,r)=>e<<r|t>>>32-r,_d=(e,t,r)=>t<<r|e>>>32-r,Ed=(e,t,r)=>t<<r-32|e>>>64-r,xd=(e,t,r)=>e<<r-32|t>>>64-r;function Td(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}const vd=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Ad=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Bd=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Id=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,Sd=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Nd=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,Fe={fromBig:Mu,split:ud,toBig:fd,shrSH:ld,shrSL:dd,rotrSH:hd,rotrSL:pd,rotrBH:yd,rotrBL:gd,rotr32H:md,rotr32L:wd,rotlSH:bd,rotlSL:_d,rotlBH:Ed,rotlBL:xd,add:Td,add3L:vd,add3H:Ad,add4L:Bd,add4H:Id,add5H:Nd,add5L:Sd},[Rd,Od]=Fe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),hr=new Uint32Array(80),pr=new Uint32Array(80);class Ud extends oc{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:l,Dh:c,Dl:m,Eh:b,El:B,Fh:A,Fl:P,Gh:I,Gl:O,Hh:F,Hl:D}=this;return[t,r,n,i,o,l,c,m,b,B,A,P,I,O,F,D]}set(t,r,n,i,o,l,c,m,b,B,A,P,I,O,F,D){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=l|0,this.Dh=c|0,this.Dl=m|0,this.Eh=b|0,this.El=B|0,this.Fh=A|0,this.Fl=P|0,this.Gh=I|0,this.Gl=O|0,this.Hh=F|0,this.Hl=D|0}process(t,r){for(let Z=0;Z<16;Z++,r+=4)hr[Z]=t.getUint32(r),pr[Z]=t.getUint32(r+=4);for(let Z=16;Z<80;Z++){const X=hr[Z-15]|0,K=pr[Z-15]|0,j=Fe.rotrSH(X,K,1)^Fe.rotrSH(X,K,8)^Fe.shrSH(X,K,7),$=Fe.rotrSL(X,K,1)^Fe.rotrSL(X,K,8)^Fe.shrSL(X,K,7),Q=hr[Z-2]|0,he=pr[Z-2]|0,W=Fe.rotrSH(Q,he,19)^Fe.rotrBH(Q,he,61)^Fe.shrSH(Q,he,6),ce=Fe.rotrSL(Q,he,19)^Fe.rotrBL(Q,he,61)^Fe.shrSL(Q,he,6),ye=Fe.add4L($,ce,pr[Z-7],pr[Z-16]),ge=Fe.add4H(ye,j,W,hr[Z-7],hr[Z-16]);hr[Z]=ge|0,pr[Z]=ye|0}let{Ah:n,Al:i,Bh:o,Bl:l,Ch:c,Cl:m,Dh:b,Dl:B,Eh:A,El:P,Fh:I,Fl:O,Gh:F,Gl:D,Hh:H,Hl:q}=this;for(let Z=0;Z<80;Z++){const X=Fe.rotrSH(A,P,14)^Fe.rotrSH(A,P,18)^Fe.rotrBH(A,P,41),K=Fe.rotrSL(A,P,14)^Fe.rotrSL(A,P,18)^Fe.rotrBL(A,P,41),j=A&I^~A&F,$=P&O^~P&D,Q=Fe.add5L(q,K,$,Od[Z],pr[Z]),he=Fe.add5H(Q,H,X,j,Rd[Z],hr[Z]),W=Q|0,ce=Fe.rotrSH(n,i,28)^Fe.rotrBH(n,i,34)^Fe.rotrBH(n,i,39),ye=Fe.rotrSL(n,i,28)^Fe.rotrBL(n,i,34)^Fe.rotrBL(n,i,39),ge=n&o^n&c^o&c,Ae=i&l^i&m^l&m;H=F|0,q=D|0,F=I|0,D=O|0,I=A|0,O=P|0,{h:A,l:P}=Fe.add(b|0,B|0,he|0,W|0),b=c|0,B=m|0,c=o|0,m=l|0,o=n|0,l=i|0;const xe=Fe.add3L(W,ye,Ae);n=Fe.add3H(xe,he,ce,ge),i=xe|0}({h:n,l:i}=Fe.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l}=Fe.add(this.Bh|0,this.Bl|0,o|0,l|0),{h:c,l:m}=Fe.add(this.Ch|0,this.Cl|0,c|0,m|0),{h:b,l:B}=Fe.add(this.Dh|0,this.Dl|0,b|0,B|0),{h:A,l:P}=Fe.add(this.Eh|0,this.El|0,A|0,P|0),{h:I,l:O}=Fe.add(this.Fh|0,this.Fl|0,I|0,O|0),{h:F,l:D}=Fe.add(this.Gh|0,this.Gl|0,F|0,D|0),{h:H,l:q}=Fe.add(this.Hh|0,this.Hl|0,H|0,q|0),this.set(n,i,o,l,c,m,b,B,A,P,I,O,F,D,H,q)}roundClean(){hr.fill(0),pr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const $u=pa(()=>new Ud);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ut=BigInt(0),xt=BigInt(1),ei=BigInt(2),Fd=BigInt(8),Pd={zip215:!0};function Cd(e){const t=Iu(e);return kn(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Ua(e){const t=Cd(e),{Fp:r,n,prehash:i,hash:o,randomBytes:l,nByteLength:c,h:m}=t,b=ei<<BigInt(c*8)-xt,B=r.create,A=t.uvRatio||((ee,z)=>{try{return{isValid:!0,value:r.sqrt(ee*r.inv(z))}}catch{return{isValid:!1,value:Ut}}}),P=t.adjustScalarBytes||(ee=>ee),I=t.domain||((ee,z,se)=>{if(z.length||se)throw new Error("Contexts/pre-hash are not supported");return ee}),O=ee=>typeof ee=="bigint"&&Ut<ee,F=(ee,z)=>O(ee)&&O(z)&&ee<z,D=ee=>ee===Ut||F(ee,b);function H(ee,z){if(F(ee,z))return ee;throw new Error(`Expected valid scalar < ${z}, got ${typeof ee} ${ee}`)}function q(ee){return ee===Ut?ee:H(ee,n)}const Z=new Map;function X(ee){if(!(ee instanceof K))throw new Error("ExtendedPoint expected")}class K{constructor(z,se,Y,ie){if(this.ex=z,this.ey=se,this.ez=Y,this.et=ie,!D(z))throw new Error("x required");if(!D(se))throw new Error("y required");if(!D(Y))throw new Error("z required");if(!D(ie))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(z){if(z instanceof K)throw new Error("extended point not allowed");const{x:se,y:Y}=z||{};if(!D(se)||!D(Y))throw new Error("invalid affine point");return new K(se,Y,xt,B(se*Y))}static normalizeZ(z){const se=r.invertBatch(z.map(Y=>Y.ez));return z.map((Y,ie)=>Y.toAffine(se[ie])).map(K.fromAffine)}_setWindowSize(z){this._WINDOW_SIZE=z,Z.delete(this)}assertValidity(){const{a:z,d:se}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:Y,ey:ie,ez:oe,et:E}=this,le=B(Y*Y),pe=B(ie*ie),ve=B(oe*oe),ae=B(ve*ve),ue=B(le*z),w=B(ve*B(ue+pe)),s=B(ae+B(se*B(le*pe)));if(w!==s)throw new Error("bad point: equation left != right (1)");const h=B(Y*ie),_=B(oe*E);if(h!==_)throw new Error("bad point: equation left != right (2)")}equals(z){X(z);const{ex:se,ey:Y,ez:ie}=this,{ex:oe,ey:E,ez:le}=z,pe=B(se*le),ve=B(oe*ie),ae=B(Y*le),ue=B(E*ie);return pe===ve&&ae===ue}is0(){return this.equals(K.ZERO)}negate(){return new K(B(-this.ex),this.ey,this.ez,B(-this.et))}double(){const{a:z}=t,{ex:se,ey:Y,ez:ie}=this,oe=B(se*se),E=B(Y*Y),le=B(ei*B(ie*ie)),pe=B(z*oe),ve=se+Y,ae=B(B(ve*ve)-oe-E),ue=pe+E,w=ue-le,s=pe-E,h=B(ae*w),_=B(ue*s),T=B(ae*s),N=B(w*ue);return new K(h,_,N,T)}add(z){X(z);const{a:se,d:Y}=t,{ex:ie,ey:oe,ez:E,et:le}=this,{ex:pe,ey:ve,ez:ae,et:ue}=z;if(se===BigInt(-1)){const M=B((oe-ie)*(ve+pe)),G=B((oe+ie)*(ve-pe)),ne=B(G-M);if(ne===Ut)return this.double();const fe=B(E*ei*ue),be=B(le*ei*ae),y=be+fe,f=G+M,d=be-fe,v=B(y*ne),C=B(f*d),L=B(y*d),V=B(ne*f);return new K(v,C,V,L)}const w=B(ie*pe),s=B(oe*ve),h=B(le*Y*ue),_=B(E*ae),T=B((ie+oe)*(pe+ve)-w-s),N=_-h,p=_+h,a=B(s-se*w),u=B(T*N),g=B(p*a),x=B(T*a),S=B(N*p);return new K(u,g,S,x)}subtract(z){return this.add(z.negate())}wNAF(z){return Q.wNAFCached(this,Z,z,K.normalizeZ)}multiply(z){const{p:se,f:Y}=this.wNAF(H(z,n));return K.normalizeZ([se,Y])[0]}multiplyUnsafe(z){let se=q(z);return se===Ut?$:this.equals($)||se===xt?this:this.equals(j)?this.wNAF(se).p:Q.unsafeLadder(this,se)}isSmallOrder(){return this.multiplyUnsafe(m).is0()}isTorsionFree(){return Q.unsafeLadder(this,n).is0()}toAffine(z){const{ex:se,ey:Y,ez:ie}=this,oe=this.is0();z==null&&(z=oe?Fd:r.inv(ie));const E=B(se*z),le=B(Y*z),pe=B(ie*z);if(oe)return{x:Ut,y:xt};if(pe!==xt)throw new Error("invZ was invalid");return{x:E,y:le}}clearCofactor(){const{h:z}=t;return z===xt?this:this.multiplyUnsafe(z)}static fromHex(z,se=!1){const{d:Y,a:ie}=t,oe=r.BYTES;z=_t("pointHex",z,oe);const E=z.slice(),le=z[oe-1];E[oe-1]=le&-129;const pe=Tn(E);pe===Ut||(se?H(pe,b):H(pe,r.ORDER));const ve=B(pe*pe),ae=B(ve-xt),ue=B(Y*ve-ie);let{isValid:w,value:s}=A(ae,ue);if(!w)throw new Error("Point.fromHex: invalid y coordinate");const h=(s&xt)===xt,_=(le&128)!==0;if(!se&&s===Ut&&_)throw new Error("Point.fromHex: x=0 and x_0=1");return _!==h&&(s=B(-s)),K.fromAffine({x:s,y:pe})}static fromPrivateKey(z){return ce(z).point}toRawBytes(){const{x:z,y:se}=this.toAffine(),Y=Pi(se,r.BYTES);return Y[Y.length-1]|=z&xt?128:0,Y}toHex(){return Vr(this.toRawBytes())}}K.BASE=new K(t.Gx,t.Gy,xt,B(t.Gx*t.Gy)),K.ZERO=new K(Ut,xt,xt,Ut);const{BASE:j,ZERO:$}=K,Q=Bu(K,c*8);function he(ee){return ze(ee,n)}function W(ee){return he(Tn(ee))}function ce(ee){const z=c;ee=_t("private key",ee,z);const se=_t("hashed private key",o(ee),2*z),Y=P(se.slice(0,z)),ie=se.slice(z,2*z),oe=W(Y),E=j.multiply(oe),le=E.toRawBytes();return{head:Y,prefix:ie,scalar:oe,point:E,pointBytes:le}}function ye(ee){return ce(ee).pointBytes}function ge(ee=new Uint8Array,...z){const se=Qe(...z);return W(o(I(se,_t("context",ee),!!i)))}function Ae(ee,z,se={}){ee=_t("message",ee),i&&(ee=i(ee));const{prefix:Y,scalar:ie,pointBytes:oe}=ce(z),E=ge(se.context,Y,ee),le=j.multiply(E).toRawBytes(),pe=ge(se.context,le,oe,ee),ve=he(E+pe*ie);q(ve);const ae=Qe(le,Pi(ve,r.BYTES));return _t("result",ae,c*2)}const xe=Pd;function J(ee,z,se,Y=xe){const{context:ie,zip215:oe}=Y,E=r.BYTES;ee=_t("signature",ee,2*E),z=_t("message",z),i&&(z=i(z));const le=Tn(ee.slice(E,2*E));let pe,ve,ae;try{pe=K.fromHex(se,oe),ve=K.fromHex(ee.slice(0,E),oe),ae=j.multiplyUnsafe(le)}catch{return!1}if(!oe&&pe.isSmallOrder())return!1;const ue=ge(ie,ve.toRawBytes(),pe.toRawBytes(),z);return ve.add(pe.multiplyUnsafe(ue)).subtract(ae).clearCofactor().equals(K.ZERO)}return j._setWindowSize(8),{CURVE:t,getPublicKey:ye,sign:Ae,verify:J,ExtendedPoint:K,utils:{getExtendedPublicKey:ce,randomPrivateKey:()=>l(r.BYTES),precompute(ee=8,z=K.BASE){return z._setWindowSize(ee),z.multiply(BigInt(3)),z}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fa=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Io=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const kd=BigInt(1),sa=BigInt(2),Md=BigInt(5),So=BigInt(10),$d=BigInt(20),Vd=BigInt(40),No=BigInt(80);function Ld(e){const t=Fa,n=e*e%t*e%t,i=Gt(n,sa,t)*n%t,o=Gt(i,kd,t)*e%t,l=Gt(o,Md,t)*o%t,c=Gt(l,So,t)*l%t,m=Gt(c,$d,t)*c%t,b=Gt(m,Vd,t)*m%t,B=Gt(b,No,t)*b%t,A=Gt(B,No,t)*b%t,P=Gt(A,So,t)*l%t;return{pow_p_5_8:Gt(P,sa,t)*e%t,b2:n}}function Dd(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function qd(e,t){const r=Fa,n=ze(t*t*t,r),i=ze(n*n*t,r),o=Ld(e*i).pow_p_5_8;let l=ze(e*n*o,r);const c=ze(t*l*l,r),m=l,b=ze(l*Io,r),B=c===e,A=c===ze(-e,r),P=c===ze(-e*Io,r);return B&&(l=m),(A||P)&&(l=b),A0(l,r)&&(l=ze(-l,r)),{isValid:B||A,value:l}}const ar=Sa(Fa,void 0,!0),Pa={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ar,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:$u,randomBytes:ac,adjustScalarBytes:Dd,uvRatio:qd},jr=Ua(Pa);function Vu(e,t,r){if(t.length>255)throw new Error("Context is too big");return zf(ic("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,t.length]),t,e)}({...Pa});({...Pa});const Gd=(ar.ORDER+BigInt(3))/BigInt(8);ar.pow(sa,Gd);ar.sqrt(ar.neg(ar.ONE));(ar.ORDER-BigInt(5))/BigInt(8);BigInt(486662);I0(ar,ar.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Ro=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},yt=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},lt,mn,Lu,Du;class Hd{constructor(t={}){lt.set(this,void 0),mn.set(this,void 0),this[Lu]=this.entries.bind(this),this[Du]="ExpirableMap";const{source:r=[],expirationTime:n=10*60*1e3}=t,i=Date.now();Ro(this,lt,new Map([...r].map(([o,l])=>[o,{value:l,timestamp:i}])),"f"),Ro(this,mn,n,"f")}prune(){const t=Date.now();for(const[r,n]of yt(this,lt,"f").entries())t-n.timestamp>yt(this,mn,"f")&&yt(this,lt,"f").delete(r);return this}set(t,r){this.prune();const n={value:r,timestamp:Date.now()};return yt(this,lt,"f").set(t,n),this}get(t){const r=yt(this,lt,"f").get(t);if(r!==void 0){if(Date.now()-r.timestamp>yt(this,mn,"f")){yt(this,lt,"f").delete(t);return}return r.value}}clear(){yt(this,lt,"f").clear()}entries(){const t=yt(this,lt,"f").entries();return function*(){for(const[n,i]of t)yield[n,i.value]}()}values(){const t=yt(this,lt,"f").values();return function*(){for(const n of t)yield n.value}()}keys(){return yt(this,lt,"f").keys()}forEach(t,r){for(const[n,i]of yt(this,lt,"f").entries())t.call(r,i.value,n,this)}has(t){return yt(this,lt,"f").has(t)}delete(t){return yt(this,lt,"f").delete(t)}get size(){return yt(this,lt,"f").size}}lt=new WeakMap,mn=new WeakMap,Lu=Symbol.iterator,Du=Symbol.toStringTag;const Oo=e=>{if(e<=127)return 1;if(e<=255)return 2;if(e<=65535)return 3;if(e<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},Uo=(e,t,r)=>{if(r<=127)return e[t]=r,1;if(r<=255)return e[t]=129,e[t+1]=r,2;if(r<=65535)return e[t]=130,e[t+1]=r>>8,e[t+2]=r,3;if(r<=16777215)return e[t]=131,e[t+1]=r>>16,e[t+2]=r>>8,e[t+3]=r,4;throw new Error("Length too long (> 4 bytes)")},aa=(e,t)=>{if(e[t]<128)return 1;if(e[t]===128)throw new Error("Invalid length 0");if(e[t]===129)return 2;if(e[t]===130)return 3;if(e[t]===131)return 4;throw new Error("Length too long (> 4 bytes)")},jd=(e,t)=>{const r=aa(e,t);if(r===1)return e[t];if(r===2)return e[t+1];if(r===3)return(e[t+1]<<8)+e[t+2];if(r===4)return(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];throw new Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const Mi=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function qu(e,t){const r=2+Oo(e.byteLength+1),n=t.byteLength+r+e.byteLength;let i=0;const o=new Uint8Array(1+Oo(n)+n);return o[i++]=48,i+=Uo(o,i,n),o.set(t,i),i+=t.byteLength,o[i++]=3,i+=Uo(o,i,e.byteLength+1),o[i++]=0,o.set(new Uint8Array(e),i),o}const Gu=(e,t)=>{let r=0;const n=(c,m)=>{if(i[r++]!==c)throw new Error("Expected: "+m)},i=new Uint8Array(e);if(n(48,"sequence"),r+=aa(i,r),!Zi(i.slice(r,r+t.byteLength),t))throw new Error("Not the expected OID.");r+=t.byteLength,n(3,"bit string");const o=jd(i,r)-1;r+=aa(i,r),n(0,"0 padding");const l=i.slice(r);if(o!==l.length)throw new Error(`DER payload mismatch: Expected length ${o} actual length ${l.length}`);return l};var Fo=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},Po=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},fi,li;let Hu=class wn{constructor(t){if(fi.set(this,void 0),li.set(this,void 0),t.byteLength!==wn.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");Fo(this,fi,t,"f"),Fo(this,li,wn.derEncode(t),"f")}static from(t){return this.fromDer(t.toDer())}static fromRaw(t){return new wn(t)}static fromDer(t){return new wn(this.derDecode(t))}static derEncode(t){return qu(t,Mi).buffer}static derDecode(t){const r=Gu(t,Mi);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return Po(this,fi,"f")}get derKey(){return Po(this,li,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}};fi=new WeakMap,li=new WeakMap;Hu.RAW_KEY_LENGTH=32;class zd{constructor(){this.observers=[]}subscribe(t){this.observers.push(t)}unsubscribe(t){this.observers=this.observers.filter(r=>r!==t)}notify(t,...r){this.observers.forEach(n=>n(t,...r))}}class Kd extends zd{constructor(){super()}print(t,...r){this.notify({message:t,level:"info"},...r)}warn(t,...r){this.notify({message:t,level:"warn"},...r)}error(t,r,...n){this.notify({message:t,level:"error",error:r},...n)}}var Ht=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},ft=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},jt,di,hi,pi,yi,gi,mi,wi,zr;const ju=.5,zu=1.5,Ku=500,Wu=6e4,Yu=9e5,Zu=10;class ns{constructor(t=ns.default){jt.set(this,void 0),di.set(this,void 0),hi.set(this,void 0),pi.set(this,void 0),yi.set(this,void 0),gi.set(this,void 0),mi.set(this,void 0),wi.set(this,void 0),zr.set(this,0);const{initialInterval:r=Ku,randomizationFactor:n=ju,multiplier:i=zu,maxInterval:o=Wu,maxElapsedTime:l=Yu,maxIterations:c=Zu,date:m=Date}=t;Ht(this,jt,r,"f"),Ht(this,di,n,"f"),Ht(this,hi,i,"f"),Ht(this,pi,o,"f"),Ht(this,wi,m,"f"),Ht(this,yi,m.now(),"f"),Ht(this,gi,l,"f"),Ht(this,mi,c,"f")}get ellapsedTimeInMsec(){return ft(this,wi,"f").now()-ft(this,yi,"f")}get currentInterval(){return ft(this,jt,"f")}get count(){return ft(this,zr,"f")}get randomValueFromInterval(){const t=ft(this,di,"f")*ft(this,jt,"f"),r=ft(this,jt,"f")-t,n=ft(this,jt,"f")+t;return Math.random()*(n-r)+r}incrementCurrentInterval(){var t;return Ht(this,jt,Math.min(ft(this,jt,"f")*ft(this,hi,"f"),ft(this,pi,"f")),"f"),Ht(this,zr,(t=ft(this,zr,"f"),t++,t),"f"),ft(this,jt,"f")}next(){return this.ellapsedTimeInMsec>=ft(this,gi,"f")||ft(this,zr,"f")>=ft(this,mi,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}jt=new WeakMap,di=new WeakMap,hi=new WeakMap,pi=new WeakMap,yi=new WeakMap,gi=new WeakMap,mi=new WeakMap,wi=new WeakMap,zr=new WeakMap;ns.default={initialInterval:Ku,randomizationFactor:ju,multiplier:zu,maxInterval:Wu,maxElapsedTime:Yu,maxIterations:Zu,date:Date};var bt=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},me=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Xt,zt,wr,Xr,bn,_n,Pt,bi,kt,Sr,En,Kr,Wr,Nr,Fr,Xu,_i,Ei,er;(function(e){e.Received="received",e.Processing="processing",e.Replied="replied",e.Rejected="rejected",e.Unknown="unknown",e.Done="done"})(er||(er={}));const ti=5*60*1e3,Wd="308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae",Yd="ic0.app",Zd=".ic0.app",Xd="icp0.io",Jd=".icp0.io",Qd="icp-api.io",eh=".icp-api.io";class Is extends dt{constructor(t){super(t),this.message=t}}class ri extends dt{constructor(t){super(t),this.message=t}}function th(){let e;if(typeof window<"u")if(window.fetch)e=window.fetch.bind(window);else throw new Is("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");else if(typeof global<"u")if(global.fetch)e=global.fetch.bind(global);else throw new Is("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.");else typeof self<"u"&&self.fetch&&(e=self.fetch.bind(self));if(e)return e;throw new Is("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}function rh(e){let t;if(e!==void 0)!e.match(/^[a-z]+:/)&&typeof window<"u"?t=new URL(window.location.protocol+"//"+e):t=new URL(e);else{const r=["ic0.app","icp0.io","127.0.0.1","localhost"],n=[".github.dev",".gitpod.io"],i=typeof window<"u"?window.location:void 0,o=i?.hostname;let l;o&&typeof o=="string"&&(n.some(c=>o.endsWith(c))?l=o:l=r.find(c=>o.endsWith(c))),i&&l?t=new URL(`${i.protocol}//${l}${i.port?":"+i.port:""}`):t=new URL("https://icp-api.io")}return t.toString()}class Jr{constructor(t={}){var r;Xt.add(this),zt.set(this,void 0),wr.set(this,void 0),Xr.set(this,void 0),bn.set(this,void 0),_n.set(this,0),Pt.set(this,void 0),bi.set(this,!1),kt.set(this,void 0),Sr.set(this,void 0),this._isAgent=!0,this.config={},En.set(this,0),this.log=new Kd,Kr.set(this,[]),Wr.set(this,[]),Nr.set(this,new Hd({expirationTime:5*60*1e3})),Fr.set(this,!0),Ei.set(this,(o,l)=>{if(me(this,Fr,"f")===!1)return o;if(!l)throw new Wt("Invalid signature from replica signed query: no matching node key found.");const{status:c,signatures:m=[],requestId:b}=o,B=new TextEncoder().encode("\vic-response");for(const A of m){const{timestamp:P,identity:I}=A,O=Pe.fromUint8Array(I).toText();let F;if(c==="replied"){const{reply:X}=o;F=Ui({status:c,reply:X,timestamp:BigInt(P),request_id:b})}else if(c==="rejected"){const{reject_code:X,reject_message:K,error_code:j}=o;F=Ui({status:c,reject_code:X,reject_message:K,error_code:j,timestamp:BigInt(P),request_id:b})}else throw new Error(`Unknown status: ${c}`);const D=Vt(B,new Uint8Array(F)),H=l?.nodeKeys.get(O);if(!H)throw new Wt("Invalid signature from replica signed query: no matching node key found.");const q=Hu.fromDer(H).rawKey;if(jr.verify(A.signature,new Uint8Array(D),new Uint8Array(q)))return o;throw new Wt(`Invalid signature from replica ${O} signed query.`)}return o}),this.config=t,bt(this,wr,t.fetch||th()||fetch.bind(global),"f"),bt(this,Xr,t.fetchOptions,"f"),bt(this,bn,t.callOptions,"f"),this.rootKey=t.rootKey?t.rootKey:sr(Wd);const n=rh(t.host);this.host=new URL(n),t.verifyQuerySignatures!==void 0&&bt(this,Fr,t.verifyQuerySignatures,"f"),bt(this,kt,(r=t.retryTimes)!==null&&r!==void 0?r:3,"f");const i=()=>new ns({maxIterations:me(this,kt,"f")});if(bt(this,Sr,t.backoffStrategy||i,"f"),this.host.hostname.endsWith(Zd)?this.host.hostname=Yd:this.host.hostname.endsWith(Jd)?this.host.hostname=Xd:this.host.hostname.endsWith(eh)&&(this.host.hostname=Qd),t.credentials){const{name:o,password:l}=t.credentials;bt(this,Pt,`${o}${l?":"+l:""}`,"f")}bt(this,zt,Promise.resolve(t.identity||new Fi),"f"),this.addTransform("update",eo(Js)),t.useQueryNonces&&this.addTransform("query",eo(Js)),t.logToConsole&&this.log.subscribe(o=>{o.level==="error"?console.error(o.message):o.level==="warn"?console.warn(o.message):console.log(o.message)})}get waterMark(){return me(this,En,"f")}static createSync(t={}){return new this(Object.assign({},t))}static async create(t={shouldFetchRootKey:!1}){const r=Jr.createSync(t),n=[r.syncTime()];return r.host.toString()!=="https://icp-api.io"&&t.shouldFetchRootKey&&n.push(r.fetchRootKey()),await Promise.all(n),r}static async from(t){var r;try{return"config"in t?await Jr.create(t.config):await Jr.create({fetch:t._fetch,fetchOptions:t._fetchOptions,callOptions:t._callOptions,host:t._host.toString(),identity:(r=t._identity)!==null&&r!==void 0?r:void 0})}catch{throw new dt("Failed to create agent from provided agent")}}isLocal(){const t=this.host.hostname;return t==="127.0.0.1"||t.endsWith("127.0.0.1")}addTransform(t,r,n=r.priority||0){if(t==="update"){const i=me(this,Wr,"f").findIndex(o=>(o.priority||0)<n);me(this,Wr,"f").splice(i>=0?i:me(this,Wr,"f").length,0,Object.assign(r,{priority:n}))}else if(t==="query"){const i=me(this,Kr,"f").findIndex(o=>(o.priority||0)<n);me(this,Kr,"f").splice(i>=0?i:me(this,Kr,"f").length,0,Object.assign(r,{priority:n}))}}async getPrincipal(){if(!me(this,zt,"f"))throw new ri("This identity has expired due this application's security policy. Please refresh your authentication.");return(await me(this,zt,"f")).getPrincipal()}async call(t,r,n){var i;const o=(i=r.callSync)!==null&&i!==void 0?i:!0,l=await(n!==void 0?await n:await me(this,zt,"f"));if(!l)throw new ri("This identity has expired due this application's security policy. Please refresh your authentication.");const c=Pe.from(t),m=r.effectiveCanisterId?Pe.from(r.effectiveCanisterId):c,b=l.getPrincipal()||Pe.anonymous();let B=new Wn(ti);Math.abs(me(this,_n,"f"))>1e3*30&&(B=new Wn(ti+me(this,_n,"f")));const A={request_type:Xs.Call,canister_id:c,method_name:r.methodName,arg:r.arg,sender:b,ingress_expiry:B};let P=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},me(this,Pt,"f")?{Authorization:"Basic "+btoa(me(this,Pt,"f"))}:{})},endpoint:"call",body:A});const I=P.body.nonce?O(P.body.nonce):void 0;A.nonce=I;function O(H){return new Uint8Array(H)}P=await l.transformRequest(P);const F=Es(P.body),D=me(this,Sr,"f").call(this);try{const H=()=>(this.log.print(`fetching "/api/v3/canister/${m.toText()}/call" with request:`,P),me(this,wr,"f").call(this,""+new URL(`/api/v3/canister/${m.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},me(this,bn,"f")),P.request),{body:F}))),q=()=>(this.log.print(`fetching "/api/v2/canister/${m.toText()}/call" with request:`,P),me(this,wr,"f").call(this,""+new URL(`/api/v2/canister/${m.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},me(this,bn,"f")),P.request),{body:F}))),Z=me(this,Xt,"m",_i).call(this,{request:o?H:q,backoff:D,tries:0}),[X,K]=await Promise.all([Z,In(A)]),j=await X.arrayBuffer(),$=X.status===200&&j.byteLength>0?rr(j):null;if($?.certificate){const Q=await this.parseTimeFromResponse({certificate:$.certificate});bt(this,En,Q,"f")}return{requestId:K,response:{ok:X.ok,status:X.status,statusText:X.statusText,body:$,headers:yn(X.headers)},requestDetails:A}}catch(H){if(H.message.includes("v3 api not supported."))return this.log.warn("v3 api not supported. Fall back to v2"),this.call(t,Object.assign(Object.assign({},r),{callSync:!1}),n);throw this.log.error("Error while making call:",H),H}}async query(t,r,n){const i=me(this,Sr,"f").call(this),o=r.effectiveCanisterId?Pe.from(r.effectiveCanisterId):Pe.from(t);this.log.print(`ecid ${o.toString()}`),this.log.print(`canisterId ${t.toString()}`);const l=async()=>{const I=await(n!==void 0?await n:await me(this,zt,"f"));if(!I)throw new ri("This identity has expired due this application's security policy. Please refresh your authentication.");const O=Pe.from(t),F=I?.getPrincipal()||Pe.anonymous(),D={request_type:"query",canister_id:O,method_name:r.methodName,arg:r.arg,sender:F,ingress_expiry:new Wn(ti)},H=await In(D);let q=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},me(this,Pt,"f")?{Authorization:"Basic "+btoa(me(this,Pt,"f"))}:{})},endpoint:"read",body:D});q=await I?.transformRequest(q);const Z=Es(q.body),X={canister:O.toText(),ecid:o,transformedRequest:q,body:Z,requestId:H,backoff:i,tries:0};return{requestDetails:D,query:await me(this,Xt,"m",Xu).call(this,X)}},c=async()=>{if(!me(this,Fr,"f"))return;const I=me(this,Nr,"f").get(o.toString());return I||(await this.fetchSubnetKeys(o.toString()),me(this,Nr,"f").get(o.toString()))},[m,b]=await Promise.all([l(),c()]),{requestDetails:B,query:A}=m,P=Object.assign(Object.assign({},A),{requestDetails:B});if(this.log.print("Query response:",P),!me(this,Fr,"f"))return P;try{return me(this,Ei,"f").call(this,P,b)}catch{this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),me(this,Nr,"f").delete(t.toString()),await this.fetchSubnetKeys(o.toString());const O=me(this,Nr,"f").get(t.toString());if(!O)throw new Wt("Invalid signature from replica signed query: no matching node key found.");return me(this,Ei,"f").call(this,P,O)}}async createReadStateRequest(t,r){const n=await(r!==void 0?await r:await me(this,zt,"f"));if(!n)throw new ri("This identity has expired due this application's security policy. Please refresh your authentication.");const i=n?.getPrincipal()||Pe.anonymous(),o=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},me(this,Pt,"f")?{Authorization:"Basic "+btoa(me(this,Pt,"f"))}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:t.paths,sender:i,ingress_expiry:new Wn(ti)}});return n?.transformRequest(o)}async readState(t,r,n,i){const o=typeof t=="string"?Pe.fromText(t):t,l=i??await this.createReadStateRequest(r,n),c=Es(l.body);this.log.print(`fetching "/api/v2/canister/${o}/read_state" with request:`,l);const m=me(this,Sr,"f").call(this);try{const b=await me(this,Xt,"m",_i).call(this,{request:()=>me(this,wr,"f").call(this,""+new URL(`/api/v2/canister/${o.toString()}/read_state`,this.host),Object.assign(Object.assign(Object.assign({},me(this,Xr,"f")),l.request),{body:c})),backoff:m,tries:0});if(!b.ok)throw new Error(`Server returned an error:
  Code: ${b.status} (${b.statusText})
  Body: ${await b.text()}
`);const B=rr(await b.arrayBuffer());this.log.print("Read state response:",B);const A=await this.parseTimeFromResponse(B);return A>0&&(this.log.print("Read state response time:",A),bt(this,En,A,"f")),B}catch(b){throw this.log.error("Caught exception while attempting to read state",b),b}}async parseTimeFromResponse(t){let r;if(t.certificate){const n=rr(t.certificate);if(n&&"tree"in n)r=n.tree;else throw new Error("Could not decode time from response");const i=rn(["time"],r);if(i.status!==et.Found)throw new Error("Time was not found in the response or was not in its expected format.");if(!(i.value instanceof ArrayBuffer)&&!ArrayBuffer.isView(i))throw new Error("Time was not found in the response or was not in its expected format.");const o=Oa(xa(i.value));return this.log.print("Time from response:",o),this.log.print("Time from response in milliseconds:",Number(o)),Number(o)}else this.log.warn("No certificate found in response");return 0}async syncTime(t){const r=await xf(()=>Promise.resolve().then(()=>cd),void 0,import.meta.url),n=Date.now();try{t||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");const o=(await r.request({canisterId:t??Pe.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:this,paths:["time"]})).get("time");o&&bt(this,_n,Number(o)-Number(n),"f")}catch(i){this.log.error("Caught exception while attempting to sync time",i)}}async status(){const t=me(this,Pt,"f")?{Authorization:"Basic "+btoa(me(this,Pt,"f"))}:{};this.log.print('fetching "/api/v2/status"');const r=me(this,Sr,"f").call(this),n=await me(this,Xt,"m",_i).call(this,{backoff:r,request:()=>me(this,wr,"f").call(this,""+new URL("/api/v2/status",this.host),Object.assign({headers:t},me(this,Xr,"f"))),tries:0});return rr(await n.arrayBuffer())}async fetchRootKey(){if(!me(this,bi,"f")){const t=await this.status();this.rootKey=t.root_key,bt(this,bi,!0,"f")}return this.rootKey}invalidateIdentity(){bt(this,zt,null,"f")}replaceIdentity(t){bt(this,zt,Promise.resolve(t),"f")}async fetchSubnetKeys(t){const r=Pe.from(t),i=(await Pu({canisterId:r,paths:["subnet"],agent:this})).get("subnet");if(i&&typeof i=="object"&&"nodeKeys"in i)return me(this,Nr,"f").set(r.toText(),i),i}_transform(t){let r=Promise.resolve(t);if(t.endpoint==="call")for(const n of me(this,Wr,"f"))r=r.then(i=>n(i).then(o=>o||i));else for(const n of me(this,Kr,"f"))r=r.then(i=>n(i).then(o=>o||i));return r}}zt=new WeakMap,wr=new WeakMap,Xr=new WeakMap,bn=new WeakMap,_n=new WeakMap,Pt=new WeakMap,bi=new WeakMap,kt=new WeakMap,Sr=new WeakMap,En=new WeakMap,Kr=new WeakMap,Wr=new WeakMap,Nr=new WeakMap,Fr=new WeakMap,Ei=new WeakMap,Xt=new WeakSet,Xu=async function e(t){var r,n;const{ecid:i,transformedRequest:o,body:l,requestId:c,backoff:m,tries:b}=t,B=b===0?0:m.next();if(this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with tries:`,{tries:b,backoff:m,delay:B}),B===null)throw new dt(`Timestamp failed to pass the watermark after retrying the configured ${me(this,kt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);B>0&&await new Promise(O=>setTimeout(O,B));let A;try{this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with request:`,o);const O=await me(this,wr,"f").call(this,""+new URL(`/api/v2/canister/${i.toString()}/query`,this.host),Object.assign(Object.assign(Object.assign({},me(this,Xr,"f")),o.request),{body:l}));if(O.status===200){const F=rr(await O.arrayBuffer());A=Object.assign(Object.assign({},F),{httpDetails:{ok:O.ok,status:O.status,statusText:O.statusText,headers:yn(O.headers)},requestId:c})}else throw new xs(`Gateway returned an error:
  Code: ${O.status} (${O.statusText})
  Body: ${await O.text()}
`,{ok:O.ok,status:O.status,statusText:O.statusText,headers:yn(O.headers)})}catch(O){if(b<me(this,kt,"f"))return this.log.warn(`Caught exception while attempting to make query:
  ${O}
  Retrying query.`),await me(this,Xt,"m",e).call(this,Object.assign(Object.assign({},t),{tries:b+1}));throw O}const P=(n=(r=A.signatures)===null||r===void 0?void 0:r[0])===null||n===void 0?void 0:n.timestamp;if(!me(this,Fr,"f"))return A;if(!P)throw new Error("Timestamp not found in query response. This suggests a malformed or malicious response.");const I=Number(BigInt(P)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:I}),Number(this.waterMark)>I){const O=new dt("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",O,{timestamp:P,waterMark:this.waterMark}),b<me(this,kt,"f"))return await me(this,Xt,"m",e).call(this,Object.assign(Object.assign({},t),{tries:b+1}));throw new dt(`Timestamp failed to pass the watermark after retrying the configured ${me(this,kt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return A},_i=async function e(t){const{request:r,backoff:n,tries:i}=t,o=i===0?0:n.next();if(o===null)throw new dt(`Timestamp failed to pass the watermark after retrying the configured ${me(this,kt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);o>0&&await new Promise(b=>setTimeout(b,o));let l;try{l=await r()}catch(b){if(me(this,kt,"f")>i)return this.log.warn(`Caught exception while attempting to make request:
  ${b}
  Retrying request.`),await me(this,Xt,"m",e).call(this,{request:r,backoff:n,tries:i+1});throw b}if(l.ok)return l;const c=await l.clone().text(),m=`Server returned an error:
  Code: ${l.status} (${l.statusText})
  Body: ${c}
`;if(l.status===404&&l.url.includes("api/v3"))throw new xs("v3 api not supported. Fall back to v2",{ok:l.ok,status:l.status,statusText:l.statusText,headers:yn(l.headers)});if(i<me(this,kt,"f"))return await me(this,Xt,"m",e).call(this,{request:r,backoff:n,tries:i+1});throw new xs(m,{ok:l.ok,status:l.status,statusText:l.statusText,headers:yn(l.headers)})};var Co;(function(e){e.Error="err",e.GetPrincipal="gp",e.GetPrincipalResponse="gpr",e.Query="q",e.QueryResponse="qr",e.Call="c",e.CallResponse="cr",e.ReadState="rs",e.ReadStateResponse="rsr",e.Status="s",e.StatusResponse="sr"})(Co||(Co={}));function ko(){const e=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.ic.agent:global.ic.agent:window.ic.agent;if(!e)throw new Error("No Agent could be found.");return e}const nh=5*60*1e3;function Ju(){return ch(sh(ih(),1e3),oh(1e3,1.2),ah(nh))}function ih(){let e=!0;return async()=>e?(e=!1,!0):!1}function sh(e,t){return async(r,n,i)=>{if(await e(r,n,i))return new Promise(o=>setTimeout(o,t))}}function ah(e){const t=Date.now()+e;return async(r,n,i)=>{if(Date.now()>t)throw new Error(`Request timed out after ${e} msec:
  Request ID: ${ut(n)}
  Request status: ${i}
`)}}function oh(e,t){let r=e;return()=>new Promise(n=>setTimeout(()=>{r*=t,n()},r))}function ch(...e){return async(t,r,n)=>{for(const i of e)await i(t,r,n)}}async function Qu(e,t,r,n=Ju(),i,o){var l;const c=[new TextEncoder().encode("request_status"),r],m=i??await((l=e.createReadStateRequest)===null||l===void 0?void 0:l.call(e,{paths:[c]})),b=await e.readState(t,{paths:[c]},void 0,m);if(e.rootKey==null)throw new Error("Agent root key not initialized before polling");const B=await Cr.create({certificate:b.certificate,rootKey:e.rootKey,canisterId:t,blsVerify:o}),A=nr(B.lookup([...c,new TextEncoder().encode("status")]));let P;switch(typeof A>"u"?P=er.Unknown:P=new TextDecoder().decode(A),P){case er.Replied:return{reply:nr(B.lookup([...c,"reply"])),certificate:B};case er.Received:case er.Unknown:case er.Processing:return await n(t,r,P),Qu(e,t,r,n,m,o);case er.Rejected:{const I=new Uint8Array(nr(B.lookup([...c,"reject_code"])))[0],O=new TextDecoder().decode(nr(B.lookup([...c,"reject_message"])));throw new Error(`Call was rejected:
  Request ID: ${ut(r)}
  Reject code: ${I}
  Reject text: ${O}
`)}case er.Done:throw new Error(`Call was marked as done but we never saw the reply:
  Request ID: ${ut(r)}
`)}throw new Error("unreachable")}const uh=({IDL:e})=>{const t=e.Variant({mainnet:e.Null,testnet:e.Null}),r=e.Text,n=e.Record({network:t,address:r,min_confirmations:e.Opt(e.Nat32)}),i=e.Nat64,o=i,l=e.Record({network:t}),c=e.Nat64,m=e.Vec(c),b=e.Record({network:t,filter:e.Opt(e.Variant({page:e.Vec(e.Nat8),min_confirmations:e.Nat32})),address:r}),B=e.Vec(e.Nat8),A=e.Record({txid:e.Vec(e.Nat8),vout:e.Nat32}),P=e.Record({height:e.Nat32,value:i,outpoint:A}),I=e.Record({next_page:e.Opt(e.Vec(e.Nat8)),tip_height:e.Nat32,tip_block_hash:B,utxos:e.Vec(P)}),O=e.Record({transaction:e.Vec(e.Nat8),network:t}),F=e.Principal,D=e.Record({canister_id:F,num_requested_changes:e.Opt(e.Nat64)}),H=e.Variant({from_user:e.Record({user_id:e.Principal}),from_canister:e.Record({canister_version:e.Opt(e.Nat64),canister_id:e.Principal})}),q=e.Variant({creation:e.Record({controllers:e.Vec(e.Principal)}),code_deployment:e.Record({mode:e.Variant({reinstall:e.Null,upgrade:e.Null,install:e.Null}),module_hash:e.Vec(e.Nat8)}),controllers_change:e.Record({controllers:e.Vec(e.Principal)}),code_uninstall:e.Null}),Z=e.Record({timestamp_nanos:e.Nat64,canister_version:e.Nat64,origin:H,details:q}),X=e.Record({controllers:e.Vec(e.Principal),module_hash:e.Opt(e.Vec(e.Nat8)),recent_changes:e.Vec(Z),total_num_changes:e.Nat64}),K=e.Record({canister_id:F}),j=e.Variant({controllers:e.Null,public:e.Null}),$=e.Record({freezing_threshold:e.Nat,controllers:e.Vec(e.Principal),reserved_cycles_limit:e.Nat,log_visibility:j,wasm_memory_limit:e.Nat,memory_allocation:e.Nat,compute_allocation:e.Nat}),Q=e.Record({status:e.Variant({stopped:e.Null,stopping:e.Null,running:e.Null}),memory_size:e.Nat,cycles:e.Nat,settings:$,query_stats:e.Record({response_payload_bytes_total:e.Nat,num_instructions_total:e.Nat,num_calls_total:e.Nat,request_payload_bytes_total:e.Nat}),idle_cycles_burned_per_day:e.Nat,module_hash:e.Opt(e.Vec(e.Nat8)),reserved_cycles:e.Nat}),he=e.Record({canister_id:F}),W=e.Record({freezing_threshold:e.Opt(e.Nat),controllers:e.Opt(e.Vec(e.Principal)),reserved_cycles_limit:e.Opt(e.Nat),log_visibility:e.Opt(j),wasm_memory_limit:e.Opt(e.Nat),memory_allocation:e.Opt(e.Nat),compute_allocation:e.Opt(e.Nat)}),ce=e.Record({settings:e.Opt(W),sender_canister_version:e.Opt(e.Nat64)}),ye=e.Record({canister_id:F}),ge=e.Record({canister_id:F}),Ae=e.Record({canister_id:F}),xe=e.Variant({secp256k1:e.Null}),J=e.Record({key_id:e.Record({name:e.Text,curve:xe}),canister_id:e.Opt(F),derivation_path:e.Vec(e.Vec(e.Nat8))}),we=e.Record({public_key:e.Vec(e.Nat8),chain_code:e.Vec(e.Nat8)}),ee=e.Record({canister_id:F}),z=e.Record({idx:e.Nat64,timestamp_nanos:e.Nat64,content:e.Vec(e.Nat8)}),se=e.Record({canister_log_records:e.Vec(z)}),Y=e.Record({value:e.Text,name:e.Text}),ie=e.Record({status:e.Nat,body:e.Vec(e.Nat8),headers:e.Vec(Y)}),oe=e.Record({url:e.Text,method:e.Variant({get:e.Null,head:e.Null,post:e.Null}),max_response_bytes:e.Opt(e.Nat64),body:e.Opt(e.Vec(e.Nat8)),transform:e.Opt(e.Record({function:e.Func([e.Record({context:e.Vec(e.Nat8),response:ie})],[ie],["query"]),context:e.Vec(e.Nat8)})),headers:e.Vec(Y)}),E=e.Variant({reinstall:e.Null,upgrade:e.Opt(e.Record({wasm_memory_persistence:e.Opt(e.Variant({keep:e.Null,replace:e.Null})),skip_pre_upgrade:e.Opt(e.Bool)})),install:e.Null}),le=e.Record({hash:e.Vec(e.Nat8)}),pe=e.Record({arg:e.Vec(e.Nat8),wasm_module_hash:e.Vec(e.Nat8),mode:E,chunk_hashes_list:e.Vec(le),target_canister:F,store_canister:e.Opt(F),sender_canister_version:e.Opt(e.Nat64)}),ve=e.Vec(e.Nat8),ae=e.Record({arg:e.Vec(e.Nat8),wasm_module:ve,mode:E,canister_id:F,sender_canister_version:e.Opt(e.Nat64)}),ue=e.Record({start_at_timestamp_nanos:e.Nat64,subnet_id:e.Principal}),w=e.Record({num_block_failures_total:e.Nat64,node_id:e.Principal,num_blocks_proposed_total:e.Nat64}),s=e.Vec(e.Record({timestamp_nanos:e.Nat64,node_metrics:e.Vec(w)})),h=e.Record({settings:e.Opt(W),specified_id:e.Opt(F),amount:e.Opt(e.Nat),sender_canister_version:e.Opt(e.Nat64)}),_=e.Record({canister_id:F}),T=e.Record({canister_id:F,amount:e.Nat}),N=e.Vec(e.Nat8),p=e.Variant({ed25519:e.Null,bip340secp256k1:e.Null}),a=e.Record({key_id:e.Record({algorithm:p,name:e.Text}),canister_id:e.Opt(F),derivation_path:e.Vec(e.Vec(e.Nat8))}),u=e.Record({public_key:e.Vec(e.Nat8),chain_code:e.Vec(e.Nat8)}),g=e.Record({key_id:e.Record({name:e.Text,curve:xe}),derivation_path:e.Vec(e.Vec(e.Nat8)),message_hash:e.Vec(e.Nat8)}),x=e.Record({signature:e.Vec(e.Nat8)}),S=e.Record({key_id:e.Record({algorithm:p,name:e.Text}),derivation_path:e.Vec(e.Vec(e.Nat8)),message:e.Vec(e.Nat8)}),M=e.Record({signature:e.Vec(e.Nat8)}),G=e.Record({canister_id:F}),ne=e.Record({canister_id:F}),fe=e.Record({canister_id:F}),be=e.Vec(le),y=e.Record({canister_id:F,sender_canister_version:e.Opt(e.Nat64)}),f=e.Record({canister_id:e.Principal,settings:W,sender_canister_version:e.Opt(e.Nat64)}),d=e.Record({chunk:e.Vec(e.Nat8),canister_id:e.Principal}),v=le;return e.Service({bitcoin_get_balance:e.Func([n],[o],[]),bitcoin_get_current_fee_percentiles:e.Func([l],[m],[]),bitcoin_get_utxos:e.Func([b],[I],[]),bitcoin_send_transaction:e.Func([O],[],[]),canister_info:e.Func([D],[X],[]),canister_status:e.Func([K],[Q],[]),clear_chunk_store:e.Func([he],[],[]),create_canister:e.Func([ce],[ye],[]),delete_canister:e.Func([ge],[],[]),deposit_cycles:e.Func([Ae],[],[]),ecdsa_public_key:e.Func([J],[we],[]),fetch_canister_logs:e.Func([ee],[se],["query"]),http_request:e.Func([oe],[ie],[]),install_chunked_code:e.Func([pe],[],[]),install_code:e.Func([ae],[],[]),node_metrics_history:e.Func([ue],[s],[]),provisional_create_canister_with_cycles:e.Func([h],[_],[]),provisional_top_up_canister:e.Func([T],[],[]),raw_rand:e.Func([],[N],[]),schnorr_public_key:e.Func([a],[u],[]),sign_with_ecdsa:e.Func([g],[x],[]),sign_with_schnorr:e.Func([S],[M],[]),start_canister:e.Func([G],[],[]),stop_canister:e.Func([ne],[],[]),stored_chunks:e.Func([fe],[be],[]),uninstall_code:e.Func([y],[],[]),update_settings:e.Func([f],[],[]),upload_chunk:e.Func([d],[v],[])})};class ef extends dt{constructor(t,r,n,i){super(["Call failed:",`  Canister: ${t.toText()}`,`  Method: ${r} (${n})`,...Object.getOwnPropertyNames(i).map(o=>`  "${o}": ${JSON.stringify(i[o])}`)].join(`
`)),this.canisterId=t,this.methodName=r,this.type=n,this.props=i}}class fh extends ef{constructor(t,r,n){var i;super(t,r,"query",{Status:n.status,Code:(i=Ds[n.reject_code])!==null&&i!==void 0?i:`Unknown Code "${n.reject_code}"`,Message:n.reject_message}),this.result=n}}class lh extends ef{constructor(t,r,n,i){super(t,r,"update",Object.assign({"Request ID":ut(n)},i.body?Object.assign(Object.assign({},i.body.error_code?{"Error code":i.body.error_code}:{}),{"Reject code":String(i.body.reject_code),"Reject message":i.body.reject_message}):{"HTTP status code":i.status.toString(),"HTTP status text":i.statusText})),this.requestId=n,this.response=i}}const Bt=Symbol.for("ic-agent-metadata");class Nn{constructor(t){this[Bt]=Object.freeze(t)}static agentOf(t){return t[Bt].config.agent}static interfaceOf(t){return t[Bt].service}static canisterIdOf(t){return Pe.from(t[Bt].config.canisterId)}static async install(t,r){const n=t.mode===void 0?{install:null}:t.mode,i=t.arg?[...new Uint8Array(t.arg)]:[],o=[...new Uint8Array(t.module)],l=typeof r.canisterId=="string"?Pe.fromText(r.canisterId):r.canisterId;await Mo(r).install_code({mode:n,arg:i,wasm_module:o,canister_id:l,sender_canister_version:[]})}static async createCanister(t,r){function n(o){return[{controllers:o.controllers?[o.controllers]:[],compute_allocation:o.compute_allocation?[o.compute_allocation]:[],freezing_threshold:o.freezing_threshold?[o.freezing_threshold]:[],memory_allocation:o.memory_allocation?[o.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}]}const{canister_id:i}=await Mo(t||{}).provisional_create_canister_with_cycles({amount:[],settings:n(r||{}),specified_id:[],sender_canister_version:[]});return i}static async createAndInstallCanister(t,r,n){const i=await this.createCanister(n);return await this.install(Object.assign({},r),Object.assign(Object.assign({},n),{canisterId:i})),this.createActor(t,Object.assign(Object.assign({},n),{canisterId:i}))}static createActorClass(t,r){const n=t({IDL:dl});class i extends Nn{constructor(l){if(!l.canisterId)throw new dt(`Canister ID is required, but received ${typeof l.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);const c=typeof l.canisterId=="string"?Pe.fromText(l.canisterId):l.canisterId;super({config:Object.assign(Object.assign(Object.assign({},tf),l),{canisterId:c}),service:n});for(const[m,b]of n._fields)r?.httpDetails&&b.annotations.push(oa),r?.certificate&&b.annotations.push(rf),this[m]=dh(this,m,b,l.blsVerify)}}return i}static createActor(t,r){if(!r.canisterId)throw new dt(`Canister ID is required, but received ${typeof r.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(t))(r)}static createActorWithHttpDetails(t,r){return new(this.createActorClass(t,{httpDetails:!0}))(r)}static createActorWithExtendedDetails(t,r,n={httpDetails:!0,certificate:!0}){return new(this.createActorClass(t,n))(r)}}function Hr(e,t){const r=Ec(e,rc.Buffer.from(t));switch(r.length){case 0:return;case 1:return r[0];default:return r}}const tf={pollingStrategyFactory:Ju},oa="http-details",rf="certificate";function dh(e,t,r,n){let i;r.annotations.includes("query")||r.annotations.includes("composite_query")?i=async(l,...c)=>{var m,b;l=Object.assign(Object.assign({},l),(b=(m=e[Bt].config).queryTransform)===null||b===void 0?void 0:b.call(m,t,c,Object.assign(Object.assign({},e[Bt].config),l)));const B=l.agent||e[Bt].config.agent||ko(),A=Pe.from(l.canisterId||e[Bt].config.canisterId),P=Gs(r.argTypes,c),I=await B.query(A,{methodName:t,arg:P,effectiveCanisterId:l.effectiveCanisterId}),O=Object.assign(Object.assign({},I.httpDetails),{requestDetails:I.requestDetails});switch(I.status){case"rejected":throw new fh(A,t,I);case"replied":return r.annotations.includes(oa)?{httpDetails:O,result:Hr(r.retTypes,I.reply.arg)}:Hr(r.retTypes,I.reply.arg)}}:i=async(l,...c)=>{var m,b;l=Object.assign(Object.assign({},l),(b=(m=e[Bt].config).callTransform)===null||b===void 0?void 0:b.call(m,t,c,Object.assign(Object.assign({},e[Bt].config),l)));const B=l.agent||e[Bt].config.agent||ko(),{canisterId:A,effectiveCanisterId:P,pollingStrategyFactory:I}=Object.assign(Object.assign(Object.assign({},tf),e[Bt].config),l),O=Pe.from(A),F=P!==void 0?Pe.from(P):O,D=Gs(r.argTypes,c);if(B.rootKey==null)throw new dt("Agent root key not initialized before making call");const{requestId:H,response:q,requestDetails:Z}=await B.call(O,{methodName:t,arg:D,effectiveCanisterId:F});let X,K;if(q.body&&q.body.certificate){const he=q.body.certificate;K=await Cr.create({certificate:Ni(he),rootKey:B.rootKey,canisterId:Pe.from(A),blsVerify:n});const W=[new TextEncoder().encode("request_status"),H];switch(new TextDecoder().decode(nr(K.lookup([...W,"status"])))){case"replied":X=nr(K.lookup([...W,"reply"]));break;case"rejected":throw new lh(O,t,H,q)}}if(q.status===202){const he=I(),W=await Qu(B,F,H,he,n);K=W.certificate,X=W.reply}const j=r.annotations.includes(oa),$=r.annotations.includes(rf),Q=Object.assign(Object.assign({},q),{requestDetails:Z});if(X!==void 0)return j&&$?{httpDetails:Q,certificate:K,result:Hr(r.retTypes,X)}:$?{certificate:K,result:Hr(r.retTypes,X)}:j?{httpDetails:Q,result:Hr(r.retTypes,X)}:Hr(r.retTypes,X);if(r.retTypes.length===0)return j?{httpDetails:q,result:void 0}:void 0;throw new Error(`Call was returned undefined, but type [${r.retTypes.join(",")}].`)};const o=(...l)=>i({},...l);return o.withOptions=l=>(...c)=>i(l,...c),o}function Mo(e){function t(r,n){if(e.effectiveCanisterId)return{effectiveCanisterId:Pe.from(e.effectiveCanisterId)};const i=n[0];let o=Pe.fromHex("");return i&&typeof i=="object"&&i.canister_id&&(o=Pe.from(i.canister_id)),{effectiveCanisterId:o}}return Nn.createActor(uh,Object.assign(Object.assign(Object.assign({},e),{canisterId:Pe.fromHex("")}),{callTransform:t,queryTransform:t}))}var $i=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},br=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},xi,Ti,Yr,Zr;function $o(e){return e!==null&&typeof e=="object"}class ir{constructor(t){if(xi.set(this,void 0),Ti.set(this,void 0),t.byteLength!==ir.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");$i(this,xi,t,"f"),$i(this,Ti,ir.derEncode(t),"f")}static from(t){if(typeof t=="string"){const r=sr(t);return this.fromRaw(r)}else if($o(t)){const r=t;if($o(r)&&Object.hasOwnProperty.call(r,"__derEncodedPublicKey__"))return this.fromDer(r);if(ArrayBuffer.isView(r)){const n=r;return this.fromRaw(xa(n.buffer))}else{if(r instanceof ArrayBuffer)return this.fromRaw(r);if("rawKey"in r)return this.fromRaw(r.rawKey);if("derKey"in r)return this.fromDer(r.derKey);if("toDer"in r)return this.fromDer(r.toDer())}}throw new Error("Cannot construct Ed25519PublicKey from the provided key.")}static fromRaw(t){return new ir(t)}static fromDer(t){return new ir(this.derDecode(t))}static derEncode(t){const r=qu(t,Mi).buffer;return r.__derEncodedPublicKey__=void 0,r}static derDecode(t){const r=Gu(t,Mi);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return br(this,xi,"f")}get derKey(){return br(this,Ti,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}xi=new WeakMap,Ti=new WeakMap;ir.RAW_KEY_LENGTH=32;class xr extends Ta{constructor(t,r){super(),Yr.set(this,void 0),Zr.set(this,void 0),$i(this,Yr,ir.from(t),"f"),$i(this,Zr,new Uint8Array(r),"f")}static generate(t){if(t&&t.length!==32)throw new Error("Ed25519 Seed needs to be 32 bytes long.");t||(t=jr.utils.randomPrivateKey()),Zi(t,new Uint8Array(new Array(32).fill(0)))&&console.warn("Seed is all zeros. This is not a secure seed. Please provide a seed with sufficient entropy if this is a production environment.");const r=new Uint8Array(32);for(let i=0;i<32;i++)r[i]=new Uint8Array(t)[i];const n=jr.getPublicKey(r);return xr.fromKeyPair(n,r)}static fromParsedJson(t){const[r,n]=t;return new xr(ir.fromDer(sr(r)),sr(n))}static fromJSON(t){const r=JSON.parse(t);if(Array.isArray(r)){if(typeof r[0]=="string"&&typeof r[1]=="string")return this.fromParsedJson([r[0],r[1]]);throw new Error("Deserialization error: JSON must have at least 2 items.")}throw new Error(`Deserialization error: Invalid JSON type for string: ${JSON.stringify(t)}`)}static fromKeyPair(t,r){return new xr(ir.fromRaw(t),r)}static fromSecretKey(t){const r=jr.getPublicKey(new Uint8Array(t));return xr.fromKeyPair(r,t)}toJSON(){return[ut(br(this,Yr,"f").toDer()),ut(br(this,Zr,"f"))]}getKeyPair(){return{secretKey:br(this,Zr,"f"),publicKey:br(this,Yr,"f")}}getPublicKey(){return br(this,Yr,"f")}async sign(t){const r=new Uint8Array(t),n=xn(jr.sign(r,br(this,Zr,"f").slice(0,32)));return Object.defineProperty(n,"__signature__",{enumerable:!1,value:void 0}),n}static verify(t,r,n){const[i,o,l]=[t,r,n].map(c=>(typeof c=="string"&&(c=sr(c)),c instanceof Uint8Array&&(c=c.buffer),new Uint8Array(c)));return jr.verify(o,i,l)}}Yr=new WeakMap,Zr=new WeakMap;class Ca extends Error{constructor(t){super(t),this.message=t,Object.setPrototypeOf(this,Ca.prototype)}}function Vo(e){if(typeof global<"u"&&global.crypto&&global.crypto.subtle)return global.crypto.subtle;if(e)return e;if(typeof crypto<"u"&&crypto.subtle)return crypto.subtle;throw new Ca("Global crypto was not available and none was provided. Please inlcude a SubtleCrypto implementation. See https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto")}class Vi extends Ta{constructor(t,r,n){super(),this._keyPair=t,this._derKey=r,this._subtleCrypto=n}static async generate(t){const{extractable:r=!1,keyUsages:n=["sign","verify"],subtleCrypto:i}=t??{},o=Vo(i),l=await o.generateKey({name:"ECDSA",namedCurve:"P-256"},r,n),c=await o.exportKey("spki",l.publicKey);return new this(l,c,o)}static async fromKeyPair(t,r){const n=Vo(r),i=await n.exportKey("spki",t.publicKey);return new Vi(t,i,n)}getKeyPair(){return this._keyPair}getPublicKey(){const t=this._derKey,r=Object.create(this._keyPair.publicKey);return r.toDer=function(){return t},r}async sign(t){const r={name:"ECDSA",hash:{name:"SHA-256"}};return await this._subtleCrypto.sign(r,this._keyPair.privateKey,t)}}var hh=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},cn=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},gr;class ph{constructor(t){gr.set(this,void 0),hh(this,gr,t,"f")}get rawKey(){return cn(this,gr,"f").rawKey}get derKey(){return cn(this,gr,"f").derKey}toDer(){return cn(this,gr,"f").toDer()}getPublicKey(){return cn(this,gr,"f")}getPrincipal(){return Pe.from(cn(this,gr,"f").rawKey)}transformRequest(){return Promise.reject("Not implemented. You are attempting to use a partial identity to sign calls, but this identity only has access to the public key.To sign calls, use a DelegationIdentity instead.")}}gr=new WeakMap;var yh=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},gh=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},mh=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},vi;const wh=new TextEncoder().encode("ic-request-auth-delegation"),bh=new TextEncoder().encode(`
ic-request`);function Ss(e){if(typeof e!="string"||e.length<64)throw new Error("Invalid public key.");return sr(e)}class ka{constructor(t,r,n){this.pubkey=t,this.expiration=r,this.targets=n}toCBOR(){return Et.value.map(Object.assign({pubkey:Et.value.bytes(this.pubkey),expiration:Et.value.u64(this.expiration.toString(16),16)},this.targets&&{targets:Et.value.array(this.targets.map(t=>Et.value.bytes(t.toUint8Array())))}))}toJSON(){return Object.assign({expiration:this.expiration.toString(16),pubkey:ut(this.pubkey)},this.targets&&{targets:this.targets.map(t=>t.toHex())})}}async function _h(e,t,r,n){const i=new ka(t.toDer(),BigInt(+r)*BigInt(1e6),n),o=new Uint8Array([...wh,...new Uint8Array(In(i))]),l=await e.sign(o);return{delegation:i,signature:l}}class Li{constructor(t,r){this.delegations=t,this.publicKey=r}static async create(t,r,n=new Date(Date.now()+15*60*1e3),i={}){var o,l;const c=await _h(t,r,n,i.targets);return new Li([...((o=i.previous)===null||o===void 0?void 0:o.delegations)||[],c],((l=i.previous)===null||l===void 0?void 0:l.publicKey)||t.getPublicKey().toDer())}static fromJSON(t){const{publicKey:r,delegations:n}=typeof t=="string"?JSON.parse(t):t;if(!Array.isArray(n))throw new Error("Invalid delegations.");const i=n.map(o=>{const{delegation:l,signature:c}=o,{pubkey:m,expiration:b,targets:B}=l;if(B!==void 0&&!Array.isArray(B))throw new Error("Invalid targets.");return{delegation:new ka(Ss(m),BigInt("0x"+b),B&&B.map(A=>{if(typeof A!="string")throw new Error("Invalid target.");return Pe.fromHex(A)})),signature:Ss(c)}});return new this(i,Ss(r))}static fromDelegations(t,r){return new this(t,r)}toJSON(){return{delegations:this.delegations.map(t=>{const{delegation:r,signature:n}=t,{targets:i}=r;return{delegation:Object.assign({expiration:r.expiration.toString(16),pubkey:ut(r.pubkey)},i&&{targets:i.map(o=>o.toHex())}),signature:ut(n)}}),publicKey:ut(this.publicKey)}}}class Lo extends Ta{constructor(t,r){super(),this._inner=t,this._delegation=r}static fromDelegation(t,r){return new this(t,r)}getDelegation(){return this._delegation}getPublicKey(){return{derKey:this._delegation.publicKey,toDer:()=>this._delegation.publicKey}}sign(t){return this._inner.sign(t)}async transformRequest(t){const{body:r}=t,n=mh(t,["body"]),i=await In(r);return Object.assign(Object.assign({},n),{body:{content:r,sender_sig:await this.sign(new Uint8Array([...bh,...new Uint8Array(i)])),sender_delegation:this._delegation.delegations,sender_pubkey:this._delegation.publicKey}})}}class Di extends ph{constructor(t,r){super(t),vi.set(this,void 0),yh(this,vi,r,"f")}get delegation(){return gh(this,vi,"f")}static fromDelegation(t,r){return new Di(t,r)}}vi=new WeakMap;function Eh(e,t){for(const{delegation:n}of e.delegations)if(+new Date(Number(n.expiration/BigInt(1e6)))<=+Date.now())return!1;const r=[];for(const n of r){const i=n.toText();for(const{delegation:o}of e.delegations){if(o.targets===void 0)continue;let l=!0;for(const c of o.targets)if(c.toText()===i){l=!1;break}if(l)return!1}}return!0}var Do;(function(e){e[e.ECDSA_WITH_SHA256=-7]="ECDSA_WITH_SHA256"})(Do||(Do={}));const qo=["mousedown","mousemove","keydown","touchstart","wheel"];class Go{constructor(t={}){var r;this.callbacks=[],this.idleTimeout=10*60*1e3,this.timeoutID=void 0;const{onIdle:n,idleTimeout:i=10*60*1e3}=t||{};this.callbacks=n?[n]:[],this.idleTimeout=i;const o=this._resetTimer.bind(this);window.addEventListener("load",o,!0),qo.forEach(function(c){document.addEventListener(c,o,!0)});const l=(c,m)=>{let b;return(...B)=>{const A=this,P=function(){b=void 0,c.apply(A,B)};clearTimeout(b),b=window.setTimeout(P,m)}};if(t?.captureScroll){const c=l(o,(r=t?.scrollDebounce)!==null&&r!==void 0?r:100);window.addEventListener("scroll",c,!0)}o()}static create(t={}){return new this(t)}registerCallback(t){this.callbacks.push(t)}exit(){clearTimeout(this.timeoutID),window.removeEventListener("load",this._resetTimer,!0);const t=this._resetTimer.bind(this);qo.forEach(function(r){document.removeEventListener(r,t,!0)}),this.callbacks.forEach(r=>r())}_resetTimer(){const t=this.exit.bind(this);window.clearTimeout(this.timeoutID),this.timeoutID=window.setTimeout(t,this.idleTimeout)}}const xh=(e,t)=>t.some(r=>e instanceof r);let Ho,jo;function Th(){return Ho||(Ho=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vh(){return jo||(jo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nf=new WeakMap,ca=new WeakMap,sf=new WeakMap,Ns=new WeakMap,Ma=new WeakMap;function Ah(e){const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",l)},o=()=>{r(vr(e.result)),i()},l=()=>{n(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",l)});return t.then(r=>{r instanceof IDBCursor&&nf.set(r,e)}).catch(()=>{}),Ma.set(t,e),t}function Bh(e){if(ca.has(e))return;const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",l),e.removeEventListener("abort",l)},o=()=>{r(),i()},l=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",l),e.addEventListener("abort",l)});ca.set(e,t)}let ua={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return ca.get(e);if(t==="objectStoreNames")return e.objectStoreNames||sf.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return vr(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Ih(e){ua=e(ua)}function Sh(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(Rs(this),t,...r);return sf.set(n,t.sort?t.sort():[t]),vr(n)}:vh().includes(e)?function(...t){return e.apply(Rs(this),t),vr(nf.get(this))}:function(...t){return vr(e.apply(Rs(this),t))}}function Nh(e){return typeof e=="function"?Sh(e):(e instanceof IDBTransaction&&Bh(e),xh(e,Th())?new Proxy(e,ua):e)}function vr(e){if(e instanceof IDBRequest)return Ah(e);if(Ns.has(e))return Ns.get(e);const t=Nh(e);return t!==e&&(Ns.set(e,t),Ma.set(t,e)),t}const Rs=e=>Ma.get(e);function Rh(e,t,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const l=indexedDB.open(e,t),c=vr(l);return n&&l.addEventListener("upgradeneeded",m=>{n(vr(l.result),m.oldVersion,m.newVersion,vr(l.transaction),m)}),r&&l.addEventListener("blocked",m=>r(m.oldVersion,m.newVersion,m)),c.then(m=>{o&&m.addEventListener("close",()=>o()),i&&m.addEventListener("versionchange",b=>i(b.oldVersion,b.newVersion,b))}).catch(()=>{}),c}const Oh=["get","getKey","getAll","getAllKeys","count"],Uh=["put","add","delete","clear"],Os=new Map;function zo(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Os.get(t))return Os.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=Uh.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Oh.includes(r)))return;const o=async function(l,...c){const m=this.transaction(l,i?"readwrite":"readonly");let b=m.store;return n&&(b=b.index(c.shift())),(await Promise.all([b[r](...c),i&&m.done]))[0]};return Os.set(t,o),o}Ih(e=>({...e,get:(t,r,n)=>zo(t,r)||e.get(t,r,n),has:(t,r)=>!!zo(t,r)||e.has(t,r)}));const af="auth-client-db",of="ic-keyval",Fh=async(e=af,t=of,r)=>(cf&&(localStorage!=null&&localStorage.getItem(Er))&&(localStorage.removeItem(Er),localStorage.removeItem(_r)),await Rh(e,r,{upgrade:n=>{n.objectStoreNames.contains(t)&&n.clear(t),n.createObjectStore(t)}}));async function Ph(e,t,r){return await e.get(t,r)}async function Ch(e,t,r,n){return await e.put(t,n,r)}async function kh(e,t,r){return await e.delete(t,r)}class $a{constructor(t,r){this._db=t,this._storeName=r}static async create(t){const{dbName:r=af,storeName:n=of,version:i=Lh}=t??{},o=await Fh(r,n,i);return new $a(o,n)}async set(t,r){return await Ch(this._db,this._storeName,t,r)}async get(t){var r;return(r=await Ph(this._db,this._storeName,t))!==null&&r!==void 0?r:null}async remove(t){return await kh(this._db,this._storeName,t)}}var Mh=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},$h=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Ai;const _r="identity",Er="delegation",Vh="iv",Lh=1,cf=typeof window<"u";class Dh{constructor(t="ic-",r){this.prefix=t,this._localStorage=r}get(t){return Promise.resolve(this._getLocalStorage().getItem(this.prefix+t))}set(t,r){return this._getLocalStorage().setItem(this.prefix+t,r),Promise.resolve()}remove(t){return this._getLocalStorage().removeItem(this.prefix+t),Promise.resolve()}_getLocalStorage(){if(this._localStorage)return this._localStorage;const t=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.localStorage:global.localStorage:window.localStorage;if(!t)throw new Error("Could not find local storage.");return t}}class qh{constructor(t){Ai.set(this,void 0),Mh(this,Ai,t??{},"f")}get _db(){return new Promise(t=>{if(this.initializedDb){t(this.initializedDb);return}$a.create($h(this,Ai,"f")).then(r=>{this.initializedDb=r,t(r)})})}async get(t){return await(await this._db).get(t)}async set(t,r){await(await this._db).set(t,r)}async remove(t){await(await this._db).remove(t)}}Ai=new WeakMap;const Gh="https://identity.ic0.app",Hh="#authorize",Us="ECDSA",Fs="Ed25519",jh=500,zh="UserInterrupt";class Wp{constructor(t,r,n,i,o,l,c,m){this._identity=t,this._key=r,this._chain=n,this._storage=i,this.idleManager=o,this._createOptions=l,this._idpWindow=c,this._eventHandler=m,this._registerDefaultIdleCallback()}static async create(t={}){var r,n,i;const o=(r=t.storage)!==null&&r!==void 0?r:new qh,l=(n=t.keyType)!==null&&n!==void 0?n:Us;let c=null;if(t.identity)c=t.identity;else{let A=await o.get(_r);if(!A&&cf)try{const P=new Dh,I=await P.get(Er),O=await P.get(_r);I&&O&&l===Us&&(console.log("Discovered an identity stored in localstorage. Migrating to IndexedDB"),await o.set(Er,I),await o.set(_r,O),A=I,await P.remove(Er),await P.remove(_r))}catch(P){console.error("error while attempting to recover localstorage: "+P)}if(A)try{typeof A=="object"?l===Fs&&typeof A=="string"?c=await xr.fromJSON(A):c=await Vi.fromKeyPair(A):typeof A=="string"&&(c=xr.fromJSON(A))}catch{}}let m=new Fi,b=null;if(c)try{const A=await o.get(Er);if(typeof A=="object"&&A!==null)throw new Error("Delegation chain is incorrectly stored. A delegation chain should be stored as a string.");t.identity?m=t.identity:A&&(b=Li.fromJSON(A),Eh(b)?"toDer"in c?m=Di.fromDelegation(c,b):m=Lo.fromDelegation(c,b):(await Ps(o),c=null))}catch(A){console.error(A),await Ps(o),c=null}let B;return!((i=t.idleOptions)===null||i===void 0)&&i.disableIdle?B=void 0:(b||t.identity)&&(B=Go.create(t.idleOptions)),c||(l===Fs?(c=await xr.generate(),await o.set(_r,JSON.stringify(c.toJSON()))):(t.storage&&l===Us&&console.warn(`You are using a custom storage provider that may not support CryptoKey storage. If you are using a custom storage provider that does not support CryptoKey storage, you should use '${Fs}' as the key type, as it can serialize to a string`),c=await Vi.generate(),await o.set(_r,c.getKeyPair()))),new this(m,c,b,o,B,t)}_registerDefaultIdleCallback(){var t,r;const n=(t=this._createOptions)===null||t===void 0?void 0:t.idleOptions;!n?.onIdle&&!n?.disableDefaultIdleCallback&&((r=this.idleManager)===null||r===void 0||r.registerCallback(()=>{this.logout(),location.reload()}))}async _handleSuccess(t,r){var n,i;const o=t.delegations.map(b=>({delegation:new ka(b.delegation.pubkey,b.delegation.expiration,b.delegation.targets),signature:b.signature.buffer})),l=Li.fromDelegations(o,t.userPublicKey.buffer),c=this._key;if(!c)return;this._chain=l,"toDer"in c?this._identity=Di.fromDelegation(c,this._chain):this._identity=Lo.fromDelegation(c,this._chain),(n=this._idpWindow)===null||n===void 0||n.close();const m=(i=this._createOptions)===null||i===void 0?void 0:i.idleOptions;!this.idleManager&&!m?.disableIdle&&(this.idleManager=Go.create(m),this._registerDefaultIdleCallback()),this._removeEventListener(),delete this._idpWindow,this._chain&&await this._storage.set(Er,JSON.stringify(this._chain.toJSON())),r?.(t)}getIdentity(){return this._identity}async isAuthenticated(){return!this.getIdentity().getPrincipal().isAnonymous()&&this._chain!==null}async login(t){var r,n,i,o;const l=BigInt(8)*BigInt(36e11),c=new URL(((r=t?.identityProvider)===null||r===void 0?void 0:r.toString())||Gh);c.hash=Hh,(n=this._idpWindow)===null||n===void 0||n.close(),this._removeEventListener(),this._eventHandler=this._getEventHandler(c,Object.assign({maxTimeToLive:(i=t?.maxTimeToLive)!==null&&i!==void 0?i:l},t)),window.addEventListener("message",this._eventHandler),this._idpWindow=(o=window.open(c.toString(),"idpWindow",t?.windowOpenerFeatures))!==null&&o!==void 0?o:void 0;const m=()=>{this._idpWindow&&(this._idpWindow.closed?this._handleFailure(zh,t?.onError):setTimeout(m,jh))};m()}_getEventHandler(t,r){return async n=>{var i,o,l;if(n.origin!==t.origin){console.warn(`WARNING: expected origin '${t.origin}', got '${n.origin}' (ignoring)`);return}const c=n.data;switch(c.kind){case"authorize-ready":{const m=Object.assign({kind:"authorize-client",sessionPublicKey:new Uint8Array((i=this._key)===null||i===void 0?void 0:i.getPublicKey().toDer()),maxTimeToLive:r?.maxTimeToLive,allowPinAuthentication:r?.allowPinAuthentication,derivationOrigin:(o=r?.derivationOrigin)===null||o===void 0?void 0:o.toString()},r?.customValues);(l=this._idpWindow)===null||l===void 0||l.postMessage(m,t.origin);break}case"authorize-client-success":try{await this._handleSuccess(c,r?.onSuccess)}catch(m){this._handleFailure(m.message,r?.onError)}break;case"authorize-client-failure":this._handleFailure(c.text,r?.onError);break}}}_handleFailure(t,r){var n;(n=this._idpWindow)===null||n===void 0||n.close(),r?.(t),this._removeEventListener(),delete this._idpWindow}_removeEventListener(){this._eventHandler&&window.removeEventListener("message",this._eventHandler),this._eventHandler=void 0}async logout(t={}){if(await Ps(this._storage),this._identity=new Fi,this._chain=null,t.returnTo)try{window.history.pushState({},"",t.returnTo)}catch{window.location.href=t.returnTo}}}async function Ps(e){await e.remove(_r),await e.remove(Er),await e.remove(Vh)}var Kh=(e=>(e[e.FractionalMoreThan8Decimals=0]="FractionalMoreThan8Decimals",e[e.InvalidFormat=1]="InvalidFormat",e[e.FractionalTooManyDecimals=2]="FractionalTooManyDecimals",e))(Kh||{});BigInt(1e8);var Wh=class{constructor(e,t,r){this.id=e,this.service=t,this.certifiedService=r,this.caller=({certified:n=!0})=>n?this.certifiedService:this.service}get canisterId(){return this.id}},uf=e=>e==null,fa=e=>!uf(e),Yh=()=>Jr.createSync({host:"https://icp-api.io",identity:new Fi}),Yp=async({identity:e,host:t,fetchRootKey:r=!1,verifyQuerySignatures:n=!1,retryTimes:i})=>await Jr.create({identity:e,...fa(t)&&{host:t},verifyQuerySignatures:n,...fa(i)&&{retryTimes:i},shouldFetchRootKey:r}),Zh=({options:{canisterId:e,serviceOverride:t,certifiedServiceOverride:r,agent:n,callTransform:i,queryTransform:o},idlFactory:l,certifiedIdlFactory:c})=>{let m=n??Yh(),b=t??Nn.createActor(l,{agent:m,canisterId:e,callTransform:i,queryTransform:o}),B=r??Nn.createActor(c,{agent:m,canisterId:e,callTransform:i,queryTransform:o});return{service:b,certifiedService:B,agent:m,canisterId:e}},Ko="abcdefghijklmnopqrstuvwxyz234567",Rn=Object.create(null);for(let e=0;e<Ko.length;e++)Rn[Ko[e]]=e;Rn[0]=Rn.o;Rn[1]=Rn.i;var st=e=>fa(e)?[e]:[];/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:ff,setPrototypeOf:Wo,isFrozen:Xh,getPrototypeOf:Jh,getOwnPropertyDescriptor:Qh}=Object;let{freeze:wt,seal:It,create:lf}=Object,{apply:la,construct:da}=typeof Reflect<"u"&&Reflect;wt||(wt=function(t){return t});It||(It=function(t){return t});la||(la=function(t,r,n){return t.apply(r,n)});da||(da=function(t,r){return new t(...r)});const ni=vt(Array.prototype.forEach),Yo=vt(Array.prototype.pop),un=vt(Array.prototype.push),Bi=vt(String.prototype.toLowerCase),Cs=vt(String.prototype.toString),Zo=vt(String.prototype.match),fn=vt(String.prototype.replace),ep=vt(String.prototype.indexOf),tp=vt(String.prototype.trim),Ct=vt(Object.prototype.hasOwnProperty),gt=vt(RegExp.prototype.test),ln=rp(TypeError);function vt(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return la(e,t,n)}}function rp(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return da(e,r)}}function Ce(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Bi;Wo&&Wo(e,null);let n=t.length;for(;n--;){let i=t[n];if(typeof i=="string"){const o=r(i);o!==i&&(Xh(t)||(t[n]=o),i=o)}e[i]=!0}return e}function np(e){for(let t=0;t<e.length;t++)Ct(e,t)||(e[t]=null);return e}function Rr(e){const t=lf(null);for(const[r,n]of ff(e))Ct(e,r)&&(Array.isArray(n)?t[r]=np(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=Rr(n):t[r]=n);return t}function dn(e,t){for(;e!==null;){const n=Qh(e,t);if(n){if(n.get)return vt(n.get);if(typeof n.value=="function")return vt(n.value)}e=Jh(e)}function r(){return null}return r}const Xo=wt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ks=wt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ms=wt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ip=wt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$s=wt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),sp=wt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Jo=wt(["#text"]),Qo=wt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Vs=wt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ec=wt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ii=wt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ap=It(/\{\{[\w\W]*|[\w\W]*\}\}/gm),op=It(/<%[\w\W]*|[\w\W]*%>/gm),cp=It(/\${[\w\W]*}/gm),up=It(/^data-[\-\w.\u00B7-\uFFFF]/),fp=It(/^aria-[\-\w]+$/),df=It(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),lp=It(/^(?:\w+script|data):/i),dp=It(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hf=It(/^html$/i),hp=It(/^[a-z][.\w]*(-[.\w]+)+$/i);var tc=Object.freeze({__proto__:null,MUSTACHE_EXPR:ap,ERB_EXPR:op,TMPLIT_EXPR:cp,DATA_ATTR:up,ARIA_ATTR:fp,IS_ALLOWED_URI:df,IS_SCRIPT_OR_DATA:lp,ATTR_WHITESPACE:dp,DOCTYPE_NAME:hf,CUSTOM_ELEMENT:hp});const hn={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},pp=function(){return typeof window>"u"?null:window},yp=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const i="data-tt-policy-suffix";r&&r.hasAttribute(i)&&(n=r.getAttribute(i));const o="dompurify"+(n?"#"+n:"");try{return t.createPolicy(o,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function pf(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pp();const t=Te=>pf(Te);if(t.version="3.1.7",t.removed=[],!e||!e.document||e.document.nodeType!==hn.document)return t.isSupported=!1,t;let{document:r}=e;const n=r,i=n.currentScript,{DocumentFragment:o,HTMLTemplateElement:l,Node:c,Element:m,NodeFilter:b,NamedNodeMap:B=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:A,DOMParser:P,trustedTypes:I}=e,O=m.prototype,F=dn(O,"cloneNode"),D=dn(O,"remove"),H=dn(O,"nextSibling"),q=dn(O,"childNodes"),Z=dn(O,"parentNode");if(typeof l=="function"){const Te=r.createElement("template");Te.content&&Te.content.ownerDocument&&(r=Te.content.ownerDocument)}let X,K="";const{implementation:j,createNodeIterator:$,createDocumentFragment:Q,getElementsByTagName:he}=r,{importNode:W}=n;let ce={};t.isSupported=typeof ff=="function"&&typeof Z=="function"&&j&&j.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ye,ERB_EXPR:ge,TMPLIT_EXPR:Ae,DATA_ATTR:xe,ARIA_ATTR:J,IS_SCRIPT_OR_DATA:we,ATTR_WHITESPACE:ee,CUSTOM_ELEMENT:z}=tc;let{IS_ALLOWED_URI:se}=tc,Y=null;const ie=Ce({},[...Xo,...ks,...Ms,...$s,...Jo]);let oe=null;const E=Ce({},[...Qo,...Vs,...ec,...ii]);let le=Object.seal(lf(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),pe=null,ve=null,ae=!0,ue=!0,w=!1,s=!0,h=!1,_=!0,T=!1,N=!1,p=!1,a=!1,u=!1,g=!1,x=!0,S=!1;const M="user-content-";let G=!0,ne=!1,fe={},be=null;const y=Ce({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let f=null;const d=Ce({},["audio","video","img","source","image","track"]);let v=null;const C=Ce({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),L="http://www.w3.org/1998/Math/MathML",V="http://www.w3.org/2000/svg",_e="http://www.w3.org/1999/xhtml";let Ue=_e,Re=!1,Ie=null;const ke=Ce({},[L,V,_e],Cs);let Me=null;const as=["application/xhtml+xml","text/html"],os="text/html";let Xe=null,cr=null;const cs=r.createElement("form"),Jt=function(k){return k instanceof RegExp||k instanceof Function},Mn=function(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(cr&&cr===k)){if((!k||typeof k!="object")&&(k={}),k=Rr(k),Me=as.indexOf(k.PARSER_MEDIA_TYPE)===-1?os:k.PARSER_MEDIA_TYPE,Xe=Me==="application/xhtml+xml"?Cs:Bi,Y=Ct(k,"ALLOWED_TAGS")?Ce({},k.ALLOWED_TAGS,Xe):ie,oe=Ct(k,"ALLOWED_ATTR")?Ce({},k.ALLOWED_ATTR,Xe):E,Ie=Ct(k,"ALLOWED_NAMESPACES")?Ce({},k.ALLOWED_NAMESPACES,Cs):ke,v=Ct(k,"ADD_URI_SAFE_ATTR")?Ce(Rr(C),k.ADD_URI_SAFE_ATTR,Xe):C,f=Ct(k,"ADD_DATA_URI_TAGS")?Ce(Rr(d),k.ADD_DATA_URI_TAGS,Xe):d,be=Ct(k,"FORBID_CONTENTS")?Ce({},k.FORBID_CONTENTS,Xe):y,pe=Ct(k,"FORBID_TAGS")?Ce({},k.FORBID_TAGS,Xe):{},ve=Ct(k,"FORBID_ATTR")?Ce({},k.FORBID_ATTR,Xe):{},fe=Ct(k,"USE_PROFILES")?k.USE_PROFILES:!1,ae=k.ALLOW_ARIA_ATTR!==!1,ue=k.ALLOW_DATA_ATTR!==!1,w=k.ALLOW_UNKNOWN_PROTOCOLS||!1,s=k.ALLOW_SELF_CLOSE_IN_ATTR!==!1,h=k.SAFE_FOR_TEMPLATES||!1,_=k.SAFE_FOR_XML!==!1,T=k.WHOLE_DOCUMENT||!1,a=k.RETURN_DOM||!1,u=k.RETURN_DOM_FRAGMENT||!1,g=k.RETURN_TRUSTED_TYPE||!1,p=k.FORCE_BODY||!1,x=k.SANITIZE_DOM!==!1,S=k.SANITIZE_NAMED_PROPS||!1,G=k.KEEP_CONTENT!==!1,ne=k.IN_PLACE||!1,se=k.ALLOWED_URI_REGEXP||df,Ue=k.NAMESPACE||_e,le=k.CUSTOM_ELEMENT_HANDLING||{},k.CUSTOM_ELEMENT_HANDLING&&Jt(k.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(le.tagNameCheck=k.CUSTOM_ELEMENT_HANDLING.tagNameCheck),k.CUSTOM_ELEMENT_HANDLING&&Jt(k.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(le.attributeNameCheck=k.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),k.CUSTOM_ELEMENT_HANDLING&&typeof k.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(le.allowCustomizedBuiltInElements=k.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),h&&(ue=!1),u&&(a=!0),fe&&(Y=Ce({},Jo),oe=[],fe.html===!0&&(Ce(Y,Xo),Ce(oe,Qo)),fe.svg===!0&&(Ce(Y,ks),Ce(oe,Vs),Ce(oe,ii)),fe.svgFilters===!0&&(Ce(Y,Ms),Ce(oe,Vs),Ce(oe,ii)),fe.mathMl===!0&&(Ce(Y,$s),Ce(oe,ec),Ce(oe,ii))),k.ADD_TAGS&&(Y===ie&&(Y=Rr(Y)),Ce(Y,k.ADD_TAGS,Xe)),k.ADD_ATTR&&(oe===E&&(oe=Rr(oe)),Ce(oe,k.ADD_ATTR,Xe)),k.ADD_URI_SAFE_ATTR&&Ce(v,k.ADD_URI_SAFE_ATTR,Xe),k.FORBID_CONTENTS&&(be===y&&(be=Rr(be)),Ce(be,k.FORBID_CONTENTS,Xe)),G&&(Y["#text"]=!0),T&&Ce(Y,["html","head","body"]),Y.table&&(Ce(Y,["tbody"]),delete pe.tbody),k.TRUSTED_TYPES_POLICY){if(typeof k.TRUSTED_TYPES_POLICY.createHTML!="function")throw ln('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof k.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ln('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');X=k.TRUSTED_TYPES_POLICY,K=X.createHTML("")}else X===void 0&&(X=yp(I,i)),X!==null&&typeof K=="string"&&(K=X.createHTML(""));wt&&wt(k),cr=k}},us=Ce({},["mi","mo","mn","ms","mtext"]),fs=Ce({},["annotation-xml"]),La=Ce({},["title","style","font","a","script"]),We=Ce({},[...ks,...Ms,...ip]),ls=Ce({},[...$s,...sp]),Da=function(k){let re=Z(k);(!re||!re.tagName)&&(re={namespaceURI:Ue,tagName:"template"});const Ee=Bi(k.tagName),Ve=Bi(re.tagName);return Ie[k.namespaceURI]?k.namespaceURI===V?re.namespaceURI===_e?Ee==="svg":re.namespaceURI===L?Ee==="svg"&&(Ve==="annotation-xml"||us[Ve]):!!We[Ee]:k.namespaceURI===L?re.namespaceURI===_e?Ee==="math":re.namespaceURI===V?Ee==="math"&&fs[Ve]:!!ls[Ee]:k.namespaceURI===_e?re.namespaceURI===V&&!fs[Ve]||re.namespaceURI===L&&!us[Ve]?!1:!ls[Ee]&&(La[Ee]||!We[Ee]):!!(Me==="application/xhtml+xml"&&Ie[k.namespaceURI]):!1},Nt=function(k){un(t.removed,{element:k});try{Z(k).removeChild(k)}catch{D(k)}},Lr=function(k,re){try{un(t.removed,{attribute:re.getAttributeNode(k),from:re})}catch{un(t.removed,{attribute:null,from:re})}if(re.removeAttribute(k),k==="is"&&!oe[k])if(a||u)try{Nt(re)}catch{}else try{re.setAttribute(k,"")}catch{}},$n=function(k){let re=null,Ee=null;if(p)k="<remove></remove>"+k;else{const Be=Zo(k,/^[\r\n\t ]+/);Ee=Be&&Be[0]}Me==="application/xhtml+xml"&&Ue===_e&&(k='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+k+"</body></html>");const Ve=X?X.createHTML(k):k;if(Ue===_e)try{re=new P().parseFromString(Ve,Me)}catch{}if(!re||!re.documentElement){re=j.createDocument(Ue,"template",null);try{re.documentElement.innerHTML=Re?K:Ve}catch{}}const U=re.body||re.documentElement;return k&&Ee&&U.insertBefore(r.createTextNode(Ee),U.childNodes[0]||null),Ue===_e?he.call(re,T?"html":"body")[0]:T?re.documentElement:U},Vn=function(k){return $.call(k.ownerDocument||k,k,b.SHOW_ELEMENT|b.SHOW_COMMENT|b.SHOW_TEXT|b.SHOW_PROCESSING_INSTRUCTION|b.SHOW_CDATA_SECTION,null)},Ln=function(k){return k instanceof A&&(typeof k.nodeName!="string"||typeof k.textContent!="string"||typeof k.removeChild!="function"||!(k.attributes instanceof B)||typeof k.removeAttribute!="function"||typeof k.setAttribute!="function"||typeof k.namespaceURI!="string"||typeof k.insertBefore!="function"||typeof k.hasChildNodes!="function")},qe=function(k){return typeof c=="function"&&k instanceof c},Rt=function(k,re,Ee){ce[k]&&ni(ce[k],Ve=>{Ve.call(t,re,Ee,cr)})},Dn=function(k){let re=null;if(Rt("beforeSanitizeElements",k,null),Ln(k))return Nt(k),!0;const Ee=Xe(k.nodeName);if(Rt("uponSanitizeElement",k,{tagName:Ee,allowedTags:Y}),k.hasChildNodes()&&!qe(k.firstElementChild)&&gt(/<[/\w]/g,k.innerHTML)&&gt(/<[/\w]/g,k.textContent)||k.nodeType===hn.progressingInstruction||_&&k.nodeType===hn.comment&&gt(/<[/\w]/g,k.data))return Nt(k),!0;if(!Y[Ee]||pe[Ee]){if(!pe[Ee]&&Gn(Ee)&&(le.tagNameCheck instanceof RegExp&&gt(le.tagNameCheck,Ee)||le.tagNameCheck instanceof Function&&le.tagNameCheck(Ee)))return!1;if(G&&!be[Ee]){const Ve=Z(k)||k.parentNode,U=q(k)||k.childNodes;if(U&&Ve){const Be=U.length;for(let Ne=Be-1;Ne>=0;--Ne){const Oe=F(U[Ne],!0);Oe.__removalCount=(k.__removalCount||0)+1,Ve.insertBefore(Oe,H(k))}}}return Nt(k),!0}return k instanceof m&&!Da(k)||(Ee==="noscript"||Ee==="noembed"||Ee==="noframes")&&gt(/<\/no(script|embed|frames)/i,k.innerHTML)?(Nt(k),!0):(h&&k.nodeType===hn.text&&(re=k.textContent,ni([ye,ge,Ae],Ve=>{re=fn(re,Ve," ")}),k.textContent!==re&&(un(t.removed,{element:k.cloneNode()}),k.textContent=re)),Rt("afterSanitizeElements",k,null),!1)},qn=function(k,re,Ee){if(x&&(re==="id"||re==="name")&&(Ee in r||Ee in cs))return!1;if(!(ue&&!ve[re]&&gt(xe,re))){if(!(ae&&gt(J,re))){if(!oe[re]||ve[re]){if(!(Gn(k)&&(le.tagNameCheck instanceof RegExp&&gt(le.tagNameCheck,k)||le.tagNameCheck instanceof Function&&le.tagNameCheck(k))&&(le.attributeNameCheck instanceof RegExp&&gt(le.attributeNameCheck,re)||le.attributeNameCheck instanceof Function&&le.attributeNameCheck(re))||re==="is"&&le.allowCustomizedBuiltInElements&&(le.tagNameCheck instanceof RegExp&&gt(le.tagNameCheck,Ee)||le.tagNameCheck instanceof Function&&le.tagNameCheck(Ee))))return!1}else if(!v[re]){if(!gt(se,fn(Ee,ee,""))){if(!((re==="src"||re==="xlink:href"||re==="href")&&k!=="script"&&ep(Ee,"data:")===0&&f[k])){if(!(w&&!gt(we,fn(Ee,ee,"")))){if(Ee)return!1}}}}}}return!0},Gn=function(k){return k!=="annotation-xml"&&Zo(k,z)},Hn=function(k){Rt("beforeSanitizeAttributes",k,null);const{attributes:re}=k;if(!re)return;const Ee={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:oe};let Ve=re.length;for(;Ve--;){const U=re[Ve],{name:Be,namespaceURI:Ne,value:Oe}=U,Dt=Xe(Be);let Ye=Be==="value"?Oe:tp(Oe);if(Ee.attrName=Dt,Ee.attrValue=Ye,Ee.keepAttr=!0,Ee.forceKeepAttr=void 0,Rt("uponSanitizeAttribute",k,Ee),Ye=Ee.attrValue,Ee.forceKeepAttr||(Lr(Be,k),!Ee.keepAttr))continue;if(!s&&gt(/\/>/i,Ye)){Lr(Be,k);continue}h&&ni([ye,ge,Ae],qa=>{Ye=fn(Ye,qa," ")});const hs=Xe(k.nodeName);if(qn(hs,Dt,Ye)){if(S&&(Dt==="id"||Dt==="name")&&(Lr(Be,k),Ye=M+Ye),_&&gt(/((--!?|])>)|<\/(style|title)/i,Ye)){Lr(Be,k);continue}if(X&&typeof I=="object"&&typeof I.getAttributeType=="function"&&!Ne)switch(I.getAttributeType(hs,Dt)){case"TrustedHTML":{Ye=X.createHTML(Ye);break}case"TrustedScriptURL":{Ye=X.createScriptURL(Ye);break}}try{Ne?k.setAttributeNS(Ne,Be,Ye):k.setAttribute(Be,Ye),Ln(k)?Nt(k):Yo(t.removed)}catch{}}}Rt("afterSanitizeAttributes",k,null)},ds=function Te(k){let re=null;const Ee=Vn(k);for(Rt("beforeSanitizeShadowDOM",k,null);re=Ee.nextNode();)Rt("uponSanitizeShadowNode",re,null),!Dn(re)&&(re.content instanceof o&&Te(re.content),Hn(re));Rt("afterSanitizeShadowDOM",k,null)};return t.sanitize=function(Te){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=null,Ee=null,Ve=null,U=null;if(Re=!Te,Re&&(Te="<!-->"),typeof Te!="string"&&!qe(Te))if(typeof Te.toString=="function"){if(Te=Te.toString(),typeof Te!="string")throw ln("dirty is not a string, aborting")}else throw ln("toString is not a function");if(!t.isSupported)return Te;if(N||Mn(k),t.removed=[],typeof Te=="string"&&(ne=!1),ne){if(Te.nodeName){const Oe=Xe(Te.nodeName);if(!Y[Oe]||pe[Oe])throw ln("root node is forbidden and cannot be sanitized in-place")}}else if(Te instanceof c)re=$n("<!---->"),Ee=re.ownerDocument.importNode(Te,!0),Ee.nodeType===hn.element&&Ee.nodeName==="BODY"||Ee.nodeName==="HTML"?re=Ee:re.appendChild(Ee);else{if(!a&&!h&&!T&&Te.indexOf("<")===-1)return X&&g?X.createHTML(Te):Te;if(re=$n(Te),!re)return a?null:g?K:""}re&&p&&Nt(re.firstChild);const Be=Vn(ne?Te:re);for(;Ve=Be.nextNode();)Dn(Ve)||(Ve.content instanceof o&&ds(Ve.content),Hn(Ve));if(ne)return Te;if(a){if(u)for(U=Q.call(re.ownerDocument);re.firstChild;)U.appendChild(re.firstChild);else U=re;return(oe.shadowroot||oe.shadowrootmode)&&(U=W.call(n,U,!0)),U}let Ne=T?re.outerHTML:re.innerHTML;return T&&Y["!doctype"]&&re.ownerDocument&&re.ownerDocument.doctype&&re.ownerDocument.doctype.name&&gt(hf,re.ownerDocument.doctype.name)&&(Ne="<!DOCTYPE "+re.ownerDocument.doctype.name+`>
`+Ne),h&&ni([ye,ge,Ae],Oe=>{Ne=fn(Ne,Oe," ")}),X&&g?X.createHTML(Ne):Ne},t.setConfig=function(){let Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Mn(Te),N=!0},t.clearConfig=function(){cr=null,N=!1},t.isValidAttribute=function(Te,k,re){cr||Mn({});const Ee=Xe(Te),Ve=Xe(k);return qn(Ee,Ve,re)},t.addHook=function(Te,k){typeof k=="function"&&(ce[Te]=ce[Te]||[],un(ce[Te],k))},t.removeHook=function(Te){if(ce[Te])return Yo(ce[Te])},t.removeHooks=function(Te){ce[Te]&&(ce[Te]=[])},t.removeAllHooks=function(){ce={}},t}var Zp=pf(),gp=({IDL:e})=>{let t=e.Rec(),r=e.Rec(),n=e.Rec(),i=e.Record({num_blocks_to_archive:e.Opt(e.Nat64),max_transactions_per_response:e.Opt(e.Nat64),trigger_threshold:e.Opt(e.Nat64),more_controller_ids:e.Opt(e.Vec(e.Principal)),max_message_size_bytes:e.Opt(e.Nat64),cycles_for_archive_creation:e.Opt(e.Nat64),node_max_memory_size_bytes:e.Opt(e.Nat64),controller_id:e.Opt(e.Principal)}),o=e.Variant({Int:e.Int,Nat:e.Nat,Blob:e.Vec(e.Nat8),Text:e.Text}),l=e.Vec(e.Nat8),c=e.Record({owner:e.Principal,subaccount:e.Opt(l)}),m=e.Variant({SetTo:c,Unset:e.Null}),b=e.Record({icrc2:e.Bool}),B=e.Record({change_archive_options:e.Opt(i),token_symbol:e.Opt(e.Text),transfer_fee:e.Opt(e.Nat),metadata:e.Opt(e.Vec(e.Tuple(e.Text,o))),accounts_overflow_trim_quantity:e.Opt(e.Nat64),change_fee_collector:e.Opt(m),max_memo_length:e.Opt(e.Nat16),token_name:e.Opt(e.Text),feature_flags:e.Opt(b)}),A=e.Record({decimals:e.Opt(e.Nat8),token_symbol:e.Text,transfer_fee:e.Nat,metadata:e.Vec(e.Tuple(e.Text,o)),minting_account:c,initial_balances:e.Vec(e.Tuple(c,e.Nat)),maximum_number_of_accounts:e.Opt(e.Nat64),accounts_overflow_trim_quantity:e.Opt(e.Nat64),fee_collector_account:e.Opt(c),archive_options:e.Record({num_blocks_to_archive:e.Nat64,max_transactions_per_response:e.Opt(e.Nat64),trigger_threshold:e.Nat64,more_controller_ids:e.Opt(e.Vec(e.Principal)),max_message_size_bytes:e.Opt(e.Nat64),cycles_for_archive_creation:e.Opt(e.Nat64),node_max_memory_size_bytes:e.Opt(e.Nat64),controller_id:e.Principal}),max_memo_length:e.Opt(e.Nat16),token_name:e.Text,feature_flags:e.Opt(b)});e.Variant({Upgrade:e.Opt(B),Init:A});let P=e.Nat,I=e.Record({block_range_end:P,canister_id:e.Principal,block_range_start:P}),O=e.Record({start:P,length:e.Nat}),F=e.Vec(e.Tuple(e.Text,n));n.fill(e.Variant({Int:e.Int,Map:F,Nat:e.Nat,Nat64:e.Nat64,Blob:e.Vec(e.Nat8),Text:e.Text,Array:e.Vec(n)}));let D=n,H=e.Record({blocks:e.Vec(D)}),q=e.Func([O],[H],[]),Z=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),first_index:P,blocks:e.Vec(D),chain_length:e.Nat64,archived_blocks:e.Vec(e.Record({callback:q,start:P,length:e.Nat}))}),X=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),hash_tree:e.Vec(e.Nat8)}),K=e.Nat,j=e.Record({start:K,length:e.Nat}),$=e.Nat64,Q=e.Record({from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt($),amount:e.Nat,spender:e.Opt(c)}),he=e.Record({to:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt($),amount:e.Nat}),W=e.Record({fee:e.Opt(e.Nat),from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt($),amount:e.Nat,expected_allowance:e.Opt(e.Nat),expires_at:e.Opt($),spender:c}),ce=e.Record({to:c,fee:e.Opt(e.Nat),from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt($),amount:e.Nat,spender:e.Opt(c)}),ye=e.Record({burn:e.Opt(Q),kind:e.Text,mint:e.Opt(he),approve:e.Opt(W),timestamp:$,transfer:e.Opt(ce)}),ge=e.Record({transactions:e.Vec(ye)}),Ae=e.Func([j],[ge],[]),xe=e.Record({first_index:K,log_length:e.Nat,transactions:e.Vec(ye),archived_transactions:e.Vec(e.Record({callback:Ae,start:K,length:e.Nat}))}),J=e.Nat,we=e.Record({url:e.Text,name:e.Text}),ee=e.Record({to:c,fee:e.Opt(J),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(l),created_at_time:e.Opt($),amount:J}),z=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,BadBurn:e.Record({min_burn_amount:J}),Duplicate:e.Record({duplicate_of:P}),BadFee:e.Record({expected_fee:J}),CreatedInFuture:e.Record({ledger_time:$}),TooOld:e.Null,InsufficientFunds:e.Record({balance:J})}),se=e.Variant({Ok:P,Err:z}),Y=e.Record({utc_offset_minutes:e.Opt(e.Int16),language:e.Text}),ie=e.Record({metadata:Y,device_spec:e.Opt(e.Variant({GenericDisplay:e.Null,LineDisplay:e.Record({characters_per_line:e.Nat16,lines_per_page:e.Nat16})}))}),oe=e.Record({arg:e.Vec(e.Nat8),method:e.Text,user_preferences:ie}),E=e.Variant({LineDisplayMessage:e.Record({pages:e.Vec(e.Record({lines:e.Vec(e.Text)}))}),GenericDisplayMessage:e.Text}),le=e.Record({metadata:Y,consent_message:E}),pe=e.Record({description:e.Text}),ve=e.Variant({GenericError:e.Record({description:e.Text,error_code:e.Nat}),InsufficientPayment:pe,UnsupportedCanisterCall:pe,ConsentMessageUnavailable:pe}),ae=e.Variant({Ok:le,Err:ve}),ue=e.Record({account:c,spender:c}),w=e.Record({allowance:e.Nat,expires_at:e.Opt($)}),s=e.Record({fee:e.Opt(e.Nat),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt($),amount:e.Nat,expected_allowance:e.Opt(e.Nat),expires_at:e.Opt($),spender:c}),h=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,Duplicate:e.Record({duplicate_of:P}),BadFee:e.Record({expected_fee:e.Nat}),AllowanceChanged:e.Record({current_allowance:e.Nat}),CreatedInFuture:e.Record({ledger_time:$}),TooOld:e.Null,Expired:e.Record({ledger_time:$}),InsufficientFunds:e.Record({balance:e.Nat})}),_=e.Variant({Ok:P,Err:h}),T=e.Record({to:c,fee:e.Opt(J),spender_subaccount:e.Opt(l),from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt($),amount:J}),N=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,InsufficientAllowance:e.Record({allowance:J}),BadBurn:e.Record({min_burn_amount:J}),Duplicate:e.Record({duplicate_of:P}),BadFee:e.Record({expected_fee:J}),CreatedInFuture:e.Record({ledger_time:$}),TooOld:e.Null,InsufficientFunds:e.Record({balance:J})}),p=e.Variant({Ok:P,Err:N}),a=e.Record({from:e.Opt(e.Principal)}),u=e.Vec(e.Record({end:e.Nat,canister_id:e.Principal,start:e.Nat}));r.fill(e.Variant({Int:e.Int,Map:e.Vec(e.Tuple(e.Text,r)),Nat:e.Nat,Blob:e.Vec(e.Nat8),Text:e.Text,Array:e.Vec(r)})),t.fill(e.Record({log_length:e.Nat,blocks:e.Vec(e.Record({id:e.Nat,block:r})),archived_blocks:e.Vec(e.Record({args:e.Vec(O),callback:e.Func([e.Vec(O)],[t],[])}))}));let g=e.Record({certificate:e.Vec(e.Nat8),hash_tree:e.Vec(e.Nat8)});return e.Service({archives:e.Func([],[e.Vec(I)],[]),get_blocks:e.Func([O],[Z],[]),get_data_certificate:e.Func([],[X],[]),get_transactions:e.Func([j],[xe],[]),icrc10_supported_standards:e.Func([],[e.Vec(e.Record({url:e.Text,name:e.Text}))],[]),icrc1_balance_of:e.Func([c],[J],[]),icrc1_decimals:e.Func([],[e.Nat8],[]),icrc1_fee:e.Func([],[J],[]),icrc1_metadata:e.Func([],[e.Vec(e.Tuple(e.Text,o))],[]),icrc1_minting_account:e.Func([],[e.Opt(c)],[]),icrc1_name:e.Func([],[e.Text],[]),icrc1_supported_standards:e.Func([],[e.Vec(we)],[]),icrc1_symbol:e.Func([],[e.Text],[]),icrc1_total_supply:e.Func([],[J],[]),icrc1_transfer:e.Func([ee],[se],[]),icrc21_canister_call_consent_message:e.Func([oe],[ae],[]),icrc2_allowance:e.Func([ue],[w],[]),icrc2_approve:e.Func([s],[_],[]),icrc2_transfer_from:e.Func([T],[p],[]),icrc3_get_archives:e.Func([a],[u],[]),icrc3_get_blocks:e.Func([e.Vec(O)],[t],[]),icrc3_get_tip_certificate:e.Func([],[e.Opt(g)],[]),icrc3_supported_block_types:e.Func([],[e.Vec(e.Record({url:e.Text,block_type:e.Text}))],[])})},mp=({IDL:e})=>{let t=e.Rec(),r=e.Rec(),n=e.Rec(),i=e.Record({num_blocks_to_archive:e.Opt(e.Nat64),max_transactions_per_response:e.Opt(e.Nat64),trigger_threshold:e.Opt(e.Nat64),more_controller_ids:e.Opt(e.Vec(e.Principal)),max_message_size_bytes:e.Opt(e.Nat64),cycles_for_archive_creation:e.Opt(e.Nat64),node_max_memory_size_bytes:e.Opt(e.Nat64),controller_id:e.Opt(e.Principal)}),o=e.Variant({Int:e.Int,Nat:e.Nat,Blob:e.Vec(e.Nat8),Text:e.Text}),l=e.Vec(e.Nat8),c=e.Record({owner:e.Principal,subaccount:e.Opt(l)}),m=e.Variant({SetTo:c,Unset:e.Null}),b=e.Record({icrc2:e.Bool}),B=e.Record({change_archive_options:e.Opt(i),token_symbol:e.Opt(e.Text),transfer_fee:e.Opt(e.Nat),metadata:e.Opt(e.Vec(e.Tuple(e.Text,o))),accounts_overflow_trim_quantity:e.Opt(e.Nat64),change_fee_collector:e.Opt(m),max_memo_length:e.Opt(e.Nat16),token_name:e.Opt(e.Text),feature_flags:e.Opt(b)}),A=e.Record({decimals:e.Opt(e.Nat8),token_symbol:e.Text,transfer_fee:e.Nat,metadata:e.Vec(e.Tuple(e.Text,o)),minting_account:c,initial_balances:e.Vec(e.Tuple(c,e.Nat)),maximum_number_of_accounts:e.Opt(e.Nat64),accounts_overflow_trim_quantity:e.Opt(e.Nat64),fee_collector_account:e.Opt(c),archive_options:e.Record({num_blocks_to_archive:e.Nat64,max_transactions_per_response:e.Opt(e.Nat64),trigger_threshold:e.Nat64,more_controller_ids:e.Opt(e.Vec(e.Principal)),max_message_size_bytes:e.Opt(e.Nat64),cycles_for_archive_creation:e.Opt(e.Nat64),node_max_memory_size_bytes:e.Opt(e.Nat64),controller_id:e.Principal}),max_memo_length:e.Opt(e.Nat16),token_name:e.Text,feature_flags:e.Opt(b)});e.Variant({Upgrade:e.Opt(B),Init:A});let P=e.Nat,I=e.Record({block_range_end:P,canister_id:e.Principal,block_range_start:P}),O=e.Record({start:P,length:e.Nat}),F=e.Vec(e.Tuple(e.Text,n));n.fill(e.Variant({Int:e.Int,Map:F,Nat:e.Nat,Nat64:e.Nat64,Blob:e.Vec(e.Nat8),Text:e.Text,Array:e.Vec(n)}));let D=n,H=e.Record({blocks:e.Vec(D)}),q=e.Func([O],[H],["query"]),Z=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),first_index:P,blocks:e.Vec(D),chain_length:e.Nat64,archived_blocks:e.Vec(e.Record({callback:q,start:P,length:e.Nat}))}),X=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),hash_tree:e.Vec(e.Nat8)}),K=e.Nat,j=e.Record({start:K,length:e.Nat}),$=e.Nat64,Q=e.Record({from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt($),amount:e.Nat,spender:e.Opt(c)}),he=e.Record({to:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt($),amount:e.Nat}),W=e.Record({fee:e.Opt(e.Nat),from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt($),amount:e.Nat,expected_allowance:e.Opt(e.Nat),expires_at:e.Opt($),spender:c}),ce=e.Record({to:c,fee:e.Opt(e.Nat),from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt($),amount:e.Nat,spender:e.Opt(c)}),ye=e.Record({burn:e.Opt(Q),kind:e.Text,mint:e.Opt(he),approve:e.Opt(W),timestamp:$,transfer:e.Opt(ce)}),ge=e.Record({transactions:e.Vec(ye)}),Ae=e.Func([j],[ge],["query"]),xe=e.Record({first_index:K,log_length:e.Nat,transactions:e.Vec(ye),archived_transactions:e.Vec(e.Record({callback:Ae,start:K,length:e.Nat}))}),J=e.Nat,we=e.Record({url:e.Text,name:e.Text}),ee=e.Record({to:c,fee:e.Opt(J),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(l),created_at_time:e.Opt($),amount:J}),z=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,BadBurn:e.Record({min_burn_amount:J}),Duplicate:e.Record({duplicate_of:P}),BadFee:e.Record({expected_fee:J}),CreatedInFuture:e.Record({ledger_time:$}),TooOld:e.Null,InsufficientFunds:e.Record({balance:J})}),se=e.Variant({Ok:P,Err:z}),Y=e.Record({utc_offset_minutes:e.Opt(e.Int16),language:e.Text}),ie=e.Record({metadata:Y,device_spec:e.Opt(e.Variant({GenericDisplay:e.Null,LineDisplay:e.Record({characters_per_line:e.Nat16,lines_per_page:e.Nat16})}))}),oe=e.Record({arg:e.Vec(e.Nat8),method:e.Text,user_preferences:ie}),E=e.Variant({LineDisplayMessage:e.Record({pages:e.Vec(e.Record({lines:e.Vec(e.Text)}))}),GenericDisplayMessage:e.Text}),le=e.Record({metadata:Y,consent_message:E}),pe=e.Record({description:e.Text}),ve=e.Variant({GenericError:e.Record({description:e.Text,error_code:e.Nat}),InsufficientPayment:pe,UnsupportedCanisterCall:pe,ConsentMessageUnavailable:pe}),ae=e.Variant({Ok:le,Err:ve}),ue=e.Record({account:c,spender:c}),w=e.Record({allowance:e.Nat,expires_at:e.Opt($)}),s=e.Record({fee:e.Opt(e.Nat),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt($),amount:e.Nat,expected_allowance:e.Opt(e.Nat),expires_at:e.Opt($),spender:c}),h=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,Duplicate:e.Record({duplicate_of:P}),BadFee:e.Record({expected_fee:e.Nat}),AllowanceChanged:e.Record({current_allowance:e.Nat}),CreatedInFuture:e.Record({ledger_time:$}),TooOld:e.Null,Expired:e.Record({ledger_time:$}),InsufficientFunds:e.Record({balance:e.Nat})}),_=e.Variant({Ok:P,Err:h}),T=e.Record({to:c,fee:e.Opt(J),spender_subaccount:e.Opt(l),from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt($),amount:J}),N=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,InsufficientAllowance:e.Record({allowance:J}),BadBurn:e.Record({min_burn_amount:J}),Duplicate:e.Record({duplicate_of:P}),BadFee:e.Record({expected_fee:J}),CreatedInFuture:e.Record({ledger_time:$}),TooOld:e.Null,InsufficientFunds:e.Record({balance:J})}),p=e.Variant({Ok:P,Err:N}),a=e.Record({from:e.Opt(e.Principal)}),u=e.Vec(e.Record({end:e.Nat,canister_id:e.Principal,start:e.Nat}));r.fill(e.Variant({Int:e.Int,Map:e.Vec(e.Tuple(e.Text,r)),Nat:e.Nat,Blob:e.Vec(e.Nat8),Text:e.Text,Array:e.Vec(r)})),t.fill(e.Record({log_length:e.Nat,blocks:e.Vec(e.Record({id:e.Nat,block:r})),archived_blocks:e.Vec(e.Record({args:e.Vec(O),callback:e.Func([e.Vec(O)],[t],["query"])}))}));let g=e.Record({certificate:e.Vec(e.Nat8),hash_tree:e.Vec(e.Nat8)});return e.Service({archives:e.Func([],[e.Vec(I)],["query"]),get_blocks:e.Func([O],[Z],["query"]),get_data_certificate:e.Func([],[X],["query"]),get_transactions:e.Func([j],[xe],["query"]),icrc10_supported_standards:e.Func([],[e.Vec(e.Record({url:e.Text,name:e.Text}))],["query"]),icrc1_balance_of:e.Func([c],[J],["query"]),icrc1_decimals:e.Func([],[e.Nat8],["query"]),icrc1_fee:e.Func([],[J],["query"]),icrc1_metadata:e.Func([],[e.Vec(e.Tuple(e.Text,o))],["query"]),icrc1_minting_account:e.Func([],[e.Opt(c)],["query"]),icrc1_name:e.Func([],[e.Text],["query"]),icrc1_supported_standards:e.Func([],[e.Vec(we)],["query"]),icrc1_symbol:e.Func([],[e.Text],["query"]),icrc1_total_supply:e.Func([],[J],["query"]),icrc1_transfer:e.Func([ee],[se],[]),icrc21_canister_call_consent_message:e.Func([oe],[ae],[]),icrc2_allowance:e.Func([ue],[w],["query"]),icrc2_approve:e.Func([s],[_],[]),icrc2_transfer_from:e.Func([T],[p],[]),icrc3_get_archives:e.Func([a],[u],["query"]),icrc3_get_blocks:e.Func([e.Vec(O)],[t],["query"]),icrc3_get_tip_certificate:e.Func([],[e.Opt(g)],["query"]),icrc3_supported_block_types:e.Func([],[e.Vec(e.Record({url:e.Text,block_type:e.Text}))],["query"])})},wp=({from_subaccount:e,fee:t,created_at_time:r,memo:n,...i})=>({...i,fee:st(t),memo:st(n),from_subaccount:st(e),created_at_time:st(r)}),bp=({spender_subaccount:e,fee:t,created_at_time:r,memo:n,...i})=>({...i,fee:st(t),memo:st(n),spender_subaccount:st(e),created_at_time:st(r)}),_p=({fee:e,created_at_time:t,memo:r,from_subaccount:n,expected_allowance:i,expires_at:o,...l})=>({...l,fee:st(e),memo:st(r),from_subaccount:st(n),created_at_time:st(t),expected_allowance:st(i),expires_at:st(o)}),Ep=({userPreferences:{metadata:{utcOffsetMinutes:e,language:t},deriveSpec:r},...n})=>({...n,user_preferences:{metadata:{language:t,utc_offset_minutes:st(e)},device_spec:uf(r)?st():st("GenericDisplay"in r?{GenericDisplay:null}:{LineDisplay:{characters_per_line:r.LineDisplay.charactersPerLine,lines_per_page:r.LineDisplay.linesPerPage}})}}),Ls=class extends Error{constructor({msg:e,errorType:t}){super(e),this.errorType=t}},xp=class extends Error{constructor(e,t){super(),this.message=e,this.error_code=t}},is=class extends Error{},Tp=class extends is{},vp=class extends is{},Ap=class extends is{},Bp=e=>"GenericError"in e?new xp(e.GenericError.description,e.GenericError.error_code):"InsufficientPayment"in e?new Tp(e.InsufficientPayment.description):"UnsupportedCanisterCall"in e?new vp(e.UnsupportedCanisterCall.description):"ConsentMessageUnavailable"in e?new Ap(e.ConsentMessageUnavailable.description):new is(`Unknown error type ${JSON.stringify(e)}`),Xp=class yf extends Wh{constructor(){super(...arguments),this.metadata=t=>this.caller(t).icrc1_metadata(),this.transactionFee=t=>this.caller(t).icrc1_fee(),this.balance=t=>this.caller({certified:t.certified}).icrc1_balance_of({owner:t.owner,subaccount:st(t.subaccount)}),this.transfer=async t=>{let r=await this.caller({certified:!0}).icrc1_transfer(wp(t));if("Err"in r)throw new Ls({errorType:r.Err,msg:"Failed to transfer"});return r.Ok},this.totalTokensSupply=t=>this.caller(t).icrc1_total_supply(),this.transferFrom=async t=>{let r=await this.caller({certified:!0}).icrc2_transfer_from(bp(t));if("Err"in r)throw new Ls({errorType:r.Err,msg:"Failed to transfer from"});return r.Ok},this.approve=async t=>{let r=await this.caller({certified:!0}).icrc2_approve(_p(t));if("Err"in r)throw new Ls({errorType:r.Err,msg:"Failed to entitle the spender to transfer the amount"});return r.Ok},this.allowance=async t=>{let{certified:r,...n}=t;return this.caller({certified:r}).icrc2_allowance({...n})},this.consentMessage=async t=>{let{icrc21_canister_call_consent_message:r}=this.caller({certified:!0}),n=await r(Ep(t));if("Err"in n)throw Bp(n.Err);return n.Ok}}static create(t){let{service:r,certifiedService:n,canisterId:i}=Zh({options:t,idlFactory:mp,certifiedIdlFactory:gp});return new yf(i,r,n)}},Ip=(e=>(e.SYMBOL="icrc1:symbol",e.NAME="icrc1:name",e.DECIMALS="icrc1:decimals",e.FEE="icrc1:fee",e.LOGO="icrc1:logo",e))(Ip||{}),Sp={};const Np=Tf(sl);var mt={};Object.defineProperty(mt,"__esModule",{value:!0});mt.bufFromBufLike=mt.uint8ToBuf=mt.PipeArrayBuffer=mt.fromHexString=mt.toHexString=mt.concat=void 0;function Rp(...e){const t=new Uint8Array(e.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of e)t.set(new Uint8Array(n),r),r+=n.byteLength;return t}mt.concat=Rp;function Op(e){return new Uint8Array(e).reduce((t,r)=>t+r.toString(16).padStart(2,"0"),"")}mt.toHexString=Op;function Up(e){var t;return new Uint8Array(((t=e.match(/.{1,2}/g))!==null&&t!==void 0?t:[]).map(r=>parseInt(r,16)))}mt.fromHexString=Up;class Fp{constructor(t,r=t?.byteLength||0){this._buffer=qi(t||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}get buffer(){return qi(this._view.slice())}get byteLength(){return this._view.byteLength}read(t){const r=this._view.subarray(0,t);return this._view=this._view.subarray(t),r.slice().buffer}readUint8(){const t=this._view[0];return this._view=this._view.subarray(1),t}write(t){const r=new Uint8Array(t),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,n)}get end(){return this._view.byteLength===0}alloc(t){const r=new ArrayBuffer((this._buffer.byteLength+t)*1.2|0),n=new Uint8Array(r,0,this._view.byteLength+t);n.set(this._view),this._buffer=r,this._view=n}}mt.PipeArrayBuffer=Fp;function Ii(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).buffer}mt.uint8ToBuf=Ii;function qi(e){return e instanceof Uint8Array?Ii(e):e instanceof ArrayBuffer?e:Array.isArray(e)?Ii(new Uint8Array(e)):"buffer"in e?qi(e.buffer):Ii(new Uint8Array(e))}mt.bufFromBufLike=qi;var ss={};Object.defineProperty(ss,"__esModule",{value:!0});ss.idlLabelToId=void 0;function Pp(e){const r=new TextEncoder().encode(e);let n=0;for(const i of r)n=(n*223+i)%2**32;return n}function Cp(e){if(/^_\d+_$/.test(e)||/^_0x[0-9a-fA-F]+_$/.test(e)){const t=+e.slice(1,-1);if(Number.isSafeInteger(t)&&t>=0&&t<2**32)return t}return Pp(e)}ss.idlLabelToId=Cp;var He={};Object.defineProperty(He,"__esModule",{value:!0});He.readIntLE=He.readUIntLE=He.writeIntLE=He.writeUIntLE=He.slebDecode=He.slebEncode=He.lebDecode=He.lebEncode=He.safeReadUint8=He.safeRead=void 0;const Va=mt;function gf(){throw new Error("unexpected end of buffer")}function mf(e,t){return e.byteLength<t&&gf(),e.read(t)}He.safeRead=mf;function Gi(e){const t=e.readUint8();return t===void 0&&gf(),t}He.safeReadUint8=Gi;function kp(e){if(typeof e=="number"&&(e=BigInt(e)),e<BigInt(0))throw new Error("Cannot leb encode negative values.");const t=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,r=new Va.PipeArrayBuffer(new ArrayBuffer(t),0);for(;;){const n=Number(e&BigInt(127));if(e/=BigInt(128),e===BigInt(0)){r.write(new Uint8Array([n]));break}else r.write(new Uint8Array([n|128]))}return r.buffer}He.lebEncode=kp;function wf(e){let t=BigInt(1),r=BigInt(0),n;do n=Gi(e),r+=BigInt(n&127).valueOf()*t,t*=BigInt(128);while(n>=128);return r}He.lebDecode=wf;function Mp(e){typeof e=="number"&&(e=BigInt(e));const t=e<BigInt(0);t&&(e=-e-BigInt(1));const r=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,n=new Va.PipeArrayBuffer(new ArrayBuffer(r),0);for(;;){const o=i(e);if(e/=BigInt(128),t&&e===BigInt(0)&&o&64||!t&&e===BigInt(0)&&!(o&64)){n.write(new Uint8Array([o]));break}else n.write(new Uint8Array([o|128]))}function i(o){const l=o%BigInt(128);return Number(t?BigInt(128)-l-BigInt(1):l)}return n.buffer}He.slebEncode=Mp;function $p(e){const t=new Uint8Array(e.buffer);let r=0;for(;r<t.byteLength;r++)if(t[r]<128){if(!(t[r]&64))return wf(e);break}const n=new Uint8Array(mf(e,r+1));let i=BigInt(0);for(let o=n.byteLength-1;o>=0;o--)i=i*BigInt(128)+BigInt(128-(n[o]&127)-1);return-i-BigInt(1)}He.slebDecode=$p;function Vp(e,t){if(BigInt(e)<BigInt(0))throw new Error("Cannot write negative values.");return bf(e,t)}He.writeUIntLE=Vp;function bf(e,t){e=BigInt(e);const r=new Va.PipeArrayBuffer(new ArrayBuffer(Math.min(1,t)),0);let n=0,i=BigInt(256),o=BigInt(0),l=Number(e%i);for(r.write(new Uint8Array([l]));++n<t;)e<0&&o===BigInt(0)&&l!==0&&(o=BigInt(1)),l=Number((e/i-o)%BigInt(256)),r.write(new Uint8Array([l])),i*=BigInt(256);return r.buffer}He.writeIntLE=bf;function _f(e,t){let r=BigInt(Gi(e)),n=BigInt(1),i=0;for(;++i<t;){n*=BigInt(256);const o=BigInt(Gi(e));r=r+n*o}return r}He.readUIntLE=_f;function Lp(e,t){let r=_f(e,t);const n=BigInt(2)**(BigInt(8)*BigInt(t-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}He.readIntLE=Lp;var nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.iexp2=nn.ilog2=void 0;function Dp(e){const t=BigInt(e);if(e<=0)throw new RangeError("Input must be positive");return t.toString(2).length-1}nn.ilog2=Dp;function qp(e){const t=BigInt(e);if(e<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<t}nn.iexp2=qp;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Variant=e.Record=e.Opt=e.Vec=e.Tuple=e.Principal=e.Nat64=e.Nat32=e.Nat16=e.Nat8=e.Int64=e.Int32=e.Int16=e.Int8=e.Float64=e.Float32=e.Nat=e.Int=e.Text=e.Null=e.Bool=e.Unknown=e.Reserved=e.Empty=e.decode=e.encode=e.ServiceClass=e.FuncClass=e.PrincipalClass=e.RecClass=e.VariantClass=e.TupleClass=e.RecordClass=e.OptClass=e.VecClass=e.FixedNatClass=e.FixedIntClass=e.FloatClass=e.NatClass=e.IntClass=e.TextClass=e.ReservedClass=e.NullClass=e.BoolClass=e.UnknownClass=e.EmptyClass=e.ConstructType=e.PrimitiveType=e.Type=e.Visitor=void 0,e.Service=e.Func=e.Rec=void 0;const t=Np,r=mt,n=ss,i=He,o=nn,l="DIDL",c=400;function m(w,s,h){return w.map((_,T)=>h(_,s[T]))}class b{constructor(){this._typs=[],this._idx=new Map}has(s){return this._idx.has(s.name)}add(s,h){const _=this._typs.length;this._idx.set(s.name,_),this._typs.push(h)}merge(s,h){const _=this._idx.get(s.name),T=this._idx.get(h);if(_===void 0)throw new Error("Missing type index for "+s);if(T===void 0)throw new Error("Missing type index for "+h);this._typs[_]=this._typs[T],this._typs.splice(T,1),this._idx.delete(h)}encode(){const s=(0,i.lebEncode)(this._typs.length),h=(0,r.concat)(...this._typs);return(0,r.concat)(s,h)}indexOf(s){if(!this._idx.has(s))throw new Error("Missing type index for "+s);return(0,i.slebEncode)(this._idx.get(s)||0)}}class B{visitType(s,h){throw new Error("Not implemented")}visitPrimitive(s,h){return this.visitType(s,h)}visitEmpty(s,h){return this.visitPrimitive(s,h)}visitBool(s,h){return this.visitPrimitive(s,h)}visitNull(s,h){return this.visitPrimitive(s,h)}visitReserved(s,h){return this.visitPrimitive(s,h)}visitText(s,h){return this.visitPrimitive(s,h)}visitNumber(s,h){return this.visitPrimitive(s,h)}visitInt(s,h){return this.visitNumber(s,h)}visitNat(s,h){return this.visitNumber(s,h)}visitFloat(s,h){return this.visitPrimitive(s,h)}visitFixedInt(s,h){return this.visitNumber(s,h)}visitFixedNat(s,h){return this.visitNumber(s,h)}visitPrincipal(s,h){return this.visitPrimitive(s,h)}visitConstruct(s,h){return this.visitType(s,h)}visitVec(s,h,_){return this.visitConstruct(s,_)}visitOpt(s,h,_){return this.visitConstruct(s,_)}visitRecord(s,h,_){return this.visitConstruct(s,_)}visitTuple(s,h,_){const T=h.map((N,p)=>[`_${p}_`,N]);return this.visitRecord(s,T,_)}visitVariant(s,h,_){return this.visitConstruct(s,_)}visitRec(s,h,_){return this.visitConstruct(h,_)}visitFunc(s,h){return this.visitConstruct(s,h)}visitService(s,h){return this.visitConstruct(s,h)}}e.Visitor=B;class A{display(){return this.name}valueToString(s){return z(s)}buildTypeTable(s){s.has(this)||this._buildTypeTableImpl(s)}}e.Type=A;class P extends A{checkType(s){if(this.name!==s.name)throw new Error(`type mismatch: type on the wire ${s.name}, expect type ${this.name}`);return s}_buildTypeTableImpl(s){}}e.PrimitiveType=P;class I extends A{checkType(s){if(s instanceof Ae){const h=s.getType();if(typeof h>"u")throw new Error("type mismatch with uninitialized type");return h}throw new Error(`type mismatch: type on the wire ${s.name}, expect type ${this.name}`)}encodeType(s){return s.indexOf(this.name)}}e.ConstructType=I;class O extends P{accept(s,h){return s.visitEmpty(this,h)}covariant(s){throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return(0,i.slebEncode)(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}e.EmptyClass=O;class F extends A{checkType(s){throw new Error("Method not implemented for unknown.")}accept(s,h){throw s.visitType(this,h)}covariant(s){throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(s,h){let _=h.decodeValue(s,h);Object(_)!==_&&(_=Object(_));let T;return h instanceof Ae?T=()=>h.getType():T=()=>h,Object.defineProperty(_,"type",{value:T,writable:!0,enumerable:!1,configurable:!0}),_}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}e.UnknownClass=F;class D extends P{accept(s,h){return s.visitBool(this,h)}covariant(s){if(typeof s=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(s){return new Uint8Array([s?1:0])}encodeType(){return(0,i.slebEncode)(-2)}decodeValue(s,h){switch(this.checkType(h),(0,i.safeReadUint8)(s)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}e.BoolClass=D;class H extends P{accept(s,h){return s.visitNull(this,h)}covariant(s){if(s===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return(0,i.slebEncode)(-1)}decodeValue(s,h){return this.checkType(h),null}get name(){return"null"}}e.NullClass=H;class q extends P{accept(s,h){return s.visitReserved(this,h)}covariant(s){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return(0,i.slebEncode)(-16)}decodeValue(s,h){return h.name!==this.name&&h.decodeValue(s,h),null}get name(){return"reserved"}}e.ReservedClass=q;class Z extends P{accept(s,h){return s.visitText(this,h)}covariant(s){if(typeof s=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(s){const h=new TextEncoder().encode(s),_=(0,i.lebEncode)(h.byteLength);return(0,r.concat)(_,h)}encodeType(){return(0,i.slebEncode)(-15)}decodeValue(s,h){this.checkType(h);const _=(0,i.lebDecode)(s),T=(0,i.safeRead)(s,Number(_));return new TextDecoder("utf8",{fatal:!0}).decode(T)}get name(){return"text"}valueToString(s){return'"'+s+'"'}}e.TextClass=Z;class X extends P{accept(s,h){return s.visitInt(this,h)}covariant(s){if(typeof s=="bigint"||Number.isInteger(s))return!0;throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(s){return(0,i.slebEncode)(s)}encodeType(){return(0,i.slebEncode)(-4)}decodeValue(s,h){return this.checkType(h),(0,i.slebDecode)(s)}get name(){return"int"}valueToString(s){return s.toString()}}e.IntClass=X;class K extends P{accept(s,h){return s.visitNat(this,h)}covariant(s){if(typeof s=="bigint"&&s>=BigInt(0)||Number.isInteger(s)&&s>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(s){return(0,i.lebEncode)(s)}encodeType(){return(0,i.slebEncode)(-3)}decodeValue(s,h){return this.checkType(h),(0,i.lebDecode)(s)}get name(){return"nat"}valueToString(s){return s.toString()}}e.NatClass=K;class j extends P{constructor(s){if(super(),this._bits=s,s!==32&&s!==64)throw new Error("not a valid float type")}accept(s,h){return s.visitFloat(this,h)}covariant(s){if(typeof s=="number"||s instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(s){const h=new ArrayBuffer(this._bits/8),_=new DataView(h);return this._bits===32?_.setFloat32(0,s,!0):_.setFloat64(0,s,!0),h}encodeType(){const s=this._bits===32?-13:-14;return(0,i.slebEncode)(s)}decodeValue(s,h){this.checkType(h);const _=(0,i.safeRead)(s,this._bits/8),T=new DataView(_);return this._bits===32?T.getFloat32(0,!0):T.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(s){return s.toString()}}e.FloatClass=j;class $ extends P{constructor(s){super(),this._bits=s}accept(s,h){return s.visitFixedInt(this,h)}covariant(s){const h=(0,o.iexp2)(this._bits-1)*BigInt(-1),_=(0,o.iexp2)(this._bits-1)-BigInt(1);let T=!1;if(typeof s=="bigint")T=s>=h&&s<=_;else if(Number.isInteger(s)){const N=BigInt(s);T=N>=h&&N<=_}else T=!1;if(T)return!0;throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(s){return(0,i.writeIntLE)(s,this._bits/8)}encodeType(){const s=Math.log2(this._bits)-3;return(0,i.slebEncode)(-9-s)}decodeValue(s,h){this.checkType(h);const _=(0,i.readIntLE)(s,this._bits/8);return this._bits<=32?Number(_):_}get name(){return`int${this._bits}`}valueToString(s){return s.toString()}}e.FixedIntClass=$;class Q extends P{constructor(s){super(),this._bits=s}accept(s,h){return s.visitFixedNat(this,h)}covariant(s){const h=(0,o.iexp2)(this._bits);let _=!1;if(typeof s=="bigint"&&s>=BigInt(0)?_=s<h:Number.isInteger(s)&&s>=0?_=BigInt(s)<h:_=!1,_)return!0;throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(s){return(0,i.writeUIntLE)(s,this._bits/8)}encodeType(){const s=Math.log2(this._bits)-3;return(0,i.slebEncode)(-5-s)}decodeValue(s,h){this.checkType(h);const _=(0,i.readUIntLE)(s,this._bits/8);return this._bits<=32?Number(_):_}get name(){return`nat${this._bits}`}valueToString(s){return s.toString()}}e.FixedNatClass=Q;class he extends I{constructor(s){super(),this._type=s,this._blobOptimization=!1,s instanceof Q&&s._bits===8&&(this._blobOptimization=!0)}accept(s,h){return s.visitVec(this,this._type,h)}covariant(s){const h=this._type instanceof Q?this._type._bits:this._type instanceof $?this._type._bits:0;if(ArrayBuffer.isView(s)&&h==s.BYTES_PER_ELEMENT*8||Array.isArray(s)&&s.every((_,T)=>{try{return this._type.covariant(_)}catch(N){throw new Error(`Invalid ${this.display()} argument: 

index ${T} -> ${N.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(s){const h=(0,i.lebEncode)(s.length);if(this._blobOptimization)return(0,r.concat)(h,new Uint8Array(s));if(ArrayBuffer.isView(s))return(0,r.concat)(h,new Uint8Array(s.buffer));const _=new r.PipeArrayBuffer(new ArrayBuffer(h.byteLength+s.length),0);_.write(h);for(const T of s){const N=this._type.encodeValue(T);_.write(new Uint8Array(N))}return _.buffer}_buildTypeTableImpl(s){this._type.buildTypeTable(s);const h=(0,i.slebEncode)(-19),_=this._type.encodeType(s);s.add(this,(0,r.concat)(h,_))}decodeValue(s,h){const _=this.checkType(h);if(!(_ instanceof he))throw new Error("Not a vector type");const T=Number((0,i.lebDecode)(s));if(this._type instanceof Q){if(this._type._bits==8)return new Uint8Array(s.read(T));if(this._type._bits==16)return new Uint16Array(s.read(T*2));if(this._type._bits==32)return new Uint32Array(s.read(T*4));if(this._type._bits==64)return new BigUint64Array(s.read(T*8))}if(this._type instanceof $){if(this._type._bits==8)return new Int8Array(s.read(T));if(this._type._bits==16)return new Int16Array(s.read(T*2));if(this._type._bits==32)return new Int32Array(s.read(T*4));if(this._type._bits==64)return new BigInt64Array(s.read(T*8))}const N=[];for(let p=0;p<T;p++)N.push(this._type.decodeValue(s,_._type));return N}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(s){return"vec {"+s.map(_=>this._type.valueToString(_)).join("; ")+"}"}}e.VecClass=he;class W extends I{constructor(s){super(),this._type=s}accept(s,h){return s.visitOpt(this,this._type,h)}covariant(s){try{if(Array.isArray(s)&&(s.length===0||s.length===1&&this._type.covariant(s[0])))return!0}catch(h){throw new Error(`Invalid ${this.display()} argument: ${z(s)} 

-> ${h.message}`)}throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(s){return s.length===0?new Uint8Array([0]):(0,r.concat)(new Uint8Array([1]),this._type.encodeValue(s[0]))}_buildTypeTableImpl(s){this._type.buildTypeTable(s);const h=(0,i.slebEncode)(-18),_=this._type.encodeType(s);s.add(this,(0,r.concat)(h,_))}decodeValue(s,h){const _=this.checkType(h);if(!(_ instanceof W))throw new Error("Not an option type");switch((0,i.safeReadUint8)(s)){case 0:return[];case 1:return[this._type.decodeValue(s,_._type)];default:throw new Error("Not an option value")}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(s){return s.length===0?"null":`opt ${this._type.valueToString(s[0])}`}}e.OptClass=W;class ce extends I{constructor(s={}){super(),this._fields=Object.entries(s).sort((h,_)=>(0,n.idlLabelToId)(h[0])-(0,n.idlLabelToId)(_[0]))}accept(s,h){return s.visitRecord(this,this._fields,h)}tryAsTuple(){const s=[];for(let h=0;h<this._fields.length;h++){const[_,T]=this._fields[h];if(_!==`_${h}_`)return null;s.push(T)}return s}covariant(s){if(typeof s=="object"&&this._fields.every(([h,_])=>{if(!s.hasOwnProperty(h))throw new Error(`Record is missing key "${h}".`);try{return _.covariant(s[h])}catch(T){throw new Error(`Invalid ${this.display()} argument: 

field ${h} -> ${T.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(s){const h=this._fields.map(([T])=>s[T]),_=m(this._fields,h,([,T],N)=>T.encodeValue(N));return(0,r.concat)(..._)}_buildTypeTableImpl(s){this._fields.forEach(([N,p])=>p.buildTypeTable(s));const h=(0,i.slebEncode)(-20),_=(0,i.lebEncode)(this._fields.length),T=this._fields.map(([N,p])=>(0,r.concat)((0,i.lebEncode)((0,n.idlLabelToId)(N)),p.encodeType(s)));s.add(this,(0,r.concat)(h,_,(0,r.concat)(...T)))}decodeValue(s,h){const _=this.checkType(h);if(!(_ instanceof ce))throw new Error("Not a record type");const T={};let N=0,p=0;for(;p<_._fields.length;){const[a,u]=_._fields[p];if(N>=this._fields.length){u.decodeValue(s,u),p++;continue}const[g,x]=this._fields[N],S=(0,n.idlLabelToId)(this._fields[N][0]),M=(0,n.idlLabelToId)(a);if(S===M)T[g]=x.decodeValue(s,u),N++,p++;else if(M>S)if(x instanceof W||x instanceof q)T[g]=[],N++;else throw new Error("Cannot find required field "+g);else u.decodeValue(s,u),p++}for(const[a,u]of this._fields.slice(N))if(u instanceof W||u instanceof q)T[a]=[];else throw new Error("Cannot find required field "+a);return T}get name(){return`record {${this._fields.map(([h,_])=>h+":"+_.name).join("; ")}}`}display(){return`record {${this._fields.map(([h,_])=>h+":"+_.display()).join("; ")}}`}valueToString(s){const h=this._fields.map(([T])=>s[T]);return`record {${m(this._fields,h,([T,N],p)=>T+"="+N.valueToString(p)).join("; ")}}`}}e.RecordClass=ce;class ye extends ce{constructor(s){const h={};s.forEach((_,T)=>h["_"+T+"_"]=_),super(h),this._components=s}accept(s,h){return s.visitTuple(this,this._components,h)}covariant(s){if(Array.isArray(s)&&s.length>=this._fields.length&&this._components.every((h,_)=>{try{return h.covariant(s[_])}catch(T){throw new Error(`Invalid ${this.display()} argument: 

index ${_} -> ${T.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(s){const h=m(this._components,s,(_,T)=>_.encodeValue(T));return(0,r.concat)(...h)}decodeValue(s,h){const _=this.checkType(h);if(!(_ instanceof ye))throw new Error("not a tuple type");if(_._components.length<this._components.length)throw new Error("tuple mismatch");const T=[];for(const[N,p]of _._components.entries())N>=this._components.length?p.decodeValue(s,p):T.push(this._components[N].decodeValue(s,p));return T}display(){return`record {${this._components.map(h=>h.display()).join("; ")}}`}valueToString(s){return`record {${m(this._components,s,(_,T)=>_.valueToString(T)).join("; ")}}`}}e.TupleClass=ye;class ge extends I{constructor(s={}){super(),this._fields=Object.entries(s).sort((h,_)=>(0,n.idlLabelToId)(h[0])-(0,n.idlLabelToId)(_[0]))}accept(s,h){return s.visitVariant(this,this._fields,h)}covariant(s){if(typeof s=="object"&&Object.entries(s).length===1&&this._fields.every(([h,_])=>{try{return!s.hasOwnProperty(h)||_.covariant(s[h])}catch(T){throw new Error(`Invalid ${this.display()} argument: 

variant ${h} -> ${T.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(s){for(let h=0;h<this._fields.length;h++){const[_,T]=this._fields[h];if(s.hasOwnProperty(_)){const N=(0,i.lebEncode)(h),p=T.encodeValue(s[_]);return(0,r.concat)(N,p)}}throw Error("Variant has no data: "+s)}_buildTypeTableImpl(s){this._fields.forEach(([,N])=>{N.buildTypeTable(s)});const h=(0,i.slebEncode)(-21),_=(0,i.lebEncode)(this._fields.length),T=this._fields.map(([N,p])=>(0,r.concat)((0,i.lebEncode)((0,n.idlLabelToId)(N)),p.encodeType(s)));s.add(this,(0,r.concat)(h,_,...T))}decodeValue(s,h){const _=this.checkType(h);if(!(_ instanceof ge))throw new Error("Not a variant type");const T=Number((0,i.lebDecode)(s));if(T>=_._fields.length)throw Error("Invalid variant index: "+T);const[N,p]=_._fields[T];for(const[a,u]of this._fields)if((0,n.idlLabelToId)(N)===(0,n.idlLabelToId)(a)){const g=u.decodeValue(s,p);return{[a]:g}}throw new Error("Cannot find field hash "+N)}get name(){return`variant {${this._fields.map(([h,_])=>h+":"+_.name).join("; ")}}`}display(){return`variant {${this._fields.map(([h,_])=>h+(_.name==="null"?"":`:${_.display()}`)).join("; ")}}`}valueToString(s){for(const[h,_]of this._fields)if(s.hasOwnProperty(h)){const T=_.valueToString(s[h]);return T==="null"?`variant {${h}}`:`variant {${h}=${T}}`}throw new Error("Variant has no data: "+s)}}e.VariantClass=ge;class Ae extends I{constructor(){super(...arguments),this._id=Ae._counter++,this._type=void 0}accept(s,h){if(!this._type)throw Error("Recursive type uninitialized.");return s.visitRec(this,this._type,h)}fill(s){this._type=s}getType(){return this._type}covariant(s){if(this._type&&this._type.covariant(s))return!0;throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(s){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(s)}_buildTypeTableImpl(s){if(!this._type)throw Error("Recursive type uninitialized.");s.add(this,new Uint8Array([])),this._type.buildTypeTable(s),s.merge(this,this._type.name)}decodeValue(s,h){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(s,h)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`μ${this.name}.${this._type.name}`}valueToString(s){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(s)}}e.RecClass=Ae,Ae._counter=0;function xe(w){if((0,i.safeReadUint8)(w)!==1)throw new Error("Cannot decode principal");const h=Number((0,i.lebDecode)(w));return t.Principal.fromUint8Array(new Uint8Array((0,i.safeRead)(w,h)))}class J extends P{accept(s,h){return s.visitPrincipal(this,h)}covariant(s){if(s&&s._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(s){const h=s.toUint8Array(),_=(0,i.lebEncode)(h.byteLength);return(0,r.concat)(new Uint8Array([1]),_,h)}encodeType(){return(0,i.slebEncode)(-24)}decodeValue(s,h){return this.checkType(h),xe(s)}get name(){return"principal"}valueToString(s){return`${this.name} "${s.toText()}"`}}e.PrincipalClass=J;class we extends I{constructor(s,h,_=[]){super(),this.argTypes=s,this.retTypes=h,this.annotations=_}static argsToString(s,h){if(s.length!==h.length)throw new Error("arity mismatch");return"("+s.map((_,T)=>_.valueToString(h[T])).join(", ")+")"}accept(s,h){return s.visitFunc(this,h)}covariant(s){if(Array.isArray(s)&&s.length===2&&s[0]&&s[0]._isPrincipal&&typeof s[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue([s,h]){const _=s.toUint8Array(),T=(0,i.lebEncode)(_.byteLength),N=(0,r.concat)(new Uint8Array([1]),T,_),p=new TextEncoder().encode(h),a=(0,i.lebEncode)(p.byteLength);return(0,r.concat)(new Uint8Array([1]),N,a,p)}_buildTypeTableImpl(s){this.argTypes.forEach(g=>g.buildTypeTable(s)),this.retTypes.forEach(g=>g.buildTypeTable(s));const h=(0,i.slebEncode)(-22),_=(0,i.lebEncode)(this.argTypes.length),T=(0,r.concat)(...this.argTypes.map(g=>g.encodeType(s))),N=(0,i.lebEncode)(this.retTypes.length),p=(0,r.concat)(...this.retTypes.map(g=>g.encodeType(s))),a=(0,i.lebEncode)(this.annotations.length),u=(0,r.concat)(...this.annotations.map(g=>this.encodeAnnotation(g)));s.add(this,(0,r.concat)(h,_,T,N,p,a,u))}decodeValue(s){if((0,i.safeReadUint8)(s)!==1)throw new Error("Cannot decode function reference");const _=xe(s),T=Number((0,i.lebDecode)(s)),N=(0,i.safeRead)(s,T),a=new TextDecoder("utf8",{fatal:!0}).decode(N);return[_,a]}get name(){const s=this.argTypes.map(T=>T.name).join(", "),h=this.retTypes.map(T=>T.name).join(", "),_=" "+this.annotations.join(" ");return`(${s}) -> (${h})${_}`}valueToString([s,h]){return`func "${s.toText()}".${h}`}display(){const s=this.argTypes.map(T=>T.display()).join(", "),h=this.retTypes.map(T=>T.display()).join(", "),_=" "+this.annotations.join(" ");return`(${s}) → (${h})${_}`}encodeAnnotation(s){if(s==="query")return new Uint8Array([1]);if(s==="oneway")return new Uint8Array([2]);if(s==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}e.FuncClass=we;class ee extends I{constructor(s){super(),this._fields=Object.entries(s).sort((h,_)=>h[0]<_[0]?-1:h[0]>_[0]?1:0)}accept(s,h){return s.visitService(this,h)}covariant(s){if(s&&s._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${z(s)}`)}encodeValue(s){const h=s.toUint8Array(),_=(0,i.lebEncode)(h.length);return(0,r.concat)(new Uint8Array([1]),_,h)}_buildTypeTableImpl(s){this._fields.forEach(([N,p])=>p.buildTypeTable(s));const h=(0,i.slebEncode)(-23),_=(0,i.lebEncode)(this._fields.length),T=this._fields.map(([N,p])=>{const a=new TextEncoder().encode(N),u=(0,i.lebEncode)(a.length);return(0,r.concat)(u,a,p.encodeType(s))});s.add(this,(0,r.concat)(h,_,...T))}decodeValue(s){return xe(s)}get name(){return`service {${this._fields.map(([h,_])=>h+":"+_.name).join("; ")}}`}valueToString(s){return`service "${s.toText()}"`}}e.ServiceClass=ee;function z(w){const s=JSON.stringify(w,(h,_)=>typeof _=="bigint"?`BigInt(${_})`:_);return s&&s.length>c?s.substring(0,c-3)+"...":s}function se(w,s){if(s.length<w.length)throw Error("Wrong number of message arguments");const h=new b;w.forEach(u=>u.buildTypeTable(h));const _=new TextEncoder().encode(l),T=h.encode(),N=(0,i.lebEncode)(s.length),p=(0,r.concat)(...w.map(u=>u.encodeType(h))),a=(0,r.concat)(...m(w,s,(u,g)=>{try{u.covariant(g)}catch(x){throw new Error(x.message+`

`)}return u.encodeValue(g)}));return(0,r.concat)(_,T,N,p,a)}e.encode=se;function Y(w,s){const h=new r.PipeArrayBuffer(s);if(s.byteLength<l.length)throw new Error("Message length smaller than magic number");const _=(0,i.safeRead)(h,l.length),T=new TextDecoder().decode(_);if(T!==l)throw new Error("Wrong magic number: "+JSON.stringify(T));function N(G){const ne=[],fe=Number((0,i.lebDecode)(G));for(let f=0;f<fe;f++){const d=Number((0,i.slebDecode)(G));switch(d){case-18:case-19:{const v=Number((0,i.slebDecode)(G));ne.push([d,v]);break}case-20:case-21:{const v=[];let C=Number((0,i.lebDecode)(G)),L;for(;C--;){const V=Number((0,i.lebDecode)(G));if(V>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof L=="number"&&L>=V)throw new Error("field id collision or not sorted");L=V;const _e=Number((0,i.slebDecode)(G));v.push([V,_e])}ne.push([d,v]);break}case-22:{const v=[];let C=Number((0,i.lebDecode)(G));for(;C--;)v.push(Number((0,i.slebDecode)(G)));const L=[];let V=Number((0,i.lebDecode)(G));for(;V--;)L.push(Number((0,i.slebDecode)(G)));const _e=[];let Ue=Number((0,i.lebDecode)(G));for(;Ue--;)switch(Number((0,i.lebDecode)(G))){case 1:{_e.push("query");break}case 2:{_e.push("oneway");break}case 3:{_e.push("composite_query");break}default:throw new Error("unknown annotation")}ne.push([d,[v,L,_e]]);break}case-23:{let v=Number((0,i.lebDecode)(G));const C=[];for(;v--;){const L=Number((0,i.lebDecode)(G)),V=new TextDecoder().decode((0,i.safeRead)(G,L)),_e=(0,i.slebDecode)(G);C.push([V,_e])}ne.push([d,C]);break}default:throw new Error("Illegal op_code: "+d)}}const be=[],y=Number((0,i.lebDecode)(G));for(let f=0;f<y;f++)be.push(Number((0,i.slebDecode)(G)));return[ne,be]}const[p,a]=N(h);if(a.length<w.length)throw new Error("Wrong number of return values");const u=p.map(G=>ve());function g(G){if(G<-24)throw new Error("future value not supported");if(G<0)switch(G){case-1:return e.Null;case-2:return e.Bool;case-3:return e.Nat;case-4:return e.Int;case-5:return e.Nat8;case-6:return e.Nat16;case-7:return e.Nat32;case-8:return e.Nat64;case-9:return e.Int8;case-10:return e.Int16;case-11:return e.Int32;case-12:return e.Int64;case-13:return e.Float32;case-14:return e.Float64;case-15:return e.Text;case-16:return e.Reserved;case-17:return e.Empty;case-24:return e.Principal;default:throw new Error("Illegal op_code: "+G)}if(G>=p.length)throw new Error("type index out of range");return u[G]}function x(G){switch(G[0]){case-19:{const ne=g(G[1]);return oe(ne)}case-18:{const ne=g(G[1]);return E(ne)}case-20:{const ne={};for(const[y,f]of G[1]){const d=`_${y}_`;ne[d]=g(f)}const fe=le(ne),be=fe.tryAsTuple();return Array.isArray(be)?ie(...be):fe}case-21:{const ne={};for(const[fe,be]of G[1]){const y=`_${fe}_`;ne[y]=g(be)}return pe(ne)}case-22:{const[ne,fe,be]=G[1];return ae(ne.map(y=>g(y)),fe.map(y=>g(y)),be)}case-23:{const ne={},fe=G[1];for(const[be,y]of fe){let f=g(y);if(f instanceof Ae&&(f=f.getType()),!(f instanceof we))throw new Error("Illegal service definition: services can only contain functions");ne[be]=f}return ue(ne)}default:throw new Error("Illegal op_code: "+G[0])}}p.forEach((G,ne)=>{if(G[0]===-22){const fe=x(G);u[ne].fill(fe)}}),p.forEach((G,ne)=>{if(G[0]!==-22){const fe=x(G);u[ne].fill(fe)}});const S=a.map(G=>g(G)),M=w.map((G,ne)=>G.decodeValue(h,S[ne]));for(let G=w.length;G<S.length;G++)S[G].decodeValue(h,S[G]);if(h.byteLength>0)throw new Error("decode: Left-over bytes");return M}e.decode=Y,e.Empty=new O,e.Reserved=new q,e.Unknown=new F,e.Bool=new D,e.Null=new H,e.Text=new Z,e.Int=new X,e.Nat=new K,e.Float32=new j(32),e.Float64=new j(64),e.Int8=new $(8),e.Int16=new $(16),e.Int32=new $(32),e.Int64=new $(64),e.Nat8=new Q(8),e.Nat16=new Q(16),e.Nat32=new Q(32),e.Nat64=new Q(64),e.Principal=new J;function ie(...w){return new ye(w)}e.Tuple=ie;function oe(w){return new he(w)}e.Vec=oe;function E(w){return new W(w)}e.Opt=E;function le(w){return new ce(w)}e.Record=le;function pe(w){return new ge(w)}e.Variant=pe;function ve(){return new Ae}e.Rec=ve;function ae(w,s,h=[]){return new we(w,s,h)}e.Func=ae;function ue(w){return new ee(w)}e.Service=ue})(Sp);export{Wp as A,uf as F,Jr as H,Pe as P,Nn as a,fa as c,Xp as g,Sp as i,Zp as p,Yp as t,jp as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
